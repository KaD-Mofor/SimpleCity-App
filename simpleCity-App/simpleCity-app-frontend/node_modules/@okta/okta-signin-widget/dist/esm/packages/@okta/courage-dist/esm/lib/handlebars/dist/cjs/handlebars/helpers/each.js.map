{"version":3,"file":"each.js","sources":["../../../../../../../../../../../../packages/@okta/courage-dist/esm/lib/handlebars/dist/cjs/handlebars/helpers/each.js"],"sourcesContent":["import { commonjsGlobal } from '../../../../../../_virtual/_commonjsHelpers.js';\nimport { e as each } from '../../../../../../_virtual/each.js';\nimport '../utils.js';\nimport '../exception.js';\nimport { __exports as utils } from '../../../../../../_virtual/utils.js';\nimport { e as exception } from '../../../../../../_virtual/exception.js';\n\n(function (module, exports) {\n\nexports.__esModule = true; // istanbul ignore next\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nvar _utils = utils;\n\nvar _exception = exception.exports;\n\nvar _exception2 = _interopRequireDefault(_exception);\n\nexports['default'] = function (instance) {\n  instance.registerHelper('each', function (context, options) {\n    if (!options) {\n      throw new _exception2['default']('Must pass iterator to #each');\n    }\n\n    var fn = options.fn,\n        inverse = options.inverse,\n        i = 0,\n        ret = '',\n        data = undefined,\n        contextPath = undefined;\n\n    if (options.data && options.ids) {\n      contextPath = _utils.appendContextPath(options.data.contextPath, options.ids[0]) + '.';\n    }\n\n    if (_utils.isFunction(context)) {\n      context = context.call(this);\n    }\n\n    if (options.data) {\n      data = _utils.createFrame(options.data);\n    }\n\n    function execIteration(field, index, last) {\n      if (data) {\n        data.key = field;\n        data.index = index;\n        data.first = index === 0;\n        data.last = !!last;\n\n        if (contextPath) {\n          data.contextPath = contextPath + field;\n        }\n      }\n\n      ret = ret + fn(context[field], {\n        data: data,\n        blockParams: _utils.blockParams([context[field], field], [contextPath + field, null])\n      });\n    }\n\n    if (context && typeof context === 'object') {\n      if (_utils.isArray(context)) {\n        for (var j = context.length; i < j; i++) {\n          if (i in context) {\n            execIteration(i, i, i === context.length - 1);\n          }\n        }\n      } else if (commonjsGlobal.Symbol && context[commonjsGlobal.Symbol.iterator]) {\n        var newContext = [];\n        var iterator = context[commonjsGlobal.Symbol.iterator]();\n\n        for (var it = iterator.next(); !it.done; it = iterator.next()) {\n          newContext.push(it.value);\n        }\n\n        context = newContext;\n\n        for (var j = context.length; i < j; i++) {\n          execIteration(i, i, i === context.length - 1);\n        }\n      } else {\n        (function () {\n          var priorKey = undefined;\n          Object.keys(context).forEach(function (key) {\n            // We're running the iterations one step out of sync so we can detect\n            // the last iteration without have to scan the object twice and create\n            // an itermediate keys array.\n            if (priorKey !== undefined) {\n              execIteration(priorKey, i - 1);\n            }\n\n            priorKey = key;\n            i++;\n          });\n\n          if (priorKey !== undefined) {\n            execIteration(priorKey, i - 1, true);\n          }\n        })();\n      }\n    }\n\n    if (i === 0) {\n      ret = inverse(this);\n    }\n\n    return ret;\n  });\n};\n\nmodule.exports = exports['default'];\n}(each, each.exports));\n"],"names":["module","exports","__esModule","_interopRequireDefault","obj","_utils","utils","_exception","exception","_exception2","instance","registerHelper","context","options","fn","inverse","i","ret","data","undefined","contextPath","ids","appendContextPath","isFunction","call","createFrame","execIteration","field","index","last","key","first","blockParams","isArray","j","length","commonjsGlobal","Symbol","iterator","newContext","it","next","done","push","value","priorKey","Object","keys","forEach","each"],"mappings":"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"}