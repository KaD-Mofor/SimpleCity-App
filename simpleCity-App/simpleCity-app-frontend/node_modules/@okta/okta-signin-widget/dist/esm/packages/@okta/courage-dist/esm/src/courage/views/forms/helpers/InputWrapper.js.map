{"version":3,"file":"InputWrapper.js","sources":["../../../../../../../../../../../packages/@okta/courage-dist/esm/src/courage/views/forms/helpers/InputWrapper.js"],"sourcesContent":["import oktaUnderscore from '../../../util/underscore-wrapper.js';\nimport BaseView from '../../BaseView.js';\nimport FormUtil from './FormUtil.js';\n\nfunction runCallback(callback, field) {\n  callback.apply(this, oktaUnderscore.map(field.split(/\\s+/), function (field) {\n    return this.model.get(field);\n  }, this));\n}\n\nfunction runIf(fn, ctx) {\n  if (oktaUnderscore.isFunction(fn)) {\n    fn.call(ctx);\n  }\n}\n/**\n * @class InputWrapper\n * @extends Okta.View\n * @private\n * The outer wrapper that warps the label and the input container\n */\n\n\nvar InputWrapper = BaseView.extend({\n  tagName: function () {\n    if (this.options.group) {\n      return 'fieldset';\n    }\n\n    return 'div';\n  },\n  className: function () {\n    let className = 'o-form-fieldset';\n\n    if (this.options['label-top']) {\n      className += ' o-form-label-top';\n    }\n\n    if (this.options.readOnly) {\n      className += ' o-form-read-mode';\n    }\n\n    return className;\n  },\n  attributes: function () {\n    return {\n      'data-se': this.options['data-se'] || 'o-form-fieldset'\n    };\n  },\n\n  /**\n   * @constructor\n   * @param  {Object} options options hash\n   * @param  {Object} [options.events]\n   * @param  {Object} [options.bindings]\n   * @param  {Object} [options.showWhen]\n   * @param  {Function} [options.initialize] post initialize callback\n   * @param  {Function} [options.render] post render callback\n   */\n  constructor: function (options) {\n    if (options.className) {\n      this.inputWrapperClassName = this.className;\n      this.optionsClassName = options.className;\n\n      options.className = function () {\n        return oktaUnderscore.result(this, 'inputWrapperClassName', '') + ' ' + oktaUnderscore.result(this, 'optionsClassName');\n      };\n    }\n\n    BaseView.apply(this, arguments);\n\n    oktaUnderscore.each(options.events || {}, function (callback, event) {\n      this.listenTo(this.model, event, callback);\n    }, this);\n\n    oktaUnderscore.each(options.bindings || {}, function (callback, field) {\n      this.listenTo(this.model, FormUtil.changeEventString(field.split(/\\s+/)), oktaUnderscore.bind(runCallback, this, callback, field));\n    }, this);\n\n    FormUtil.applyShowWhen(this, options.showWhen);\n    FormUtil.applyToggleWhen(this, options.toggleWhen);\n    runIf(options.initialize, this);\n  },\n  postRender: function () {\n    oktaUnderscore.each(this.options.bindings || {}, runCallback, this);\n\n    runIf(this.options.render, this);\n  },\n\n  /**\n   * @return {InputLabel}\n   */\n  getLabel: function () {\n    return this.size() > 1 ? this.at(0) : null;\n  },\n\n  /**\n   * @deprecated ambiguous naming, use {@link #getInputContainer}\n   */\n  getInput: function () {\n    return this.getInputContainer();\n  },\n\n  /**\n   * @return {InputContainer}\n   */\n  getInputContainer: function () {\n    return this.at(this.size() > 1 ? 1 : 0);\n  },\n\n  /**\n   * @return {BaseInput[]}\n   */\n  getInputs: function () {\n    return this.getInputContainer().toArray();\n  },\n  focus: function () {\n    return this.getInput().focus();\n  }\n});\n\nexport { InputWrapper as default };\n"],"names":["runCallback","callback","field","apply","oktaUnderscore","map","split","model","get","runIf","fn","ctx","isFunction","call","InputWrapper","BaseView","extend","tagName","options","group","className","readOnly","attributes","constructor","inputWrapperClassName","optionsClassName","result","arguments","each","events","event","listenTo","bindings","FormUtil","changeEventString","bind","applyShowWhen","showWhen","applyToggleWhen","toggleWhen","initialize","postRender","render","getLabel","size","at","getInput","getInputContainer","getInputs","toArray","focus"],"mappings":"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"}