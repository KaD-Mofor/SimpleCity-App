{"version":3,"file":"InputContainer.js","sources":["../../../../../../../../../../../packages/@okta/courage-dist/esm/src/courage/views/forms/helpers/InputContainer.js"],"sourcesContent":["import _Handlebars2 from '../../../../../lib/handlebars/dist/cjs/handlebars.runtime.js';\nimport oktaUnderscore from '../../../util/underscore-wrapper.js';\nimport Logger from '../../../util/Logger.js';\nimport Util from '../../../util/Util.js';\nimport StringUtil from '../../../util/StringUtil.js';\nimport BaseView from '../../BaseView.js';\n\nconst isABaseView = Util.isABaseView;\n/**\n * @class InputContainer\n * @private\n *\n * TODO: OKTA-80796\n * Attention: Please change with caution since this is used in other places\n */\n\nvar InputContainer = BaseView.extend({\n  attributes: function () {\n    return {\n      'data-se': 'o-form-input-container'\n    };\n  },\n  className: function () {\n    let className = 'o-form-input';\n\n    if (this.options.wide) {\n      className += ' o-form-wide';\n    }\n\n    if (oktaUnderscore.contains([1, 2, 3, 4], this.options.multi)) {\n      className += ' o-form-multi-input-' + this.options.multi;\n\n      if (oktaUnderscore.isArray(this.options.input)) {\n        const inputGroup = oktaUnderscore.find(this.options.input, function (input) {\n          return oktaUnderscore.contains(['text+select', 'select+text'], input.options.type);\n        });\n\n        inputGroup && (className += ' o-form-multi-input-group-' + this.options.multi);\n      }\n    }\n\n    return className;\n  },\n  _getNames: function () {\n    const names = oktaUnderscore.isArray(this.options.name) ? this.options.name : [this.options.name];\n    /*eslint complexity: 0 */\n\n    if (this.options.type === 'group') {\n      names.push.apply(names, oktaUnderscore.pluck(this.options.input[0].options.params.inputs, 'name'));\n    } else if (oktaUnderscore.isArray(this.options.name)) {\n      if (this.options.input && this.options.input.options && this.options.input.options.name) {\n        names.push(this.options.input.options.name);\n      }\n    } else if (this.options.input) {\n      if (oktaUnderscore.isArray(this.options.input)) {\n        oktaUnderscore.each(this.options.input, function (inputItem) {\n          names.push(inputItem.options.name);\n        });\n      } else {\n        names.push(this.options.input.options.name);\n      }\n    }\n\n    return oktaUnderscore.uniq(oktaUnderscore.compact(names));\n  },\n  _getInputElement: function () {\n    // NOTE: this.options.input is sometimes not an array under test\n    const lastInput = Array.isArray(this.options.input) ? oktaUnderscore.last(this.options.input) : this.options.input; // FIXME: replace with _.get\n\n    const id = lastInput && lastInput.options && lastInput.options.inputId;\n    const el = id ? this.$('#' + id) : null;\n    return el && el.length ? el : null;\n  },\n  constructor: function () {\n    /* eslint max-statements: [2, 18] */\n    BaseView.apply(this, arguments);\n    const explainTop = this.options['explain-top'] && this.options['label-top'];\n\n    if (this.options.input) {\n      if (oktaUnderscore.isArray(this.options.input)) {\n        oktaUnderscore.each(this.options.input, function (inputItem) {\n          this.add(inputItem, {\n            prepend: !explainTop\n          });\n        }, this);\n      } else {\n        this.add(this.options.input, {\n          prepend: !explainTop\n        });\n      }\n    }\n\n    this.__setExplain(this.options);\n\n    const names = this._getNames();\n\n    this.listenTo(this.model, 'form:field-error', function (name, errors) {\n      if (oktaUnderscore.contains(names, name)) {\n        this.__setError(errors, explainTop);\n      }\n    });\n    this.listenTo(this.model, 'form:clear-errors change:' + names.join(' change:'), this.__clearError);\n    this.listenTo(this.model, 'form:clear-error:' + names.join(' form:clear-error:'), this.__clearError);\n\n    if (oktaUnderscore.resultCtx(this.options, 'autoRender', this)) {\n      this.listenTo(this.model, 'change:' + this.options.name, this.render);\n    }\n\n    this.__errorState = false;\n  },\n\n  /**\n   * Populates the explain on the input container (if it exists). There are\n   * two ways to use this:\n   * 1. Raw text - wraps in the correct html template\n   * 2. Custom html\n   *    - pass in a View class (preferred)\n   *    - pass in an instance of a View\n   * Some additional notes:\n   * - You can pass a function that returns any of the above\n   * - This maintains support for the deprecated \"customExplain\" property\n   *   that was used before. This pattern is superseded by explain, so use\n   *   that instead.\n   * @private\n   */\n  __setExplain: function (options) {\n    let explain; // Deprecated - if you need custom html, use explain instead\n\n    if (options.customExplain) {\n      Logger.warn('Deprecated - use explain instead of customExplain');\n      this.add(this.options.customExplain);\n      return;\n    }\n\n    explain = options.explain;\n\n    if (oktaUnderscore.isFunction(explain) && !isABaseView(explain)) {\n      explain = oktaUnderscore.resultCtx(this.options, 'explain', this);\n    }\n\n    if (!explain) {\n      return;\n    }\n\n    if (isABaseView(explain)) {\n      this.template = _Handlebars2.template({\n        \"compiler\": [8, \">= 4.3.0\"],\n        \"main\": function (container, depth0, helpers, partials, data) {\n          return \"<p class=\\\"o-form-explain\\\"></p>\";\n        },\n        \"useData\": true\n      });\n      this.add(explain, ' > .o-form-explain');\n    } else {\n      this.template = _Handlebars2.template({\n        \"compiler\": [8, \">= 4.3.0\"],\n        \"main\": function (container, depth0, helpers, partials, data) {\n          var helper,\n              lookupProperty = container.lookupProperty || function (parent, propertyName) {\n            if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n              return parent[propertyName];\n            }\n\n            return undefined;\n          };\n\n          return \"<p class=\\\"o-form-explain\\\">\" + container.escapeExpression((helper = (helper = lookupProperty(helpers, \"explain\") || (depth0 != null ? lookupProperty(depth0, \"explain\") : depth0)) != null ? helper : container.hooks.helperMissing, typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : container.nullContext || {}, {\n            \"name\": \"explain\",\n            \"hash\": {},\n            \"data\": data,\n            \"loc\": {\n              \"start\": {\n                \"line\": 1,\n                \"column\": 26\n              },\n              \"end\": {\n                \"line\": 1,\n                \"column\": 37\n              }\n            }\n          }) : helper)) + \"</p>\";\n        },\n        \"useData\": true\n      });\n    }\n  },\n\n  /**\n   * Highlight the input as invalid (validation failed)\n   * Adds an explaination message of the error\n   * @private\n   */\n  __setError: function (errors, explainTop) {\n    this.__errorState = true;\n    this.$el.addClass('o-form-has-errors');\n\n    const errorId = oktaUnderscore.uniqueId('input-container-error');\n\n    const html = this.__getHTMLForError(oktaUnderscore.flatten(errors), errorId);\n\n    const $elExplain = this.$('.o-form-explain').not('.o-form-input-error').first();\n\n    if ($elExplain.length && !explainTop) {\n      $elExplain.before(html);\n    } else {\n      this.$el.append(html);\n    }\n\n    const target = this._getInputElement() || this.$el;\n    target.attr('aria-describedby', errorId);\n    target.attr('aria-invalid', true);\n  },\n  __getHTMLForError: function (errors, errorId) {\n    const tmpl = _Handlebars2.template({\n      \"compiler\": [8, \">= 4.3.0\"],\n      \"main\": function (container, depth0, helpers, partials, data) {\n        var helper,\n            alias1 = depth0 != null ? depth0 : container.nullContext || {},\n            alias2 = container.hooks.helperMissing,\n            alias3 = \"function\",\n            alias4 = container.escapeExpression,\n            lookupProperty = container.lookupProperty || function (parent, propertyName) {\n          if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n            return parent[propertyName];\n          }\n\n          return undefined;\n        };\n\n        return \"<p id=\\\"\" + alias4((helper = (helper = lookupProperty(helpers, \"errorId\") || (depth0 != null ? lookupProperty(depth0, \"errorId\") : depth0)) != null ? helper : alias2, typeof helper === alias3 ? helper.call(alias1, {\n          \"name\": \"errorId\",\n          \"hash\": {},\n          \"data\": data,\n          \"loc\": {\n            \"start\": {\n              \"line\": 1,\n              \"column\": 7\n            },\n            \"end\": {\n              \"line\": 1,\n              \"column\": 18\n            }\n          }\n        }) : helper)) + \"\\\" class=\\\"okta-form-input-error o-form-input-error o-form-explain\\\" role=\\\"alert\\\"><span class=\\\"icon icon-16 error-16-small\\\" role=\\\"img\\\" aria-label=\\\"\" + alias4((helper = (helper = lookupProperty(helpers, \"iconLabel\") || (depth0 != null ? lookupProperty(depth0, \"iconLabel\") : depth0)) != null ? helper : alias2, typeof helper === alias3 ? helper.call(alias1, {\n          \"name\": \"iconLabel\",\n          \"hash\": {},\n          \"data\": data,\n          \"loc\": {\n            \"start\": {\n              \"line\": 1,\n              \"column\": 162\n            },\n            \"end\": {\n              \"line\": 1,\n              \"column\": 175\n            }\n          }\n        }) : helper)) + \"\\\"></span>\" + alias4((helper = (helper = lookupProperty(helpers, \"text\") || (depth0 != null ? lookupProperty(depth0, \"text\") : depth0)) != null ? helper : alias2, typeof helper === alias3 ? helper.call(alias1, {\n          \"name\": \"text\",\n          \"hash\": {},\n          \"data\": data,\n          \"loc\": {\n            \"start\": {\n              \"line\": 1,\n              \"column\": 184\n            },\n            \"end\": {\n              \"line\": 1,\n              \"column\": 192\n            }\n          }\n        }) : helper)) + \"</p>\";\n      },\n      \"useData\": true\n    });\n\n    const iconLabel = StringUtil.localize('oform.error.icon.ariaLabel', 'courage'); // 'Error'\n\n    if (this.options.multirowError) {\n      let html = '';\n      errors.forEach(error => {\n        html = html + tmpl({\n          errorId: errorId,\n          iconLabel: iconLabel,\n          text: error\n        });\n      });\n      return html;\n    }\n\n    return tmpl({\n      errorId: errorId,\n      iconLabel: iconLabel,\n      text: errors.join(', ')\n    });\n  },\n\n  /**\n   * Un-highlight the input and remove explaination text\n   * @private\n   */\n  __clearError: function () {\n    if (this.__errorState) {\n      this.$('.o-form-input-error').remove();\n      const target = this._getInputElement() || this.$el;\n      target.attr('aria-describedby', null);\n      target.attr('aria-invalid', null);\n      this.$el.removeClass('o-form-has-errors');\n      this.__errorState = false;\n\n      oktaUnderscore.defer(() => {\n        this.model.trigger('form:resize');\n      });\n    }\n  },\n  focus: function () {\n    this.each(function (view) {\n      if (view.focus) {\n        return view.focus();\n      }\n    });\n    return this;\n  }\n});\n\nexport { InputContainer as default };\n"],"names":["isABaseView","Util","InputContainer","BaseView","extend","attributes","className","options","wide","oktaUnderscore","contains","multi","isArray","input","inputGroup","find","type","_getNames","names","name","push","apply","pluck","params","inputs","each","inputItem","uniq","compact","_getInputElement","lastInput","Array","last","id","inputId","el","$","length","constructor","arguments","explainTop","add","prepend","__setExplain","listenTo","model","errors","__setError","join","__clearError","resultCtx","render","__errorState","explain","customExplain","Logger","warn","isFunction","template","_Handlebars2","container","depth0","helpers","partials","data","helper","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","undefined","escapeExpression","hooks","helperMissing","nullContext","$el","addClass","errorId","uniqueId","html","__getHTMLForError","flatten","$elExplain","not","first","before","append","target","attr","tmpl","alias1","alias2","alias3","alias4","iconLabel","StringUtil","localize","multirowError","forEach","error","text","remove","removeClass","defer","trigger","focus","view"],"mappings":"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"}