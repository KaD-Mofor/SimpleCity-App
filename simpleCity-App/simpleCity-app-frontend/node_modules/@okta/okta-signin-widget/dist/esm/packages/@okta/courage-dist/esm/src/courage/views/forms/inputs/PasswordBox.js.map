{"version":3,"file":"PasswordBox.js","sources":["../../../../../../../../../../../packages/@okta/courage-dist/esm/src/courage/views/forms/inputs/PasswordBox.js"],"sourcesContent":["import _Handlebars2 from '../../../../../lib/handlebars/dist/cjs/handlebars.runtime.js';\nimport oktaUnderscore from '../../../util/underscore-wrapper.js';\nimport TextBox from './TextBox.js';\n\nconst toggleTemplate = _Handlebars2.template({\n  \"compiler\": [8, \">= 4.3.0\"],\n  \"main\": function (container, depth0, helpers, partials, data) {\n    return \"<span class=\\\"password-toggle\\\"><span class=\\\"eyeicon visibility-16 button-show\\\"></span><span class=\\\"eyeicon visibility-off-16 button-hide\\\"></span></span>\";\n  },\n  \"useData\": true\n});\n\nconst toggleTimeout = 30000;\nvar PasswordBox = TextBox.extend({\n  initialize: function () {\n    if (this.__showPasswordToggle()) {\n      this.events['click .password-toggle .button-show'] = '__showPassword';\n      this.events['click .password-toggle .button-hide'] = '__hidePassword';\n    }\n\n    this.delegateEvents();\n  },\n  postRender: function () {\n    if (this.isEditMode() && this.__showPasswordToggle()) {\n      this.$el.append(toggleTemplate);\n      this.$el.find('input[type=\"password\"]').addClass('password-with-toggle');\n    }\n\n    TextBox.prototype.postRender.apply(this, arguments);\n  },\n\n  /**\n   * @Override\n   * Overrides the default val method in order to avoid whitespace trimming\n   */\n  val: function () {\n    return this.$('input[type=\"' + this.options.type + '\"]').val();\n  },\n  __showPasswordToggle: function () {\n    return this.options.params && this.options.params.showPasswordToggle;\n  },\n  __showPassword: function () {\n    // Turn off the spellcheck if the user decides to switch to regular input\n    // in order to prevent sending passwords to third party spellcheckers\n    this.$('input').attr('spellcheck', false);\n    TextBox.prototype.changeType.apply(this, ['text']);\n    this.$('.password-toggle .button-show').hide();\n    this.$('.password-toggle .button-hide').show();\n    this.passwordToggleTimer = oktaUnderscore.delay(() => {\n      this.__hidePassword();\n    }, toggleTimeout);\n  },\n  __hidePassword: function () {\n    TextBox.prototype.changeType.apply(this, ['password']);\n    this.$('.password-toggle .button-show').show();\n    this.$('.password-toggle .button-hide').hide(); // clear timeout\n\n    if (this.passwordToggleTimer) {\n      clearTimeout(this.passwordToggleTimer);\n    }\n  }\n});\n\nexport { PasswordBox as default };\n"],"names":["toggleTemplate","_Handlebars2","template","container","depth0","helpers","partials","data","toggleTimeout","PasswordBox","TextBox","extend","initialize","__showPasswordToggle","events","delegateEvents","postRender","isEditMode","$el","append","find","addClass","prototype","apply","arguments","val","$","options","type","params","showPasswordToggle","__showPassword","attr","changeType","hide","show","passwordToggleTimer","oktaUnderscore","delay","__hidePassword","clearTimeout"],"mappings":";;;;AAIA,MAAMA,cAAc,GAAGC,YAAY,CAACC,QAAQ,CAAC;AAC3C,EAAA,UAAU,EAAE,CAAC,CAAC,EAAE,UAAU,CAAC;EAC3B,MAAM,EAAE,UAAUC,SAAS,EAAEC,MAAM,EAAEC,OAAO,EAAEC,QAAQ,EAAEC,IAAI,EAAE;AAC5D,IAAA,OAAO,+JAA+J,CAAA;GACvK;AACD,EAAA,SAAS,EAAE,IAAA;AACb,CAAC,CAAC,CAAA;AAEF,MAAMC,aAAa,GAAG,KAAK,CAAA;AAC3B,IAAIC,WAAW,GAAGC,OAAO,CAACC,MAAM,CAAC;AAC/BC,EAAAA,UAAU,EAAE,YAAY;AACtB,IAAA,IAAI,IAAI,CAACC,oBAAoB,EAAE,EAAE;AAC/B,MAAA,IAAI,CAACC,MAAM,CAAC,qCAAqC,CAAC,GAAG,gBAAgB,CAAA;AACrE,MAAA,IAAI,CAACA,MAAM,CAAC,qCAAqC,CAAC,GAAG,gBAAgB,CAAA;AACvE,KAAA;IAEA,IAAI,CAACC,cAAc,EAAE,CAAA;GACtB;AACDC,EAAAA,UAAU,EAAE,YAAY;IACtB,IAAI,IAAI,CAACC,UAAU,EAAE,IAAI,IAAI,CAACJ,oBAAoB,EAAE,EAAE;AACpD,MAAA,IAAI,CAACK,GAAG,CAACC,MAAM,CAACnB,cAAc,CAAC,CAAA;MAC/B,IAAI,CAACkB,GAAG,CAACE,IAAI,CAAC,wBAAwB,CAAC,CAACC,QAAQ,CAAC,sBAAsB,CAAC,CAAA;AAC1E,KAAA;IAEAX,OAAO,CAACY,SAAS,CAACN,UAAU,CAACO,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC,CAAA;GACpD;AAED;AACF;AACA;AACA;AACEC,EAAAA,GAAG,EAAE,YAAY;AACf,IAAA,OAAO,IAAI,CAACC,CAAC,CAAC,cAAc,GAAG,IAAI,CAACC,OAAO,CAACC,IAAI,GAAG,IAAI,CAAC,CAACH,GAAG,EAAE,CAAA;GAC/D;AACDZ,EAAAA,oBAAoB,EAAE,YAAY;AAChC,IAAA,OAAO,IAAI,CAACc,OAAO,CAACE,MAAM,IAAI,IAAI,CAACF,OAAO,CAACE,MAAM,CAACC,kBAAkB,CAAA;GACrE;AACDC,EAAAA,cAAc,EAAE,YAAY;AAC1B;AACA;IACA,IAAI,CAACL,CAAC,CAAC,OAAO,CAAC,CAACM,IAAI,CAAC,YAAY,EAAE,KAAK,CAAC,CAAA;AACzCtB,IAAAA,OAAO,CAACY,SAAS,CAACW,UAAU,CAACV,KAAK,CAAC,IAAI,EAAE,CAAC,MAAM,CAAC,CAAC,CAAA;AAClD,IAAA,IAAI,CAACG,CAAC,CAAC,+BAA+B,CAAC,CAACQ,IAAI,EAAE,CAAA;AAC9C,IAAA,IAAI,CAACR,CAAC,CAAC,+BAA+B,CAAC,CAACS,IAAI,EAAE,CAAA;AAC9C,IAAA,IAAI,CAACC,mBAAmB,GAAGC,cAAc,CAACC,KAAK,CAAC,MAAM;MACpD,IAAI,CAACC,cAAc,EAAE,CAAA;KACtB,EAAE/B,aAAa,CAAC,CAAA;GAClB;AACD+B,EAAAA,cAAc,EAAE,YAAY;AAC1B7B,IAAAA,OAAO,CAACY,SAAS,CAACW,UAAU,CAACV,KAAK,CAAC,IAAI,EAAE,CAAC,UAAU,CAAC,CAAC,CAAA;AACtD,IAAA,IAAI,CAACG,CAAC,CAAC,+BAA+B,CAAC,CAACS,IAAI,EAAE,CAAA;IAC9C,IAAI,CAACT,CAAC,CAAC,+BAA+B,CAAC,CAACQ,IAAI,EAAE,CAAC;;IAE/C,IAAI,IAAI,CAACE,mBAAmB,EAAE;AAC5BI,MAAAA,YAAY,CAAC,IAAI,CAACJ,mBAAmB,CAAC,CAAA;AACxC,KAAA;AACF,GAAA;AACF,CAAC;;;;"}