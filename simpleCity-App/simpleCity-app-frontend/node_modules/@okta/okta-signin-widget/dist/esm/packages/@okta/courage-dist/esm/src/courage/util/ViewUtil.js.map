{"version":3,"file":"ViewUtil.js","sources":["../../../../../../../../../packages/@okta/courage-dist/esm/src/courage/util/ViewUtil.js"],"sourcesContent":["import oktaUnderscore from './underscore-wrapper.js';\n\nfunction changeEventString(doWhen) {\n  return 'change:' + oktaUnderscore.keys(doWhen).join(' change:');\n}\n\nfunction calcDoWhen(value, key) {\n  const modelValue = this.model.get(key);\n\n  if (oktaUnderscore.isFunction(value)) {\n    return value.call(this, modelValue);\n  } else {\n    return value === modelValue;\n  }\n}\n\nfunction _doWhen(view, doWhen, fn) {\n  const toggle = oktaUnderscore.bind(fn, view, view, doWhen);\n\n  view.render = oktaUnderscore.wrap(view.render, function (render) {\n    const val = render.call(view);\n    toggle({\n      animate: false\n    });\n    return val;\n  });\n  view.listenTo(view.model, changeEventString(doWhen), function () {\n    toggle({\n      animate: true\n    });\n  });\n}\n\nvar ViewUtil = {\n  applyDoWhen: function (view, doWhen, fn) {\n    if (!(view.model && oktaUnderscore.isObject(doWhen) && oktaUnderscore.size(doWhen) && oktaUnderscore.isFunction(fn))) {\n      return;\n    }\n\n    _doWhen(view, doWhen, function (view, doWhen, options) {\n      const result = oktaUnderscore.every(oktaUnderscore.map(doWhen, calcDoWhen, view));\n\n      fn.call(view, result, options);\n    });\n  }\n};\n\nexport { ViewUtil as default };\n"],"names":["changeEventString","doWhen","oktaUnderscore","keys","join","calcDoWhen","value","key","modelValue","model","get","isFunction","call","_doWhen","view","fn","toggle","bind","render","wrap","val","animate","listenTo","ViewUtil","applyDoWhen","isObject","size","options","result","every","map"],"mappings":";;AAEA,SAASA,iBAAiB,CAACC,MAAM,EAAE;AACjC,EAAA,OAAO,SAAS,GAAGC,cAAc,CAACC,IAAI,CAACF,MAAM,CAAC,CAACG,IAAI,CAAC,UAAU,CAAC,CAAA;AACjE,CAAA;AAEA,SAASC,UAAU,CAACC,KAAK,EAAEC,GAAG,EAAE;EAC9B,MAAMC,UAAU,GAAG,IAAI,CAACC,KAAK,CAACC,GAAG,CAACH,GAAG,CAAC,CAAA;AAEtC,EAAA,IAAIL,cAAc,CAACS,UAAU,CAACL,KAAK,CAAC,EAAE;AACpC,IAAA,OAAOA,KAAK,CAACM,IAAI,CAAC,IAAI,EAAEJ,UAAU,CAAC,CAAA;AACrC,GAAC,MAAM;IACL,OAAOF,KAAK,KAAKE,UAAU,CAAA;AAC7B,GAAA;AACF,CAAA;AAEA,SAASK,OAAO,CAACC,IAAI,EAAEb,MAAM,EAAEc,EAAE,EAAE;AACjC,EAAA,MAAMC,MAAM,GAAGd,cAAc,CAACe,IAAI,CAACF,EAAE,EAAED,IAAI,EAAEA,IAAI,EAAEb,MAAM,CAAC,CAAA;AAE1Da,EAAAA,IAAI,CAACI,MAAM,GAAGhB,cAAc,CAACiB,IAAI,CAACL,IAAI,CAACI,MAAM,EAAE,UAAUA,MAAM,EAAE;AAC/D,IAAA,MAAME,GAAG,GAAGF,MAAM,CAACN,IAAI,CAACE,IAAI,CAAC,CAAA;AAC7BE,IAAAA,MAAM,CAAC;AACLK,MAAAA,OAAO,EAAE,KAAA;AACX,KAAC,CAAC,CAAA;AACF,IAAA,OAAOD,GAAG,CAAA;AACZ,GAAC,CAAC,CAAA;AACFN,EAAAA,IAAI,CAACQ,QAAQ,CAACR,IAAI,CAACL,KAAK,EAAET,iBAAiB,CAACC,MAAM,CAAC,EAAE,YAAY;AAC/De,IAAAA,MAAM,CAAC;AACLK,MAAAA,OAAO,EAAE,IAAA;AACX,KAAC,CAAC,CAAA;AACJ,GAAC,CAAC,CAAA;AACJ,CAAA;AAEA,IAAIE,QAAQ,GAAG;AACbC,EAAAA,WAAW,EAAE,UAAUV,IAAI,EAAEb,MAAM,EAAEc,EAAE,EAAE;IACvC,IAAI,EAAED,IAAI,CAACL,KAAK,IAAIP,cAAc,CAACuB,QAAQ,CAACxB,MAAM,CAAC,IAAIC,cAAc,CAACwB,IAAI,CAACzB,MAAM,CAAC,IAAIC,cAAc,CAACS,UAAU,CAACI,EAAE,CAAC,CAAC,EAAE;AACpH,MAAA,OAAA;AACF,KAAA;IAEAF,OAAO,CAACC,IAAI,EAAEb,MAAM,EAAE,UAAUa,IAAI,EAAEb,MAAM,EAAE0B,OAAO,EAAE;AACrD,MAAA,MAAMC,MAAM,GAAG1B,cAAc,CAAC2B,KAAK,CAAC3B,cAAc,CAAC4B,GAAG,CAAC7B,MAAM,EAAEI,UAAU,EAAES,IAAI,CAAC,CAAC,CAAA;MAEjFC,EAAE,CAACH,IAAI,CAACE,IAAI,EAAEc,MAAM,EAAED,OAAO,CAAC,CAAA;AAChC,KAAC,CAAC,CAAA;AACJ,GAAA;AACF;;;;"}