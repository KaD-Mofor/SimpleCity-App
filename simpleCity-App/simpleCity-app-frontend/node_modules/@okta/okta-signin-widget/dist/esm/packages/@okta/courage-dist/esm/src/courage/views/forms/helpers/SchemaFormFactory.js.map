{"version":3,"file":"SchemaFormFactory.js","sources":["../../../../../../../../../../../packages/@okta/courage-dist/esm/src/courage/views/forms/helpers/SchemaFormFactory.js"],"sourcesContent":["import oktaUnderscore from '../../../util/underscore-wrapper.js';\nimport StringUtil from '../../../util/StringUtil.js';\nimport BooleanSelect from '../inputs/BooleanSelect.js';\nimport TextBoxSet from '../inputs/TextBoxSet.js';\nimport EnumTypeHelper from './EnumTypeHelper.js';\n\n/* eslint max-statements: 0, max-params: 0 */\n\nfunction convertStringToNumber(string) {\n  const number = StringUtil.parseFloat(string);\n  return string === '' ? null : number;\n} // converts possibleValues to choices\n// [a, b, c] => {a: a, b: b, c: c}\n\n\nfunction getChoices(values) {\n  return oktaUnderscore.object(values, values);\n}\n\nfunction isArray(type) {\n  return type && type.indexOf('array') >= 0;\n} // A schema property may have an objectName either\n// at the root level or nested in the items object\n\n\nfunction getObjectName(schemaProp) {\n  const items = schemaProp.get('items');\n\n  if (items) {\n    return items.objectName;\n  }\n\n  return schemaProp.get('objectName');\n}\n/**\n * Checks the validity of a schema property.\n *\n * @param {SchemaProperty} [schemaProp] A schema property backbone model\n * @param {Object} [values] An object of the form { key: [value1, value2]}\n * @return {Boolean} true/false\n * @private\n */\n\n\nfunction isValidSchemaProp(schemaProp, values) {\n  const objectName = getObjectName(schemaProp);\n  const results = values[objectName]; // a schema property that references an empty list of values\n  // Im looking at you, google apps.\n\n  if (objectName && oktaUnderscore(results).isEmpty()) {\n    return false;\n  }\n\n  return true;\n} // Maps each __displayType__ to a basic set of inputOptions.\n\n\nfunction defaultOptions(property) {\n  const type = property.get('__displayType__');\n  const values = property.get('__possibleValues__');\n  const name = property.get('name');\n  const title = property.get('title');\n  /* eslint complexity: [2, 24] */\n\n  const inputOptions = {\n    type: 'text',\n    name: name,\n    label: title || name\n  }; // @see customOptions for enum complex \"object\" type,\n  // a.k.a \"object\" or \"arrayofobject\" type has enum values defined.\n  // Other cases (e.g., nested object type) are not support yet.\n\n  switch (type) {\n    case 'arrayofstring':\n      inputOptions.input = TextBoxSet;\n      inputOptions.params = {\n        itemType: 'string'\n      };\n      break;\n\n    case 'arrayofnumber':\n      inputOptions.input = TextBoxSet;\n      inputOptions.params = {\n        itemType: 'number'\n      };\n      break;\n\n    case 'arrayofinteger':\n      inputOptions.input = TextBoxSet;\n      inputOptions.params = {\n        itemType: 'integer'\n      };\n      break;\n\n    case 'arrayofobject':\n      inputOptions.input = TextBoxSet;\n      inputOptions.params = {\n        itemType: property.get('items').type\n      };\n      break;\n\n    case 'arrayofref-id':\n      inputOptions.input = TextBoxSet;\n      inputOptions.params = {\n        itemType: property.get('items').format\n      };\n      break;\n\n    case 'boolean':\n      inputOptions.input = BooleanSelect;\n      break;\n\n    case 'integer':\n    case 'number':\n      inputOptions.to = convertStringToNumber;\n      break;\n\n    case 'reference':\n      inputOptions.type = 'select';\n      inputOptions.options = getChoices(values);\n      break;\n\n    case 'image':\n      inputOptions.readOnly = true;\n\n      inputOptions.from = function (value) {\n        return oktaUnderscore.isEmpty(value) ? '' : StringUtil.localize('user.profile.image.image_set', 'courage'); // TODO\n      };\n\n      break;\n\n    case 'password':\n      inputOptions.type = 'password';\n      break;\n\n    case 'date':\n      inputOptions.type = 'date';\n      break;\n\n    case 'uri':\n    case 'country-code':\n    case 'country_code':\n    case 'language-code':\n    case 'language_code':\n    case 'email':\n    case 'locale':\n    case 'timezone':\n    case 'string':\n    case 'object':\n      // default input options\n      break;\n\n    default:\n      throw new Error(`unknown type: ${type}`);\n  }\n\n  return inputOptions;\n} // Sets nonbasic inputOptions, such as an array with possible values\n\n\nfunction customOptions(property) {\n  let inputOptions = {};\n  const name = property.get('name');\n  const type = property.get('__displayType__');\n  const values = property.get('__possibleValues__');\n  const prefix = property.get('__fieldNamePrefix__');\n\n  if (prefix) {\n    inputOptions.name = prefix + name;\n    inputOptions.errorField = name;\n  }\n\n  if (property.isEnumType()) {\n    const configs = {\n      displayType: type,\n      title: property.get('title'),\n      enumValues: property.getEnumValues()\n    };\n    inputOptions = oktaUnderscore.extend({}, EnumTypeHelper.getEnumInputOptions(configs), inputOptions);\n  } else if (isArray(type) && values) {\n    inputOptions.type = 'checkboxset';\n    inputOptions.input = null;\n    inputOptions.options = getChoices(values);\n  }\n\n  return inputOptions;\n}\n\nfunction augmentSchemaProp(schemaProp, possibleValues, profile) {\n  const name = schemaProp.get('name');\n  const prefix = profile.__nestedProperty__;\n  let defaultValues = possibleValues[name];\n  const userValues = profile.get(name);\n  let values; // If API responds with a field name that differs from the form-field name\n  // example: Model's 'profile.username' vs. server's 'username'\n\n  if (prefix) {\n    schemaProp.set('__fieldNamePrefix__', prefix);\n  } // case 1: objectName - fixed list of values are set for the input\n\n\n  const fixedValues = possibleValues[getObjectName(schemaProp)]; // case 2: name only - default list of values are provided, user can add more\n  // TODO: this case does not yet exist, so it is not tested\n\n  if (defaultValues && userValues) {\n    defaultValues = oktaUnderscore.union(defaultValues, userValues);\n  } // If both fixed and default values exist,\n  // take the fixed values unless they are empty\n\n\n  if (fixedValues && fixedValues.length) {\n    values = fixedValues;\n  } else if (defaultValues && defaultValues.length) {\n    values = defaultValues;\n  }\n\n  schemaProp.set('__possibleValues__', values);\n}\n\nfunction augmentSchemaProps(schemaProps, possibleValues, profile) {\n  schemaProps.each(function (schemaProp) {\n    augmentSchemaProp(schemaProp, possibleValues, profile);\n  });\n  return schemaProps;\n}\n/**\n * Remove invalid schema properties from a collection\n *\n * @param {SchemaProperties Collection} [properties] A collection of schema properties\n * @param {Object} [values] An object of the form { key: [value1, value2]}\n * @return {Array} An array of valid schema models, this can be used to reset\n * a schema properties collection for example.\n * @private\n */\n\n\nfunction cleanSchema(properties, values) {\n  return properties.filter(function (schema) {\n    return isValidSchemaProp(schema, values);\n  });\n}\n\nvar SchemaFormFactory = {\n  /**\n   * Creates the options hash for BaseForm.addInput from a prepared schema\n   * property.\n   *\n   * @param {Okta.Model} [preparedSchemaProp] A schema property backbone model\n   * that has been standardized by the prepareSchema method.\n   * @return {Object} An object containing all of the options needed by\n   * BaseForm's addInput()\n   */\n  createInputOptions: function (preparedSchemaProp) {\n    const custom = customOptions(preparedSchemaProp);\n    const standard = defaultOptions(preparedSchemaProp); // underscore did not support nested extend\n    // https://github.com/jashkenas/underscore/issues/162\n\n    if (custom.params && standard.params) {\n      custom.params = oktaUnderscore.defaults(custom.params, standard.params);\n    }\n\n    return oktaUnderscore.defaults(custom, standard);\n  },\n  hasValidSchemaProps: function (schemaProps, possibleValues) {\n    if (oktaUnderscore.isEmpty(schemaProps)) {\n      return false;\n    }\n\n    const validSchema = cleanSchema(schemaProps, possibleValues);\n    return !!validSchema.length;\n  },\n\n  /**\n   * This method is responsible for preparing a collection for the form\n   * factory to use by putting all of the information to create an input\n   * into the schema property and removing invalid properties.\n   * The typical UD form takes 3 models:\n   * The data model has the input values.\n   * The schema model describes which input to use, such as a textbox or a checkbox.\n   * The possible values model provide a list of default options to display, for example in a drop down menu.\n   *\n   * @param {SchemaProperty Collection} [schemaProps] A schema property backbone model.\n   * @param {Object} [possibleValues] An object of the form { key: [value1, value2]}\n   * @param {Okta.Model} [profile] A backbone model containing the property described by the schema property.\n   * @return {SchemaProperty Collection} A schema property collection with standardized models.\n   * The standard schema model adds a couple of additional private properties to\n   * allow the form factory to reference lookup values or name prefixes without going to a second model.\n   */\n  prepareSchema: function (schemaProps, possibleValues, profile) {\n    schemaProps.reset(cleanSchema(schemaProps, possibleValues));\n    return augmentSchemaProps(schemaProps, possibleValues, profile);\n  },\n\n  /**\n   * `prepareSchema` will reset the property list which may not be necessary at some case.\n   * like when setting default value for schema properties.\n   * (more detail about such case @see wiki UX, App+Entitlements+for+Provisioning)\n   *\n   * @param { }\n   * @return {String}\n   */\n  augmentSchemaProps: augmentSchemaProps,\n  augmentSchemaProp: augmentSchemaProp\n};\n\nexport { SchemaFormFactory as default };\n"],"names":["convertStringToNumber","string","number","StringUtil","parseFloat","getChoices","values","oktaUnderscore","object","isArray","type","indexOf","getObjectName","schemaProp","items","get","objectName","isValidSchemaProp","results","isEmpty","defaultOptions","property","name","title","inputOptions","label","input","TextBoxSet","params","itemType","format","BooleanSelect","to","options","readOnly","from","value","localize","Error","customOptions","prefix","errorField","isEnumType","configs","displayType","enumValues","getEnumValues","extend","EnumTypeHelper","getEnumInputOptions","augmentSchemaProp","possibleValues","profile","__nestedProperty__","defaultValues","userValues","set","fixedValues","union","length","augmentSchemaProps","schemaProps","each","cleanSchema","properties","filter","schema","SchemaFormFactory","createInputOptions","preparedSchemaProp","custom","standard","defaults","hasValidSchemaProps","validSchema","prepareSchema","reset"],"mappings":"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"}