{"version":3,"file":"BaseForm.js","sources":["../../../../../../../../../../packages/@okta/courage-dist/esm/src/courage/views/forms/BaseForm.js"],"sourcesContent":["import _Handlebars2 from '../../../../lib/handlebars/dist/cjs/handlebars.runtime.js';\nimport oktaJQueryStatic from '../../util/jquery-wrapper.js';\nimport oktaUnderscore from '../../util/underscore-wrapper.js';\nimport StringUtil from '../../util/StringUtil.js';\nimport BaseView from '../BaseView.js';\nimport ReadModeBar from './components/ReadModeBar.js';\nimport Toolbar from './components/Toolbar.js';\nimport ErrorBanner from './helpers/ErrorBanner.js';\nimport ErrorParser from './helpers/ErrorParser.js';\nimport FormUtil from './helpers/FormUtil.js';\nimport InputContainer from './helpers/InputContainer.js';\nimport InputFactory from './helpers/InputFactory.js';\nimport InputLabel from './helpers/InputLabel.js';\nimport InputWrapper from './helpers/InputWrapper.js';\nimport SettingsModel from '../../util/SettingsModel.js';\n\nconst template = _Handlebars2.template({\n  \"1\": function (container, depth0, helpers, partials, data) {\n    var helper,\n        lookupProperty = container.lookupProperty || function (parent, propertyName) {\n      if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n        return parent[propertyName];\n      }\n\n      return undefined;\n    };\n\n    return \"<h2 class=\\\"o-form-title-bar\\\" data-se=\\\"o-form-title-bar\\\">\" + container.escapeExpression((helper = (helper = lookupProperty(helpers, \"title\") || (depth0 != null ? lookupProperty(depth0, \"title\") : depth0)) != null ? helper : container.hooks.helperMissing, typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : container.nullContext || {}, {\n      \"name\": \"title\",\n      \"hash\": {},\n      \"data\": data,\n      \"loc\": {\n        \"start\": {\n          \"line\": 1,\n          \"column\": 75\n        },\n        \"end\": {\n          \"line\": 1,\n          \"column\": 84\n        }\n      }\n    }) : helper)) + \"</h2>\";\n  },\n  \"3\": function (container, depth0, helpers, partials, data) {\n    var stack1,\n        lookupProperty = container.lookupProperty || function (parent, propertyName) {\n      if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n        return parent[propertyName];\n      }\n\n      return undefined;\n    };\n\n    return (stack1 = lookupProperty(helpers, \"if\").call(depth0 != null ? depth0 : container.nullContext || {}, depth0 != null ? lookupProperty(depth0, \"title\") : depth0, {\n      \"name\": \"if\",\n      \"hash\": {},\n      \"fn\": container.program(4, data, 0),\n      \"inverse\": container.noop,\n      \"data\": data,\n      \"loc\": {\n        \"start\": {\n          \"line\": 1,\n          \"column\": 192\n        },\n        \"end\": {\n          \"line\": 1,\n          \"column\": 288\n        }\n      }\n    })) != null ? stack1 : \"\";\n  },\n  \"4\": function (container, depth0, helpers, partials, data) {\n    var helper,\n        lookupProperty = container.lookupProperty || function (parent, propertyName) {\n      if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n        return parent[propertyName];\n      }\n\n      return undefined;\n    };\n\n    return \"<h2 data-se=\\\"o-form-head\\\" class=\\\"okta-form-title o-form-head\\\">\" + container.escapeExpression((helper = (helper = lookupProperty(helpers, \"title\") || (depth0 != null ? lookupProperty(depth0, \"title\") : depth0)) != null ? helper : container.hooks.helperMissing, typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : container.nullContext || {}, {\n      \"name\": \"title\",\n      \"hash\": {},\n      \"data\": data,\n      \"loc\": {\n        \"start\": {\n          \"line\": 1,\n          \"column\": 267\n        },\n        \"end\": {\n          \"line\": 1,\n          \"column\": 276\n        }\n      }\n    }) : helper)) + \"</h2>\";\n  },\n  \"6\": function (container, depth0, helpers, partials, data) {\n    var helper,\n        lookupProperty = container.lookupProperty || function (parent, propertyName) {\n      if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n        return parent[propertyName];\n      }\n\n      return undefined;\n    };\n\n    return \"<p class=\\\"okta-form-subtitle o-form-explain\\\" data-se=\\\"o-form-explain\\\">\" + container.escapeExpression((helper = (helper = lookupProperty(helpers, \"subtitle\") || (depth0 != null ? lookupProperty(depth0, \"subtitle\") : depth0)) != null ? helper : container.hooks.helperMissing, typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : container.nullContext || {}, {\n      \"name\": \"subtitle\",\n      \"hash\": {},\n      \"data\": data,\n      \"loc\": {\n        \"start\": {\n          \"line\": 1,\n          \"column\": 385\n        },\n        \"end\": {\n          \"line\": 1,\n          \"column\": 397\n        }\n      }\n    }) : helper)) + \"</p>\";\n  },\n  \"compiler\": [8, \">= 4.3.0\"],\n  \"main\": function (container, depth0, helpers, partials, data) {\n    var stack1,\n        helper,\n        alias1 = depth0 != null ? depth0 : container.nullContext || {},\n        lookupProperty = container.lookupProperty || function (parent, propertyName) {\n      if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n        return parent[propertyName];\n      }\n\n      return undefined;\n    };\n\n    return ((stack1 = lookupProperty(helpers, \"if\").call(alias1, depth0 != null ? lookupProperty(depth0, \"hasReadMode\") : depth0, {\n      \"name\": \"if\",\n      \"hash\": {},\n      \"fn\": container.program(1, data, 0),\n      \"inverse\": container.noop,\n      \"data\": data,\n      \"loc\": {\n        \"start\": {\n          \"line\": 1,\n          \"column\": 0\n        },\n        \"end\": {\n          \"line\": 1,\n          \"column\": 96\n        }\n      }\n    })) != null ? stack1 : \"\") + \"<div data-se=\\\"o-form-content\\\" class=\\\"o-form-content \" + container.escapeExpression((helper = (helper = lookupProperty(helpers, \"layout\") || (depth0 != null ? lookupProperty(depth0, \"layout\") : depth0)) != null ? helper : container.hooks.helperMissing, typeof helper === \"function\" ? helper.call(alias1, {\n      \"name\": \"layout\",\n      \"hash\": {},\n      \"data\": data,\n      \"loc\": {\n        \"start\": {\n          \"line\": 1,\n          \"column\": 148\n        },\n        \"end\": {\n          \"line\": 1,\n          \"column\": 158\n        }\n      }\n    }) : helper)) + \" clearfix\\\">\" + ((stack1 = lookupProperty(helpers, \"unless\").call(alias1, depth0 != null ? lookupProperty(depth0, \"hasReadMode\") : depth0, {\n      \"name\": \"unless\",\n      \"hash\": {},\n      \"fn\": container.program(3, data, 0),\n      \"inverse\": container.noop,\n      \"data\": data,\n      \"loc\": {\n        \"start\": {\n          \"line\": 1,\n          \"column\": 169\n        },\n        \"end\": {\n          \"line\": 1,\n          \"column\": 299\n        }\n      }\n    })) != null ? stack1 : \"\") + ((stack1 = lookupProperty(helpers, \"if\").call(alias1, depth0 != null ? lookupProperty(depth0, \"subtitle\") : depth0, {\n      \"name\": \"if\",\n      \"hash\": {},\n      \"fn\": container.program(6, data, 0),\n      \"inverse\": container.noop,\n      \"data\": data,\n      \"loc\": {\n        \"start\": {\n          \"line\": 1,\n          \"column\": 299\n        },\n        \"end\": {\n          \"line\": 1,\n          \"column\": 408\n        }\n      }\n    })) != null ? stack1 : \"\") + \"<div class=\\\"o-form-error-container\\\" data-se=\\\"o-form-error-container\\\"></div><div class=\\\"o-form-fieldset-container\\\" data-se=\\\"o-form-fieldset-container\\\"></div></div>\";\n  },\n  \"useData\": true\n});\n\nconst sectionTitleTemplate = _Handlebars2.template({\n  \"compiler\": [8, \">= 4.3.0\"],\n  \"main\": function (container, depth0, helpers, partials, data) {\n    var helper,\n        lookupProperty = container.lookupProperty || function (parent, propertyName) {\n      if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n        return parent[propertyName];\n      }\n\n      return undefined;\n    };\n\n    return \"<h2 class=\\\"o-form-head\\\">\" + container.escapeExpression((helper = (helper = lookupProperty(helpers, \"title\") || (depth0 != null ? lookupProperty(depth0, \"title\") : depth0)) != null ? helper : container.hooks.helperMissing, typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : container.nullContext || {}, {\n      \"name\": \"title\",\n      \"hash\": {},\n      \"data\": data,\n      \"loc\": {\n        \"start\": {\n          \"line\": 1,\n          \"column\": 24\n        },\n        \"end\": {\n          \"line\": 1,\n          \"column\": 33\n        }\n      }\n    }) : helper)) + \"</h2>\";\n  },\n  \"useData\": true\n});\n\nconst pointerEventsSupported = oktaJQueryStatic('<div>').css({\n  'pointer-events': 'auto'\n})[0].style.pointerEvents === 'auto'; // polyfill for `pointer-events: none;` in IE < 11\n// Logic borrowed from https://github.com/kmewhort/pointer_events_polyfill (BSD)\n\nfunction pointerEventsPolyfill(e) {\n  if (!pointerEventsSupported && this.$el.hasClass('o-form-saving')) {\n    const $el = oktaJQueryStatic(e.currentTarget);\n    $el.css('display', 'none');\n    const underneathElem = document.elementFromPoint(e.clientX, e.clientY);\n    $el.css('display', 'block');\n    e.target = underneathElem;\n    oktaJQueryStatic(underneathElem).trigger(e);\n    return false;\n  }\n}\n\nconst events = {\n  submit: function (e) {\n    e.preventDefault();\n\n    this.__save();\n  }\n};\n\noktaUnderscore.each(['click', 'dblclick', 'mousedown', 'mouseup'], function (event) {\n  events[event + ' .o-form-input'] = pointerEventsPolyfill;\n});\n\nconst attributes = function (model) {\n  model || (model = {});\n  const collection = model && model.collection || {};\n  return {\n    method: 'POST',\n    action: oktaUnderscore.result(model, 'urlRoot') || oktaUnderscore.result(collection, 'url') || window.location.pathname,\n    'data-se': 'o-form',\n    slot: 'content'\n  };\n};\n\nconst convertSavingState = function (rawSavingStateEvent, defaultEvent) {\n  rawSavingStateEvent || (rawSavingStateEvent = '');\n  let savingStateEvent = [];\n\n  if (oktaUnderscore.isString(rawSavingStateEvent)) {\n    savingStateEvent = rawSavingStateEvent.split(' ');\n  }\n\n  savingStateEvent = oktaUnderscore.union(savingStateEvent, defaultEvent);\n  return savingStateEvent.join(' ');\n};\n\nconst getErrorSummary = function (responseJSON = {}) {\n  if (Array.isArray(responseJSON.errorCauses) && responseJSON.errorCauses.length > 0) {\n    //set errorSummary from first errorCause which is not field specific error\n    return responseJSON.errorCauses[0].errorSummary;\n  } else {\n    //set errorSummary from top level errorSummary\n    return responseJSON.errorSummary;\n  }\n};\n/**\n * A Form utility framework\n *\n * Okta.Form is a form that operates on one flat model\n * It exposes one main factory method, {@link module:Okta.Form#addInput|addInput}, which add inputs to the form,\n * and each input operates on one field in the model, identified by the `name` field.\n *\n * See:\n * [Basic O-Form Tutorial](https://github.com/okta/courage/wiki/Basic-O-Form)\n *\n * @class module:Okta.Form\n * @extends module:Okta.View\n * @param {Object} options options hash (See {@link module:Okta.View|View})\n * @param {Object} options.model the model this form operates on\n * @param {Boolean} [options.label-top=false] position label on top of inputs\n * @param {Boolean} [options.wide=false] Use a wide input layout for all input\n */\n\n/**\n * Fired when the \"Save\" button is clicked\n * @event module:Okta.Form#save\n * @param {module:Okta.Model} model Model used in the form\n */\n\n/**\n * Fired after the model is successfully saved - applies when {@link module:Okta.Form#autoSave|autoSave}\n * is set to true\n * @event module:Okta.Form#saved\n * @param {module:Okta.Model} model Model used in the form\n */\n\n/**\n * Fired when the model fires an invalid event or an error event;\n * @event module:Okta.Form#error\n * @param {module:Okta.Model} model Model used in the form\n */\n\n/**\n * Fired when the form layout is likely to be resized\n * @event module:Okta.Form#resize\n * @param {module:Okta.Model} model Model used in the form\n */\n\n/**\n * Fired when the \"Cancel\" button is clicked\n * @event module:Okta.Form#cancel\n */\n\n\nvar BaseForm = BaseView.extend(\n/** @lends module:Okta.Form.prototype */\n{\n  /**\n   * Specifies how to validate form:\n   * - In case \"local\" string provided as a value of the property,\n   * the form will validate only fields added as inputs to the form;\n   * - In case array is provided, the validation will be performed only for fields specified in array;\n   * - In case function is provided, provided function will be used as a validation function,\n   * it must return an error object with the format {fieldName: 'error text'} with as many fields as you need.\n   * @name validate\n   * @memberof module:Okta.Form\n   * @type {String|Array|Function}\n   * @instance\n   */\n  constructor: function (options) {\n    /* eslint max-statements: 0, complexity: 0 */\n    options || (options = {});\n    this.options = options;\n\n    if (options.settings) {\n      this.settings = options.settings;\n    } else {\n      this.settings = options.settings = new SettingsModel();\n    }\n\n    this.id = oktaUnderscore.uniqueId('form');\n    this.tagName = 'form';\n\n    oktaUnderscore.defaults(this.events, events);\n\n    oktaUnderscore.defaults(this.attributes, attributes(options.model));\n\n    this.__buttons = [];\n    this.__errorFields = {};\n\n    this.__saveModelState(options.model);\n\n    const step = oktaUnderscore.result(this, 'step');\n\n    if (step) {\n      // checking exists of `this.save` hence don't have to change to\n      // `_.result(this, 'save')` which will execute the function and\n      // is not the intent.\n      if (!this.save) {\n        const totalStep = oktaUnderscore.result(this, 'totalSteps');\n\n        this.save = !totalStep || step === totalStep ? StringUtil.localize('oform.button.finish', 'courage') : StringUtil.localize('oform.button.next', 'courage');\n      }\n\n      this.className = oktaUnderscore.result(this, 'className') + ' wizard';\n    }\n\n    this.className = oktaUnderscore.result(this, 'className') + ' o-form';\n    this.__toolbar = this.__createToolbar(options);\n    BaseView.call(this, options);\n\n    oktaUnderscore.each(oktaUnderscore.result(this, 'inputs') || [], function (input) {\n      // to ingore extra argumests from `each` iteratee function\n      // http://underscorejs.org/#each\n      this.__addLayoutItem(input);\n    }, this);\n\n    this.add(this.__toolbar, ''); // NOTES: this.model shall be initialized after calling\n    // super (BaseView.call(this, options)) above.\n    //\n\n    this.listenTo(this.model, 'change:__edit__', this.__applyMode);\n    this.listenTo(this.model, 'invalid error', oktaUnderscore.throttle(function (model, resp, showBanner) {\n      this.__showErrors(model, resp, showBanner !== false);\n    }, 100, {\n      trailing: false\n    }));\n    this.listenTo(this.model, 'form:resize', function () {\n      this.trigger('resize');\n    });\n    this.listenTo(this.model, 'form:cancel', oktaUnderscore.throttle(this.__cancel, 100, {\n      trailing: false\n    }));\n    this.listenTo(this.model, 'form:previous', oktaUnderscore.throttle(this.__previous, 100, {\n      trailing: false\n    }));\n    this.__save = oktaUnderscore.throttle(this.__save, 200, {\n      trailing: false\n    });\n    this.listenTo(this.model, 'form:save', function () {\n      this.$el.submit();\n    });\n    this.listenTo(this.model, 'sync', function () {\n      if (this.model.get('__edit__')) {\n        this.model.set('__edit__', false, {\n          silent: true\n        });\n      }\n\n      this.__saveModelState(this.model);\n\n      this.render();\n    });\n    let hasSavingState = this.getAttribute('hasSavingState');\n\n    if (this.getAttribute('autoSave')) {\n      this.listenTo(this, 'save', function (model) {\n        const xhr = model.save();\n\n        if (xhr && xhr.done) {\n          xhr.done(() => {\n            this.trigger('saved', model);\n          });\n        }\n      });\n\n      if (oktaUnderscore.isUndefined(hasSavingState)) {\n        hasSavingState = true;\n      }\n    }\n    /*\n    * Attach model event listeners\n    * by default, model's request event starts the form saving state,\n    * error and sync event stops it\n    * you can define customized saving start and stop state, like\n    * customSavingState: {start: 'requestingAdditionalInfo', stop: 'retrievedAdditionalInfo'}\n    * doing this does not override the default events\n    */\n\n\n    if (hasSavingState) {\n      const customSavingState = this.getAttribute('customSavingState', {});\n      this.listenTo(this.model, convertSavingState(customSavingState.start || '', ['request']), this.__setSavingState);\n      this.listenTo(this.model, convertSavingState(customSavingState.stop || '', ['error', 'sync']), this.__clearSavingState);\n    }\n  },\n\n  /**\n   * Create the bottom button bar\n   * @param  {Object} options options h\n   * @return {Okta.View} The toolbar\n   * @private\n   */\n  __createToolbar: function (options) {\n    const danger = this.getAttribute('danger');\n    const saveBtnClassName = danger === true ? 'button-error' : 'button-primary';\n\n    const step = oktaUnderscore.result(this, 'step');\n\n    const toolbar = new Toolbar(oktaUnderscore.extend({\n      save: this.save || StringUtil.localize('oform.save', 'courage'),\n      saveId: this.saveId,\n      saveClassName: saveBtnClassName,\n      cancel: this.cancel || StringUtil.localize('oform.cancel', 'courage'),\n      noCancelButton: this.noCancelButton || false,\n      noSubmitButton: this.noSubmitButton || false,\n      buttonOrder: this.buttonOrder,\n      hasPrevStep: step && step > 1\n    }, options || this.options));\n\n    oktaUnderscore.each(this.__buttons, function (args) {\n      toolbar.addButton.apply(toolbar, args);\n    });\n\n    return toolbar;\n  },\n  className: '',\n  attributes: {},\n  events: {},\n\n  /**\n   * An array of input configurations to render in the form\n   * @type {Array}\n   */\n  inputs: [],\n  template: null,\n\n  /**\n   * Does the form support read/edit toggle.\n   * @type {Boolean|Function}\n   * @default false\n   */\n  read: false,\n\n  /**\n   * Is the form in readOnly mode.\n   * @type {Boolean|Function}\n   * @default false\n   */\n  readOnly: false,\n\n  /**\n   * Should we not render the button bar\n   * @type {Boolean|Function}\n   * @default false\n   */\n  noButtonBar: false,\n\n  /**\n   * Should we not render a cancel button\n   * @type {Boolean|Function}\n   * @default false\n   */\n  noCancelButton: false,\n\n  /**\n   * Should we not render a save button\n   * @type {Boolean}\n   * @default false\n   */\n  noSubmitButton: false,\n\n  /**\n   * Set the order of the save, cancel and previous buttons (left to right).\n   * @type {Array.<string>}\n   * @default ['previous', 'save', 'cancel']\n   */\n  buttonOrder: ['previous', 'save', 'cancel'],\n\n  /**\n   * The text on the save button\n   * @type {String}\n   * @default \"Save\"\n   */\n  save: null,\n\n  /**\n   * The text on the cancel button\n   * @type {String}\n   * @default \"Cancel\"\n   */\n  cancel: null,\n\n  /**\n   * To use button-error to style the submit button instead of button-primary.\n   * @type {Boolean|Function}\n   * @default false\n   */\n  danger: false,\n\n  /**\n   * A layout CSS class to add to the form\n   * @type {String|Function}\n   * @default \"\"\n   */\n  layout: '',\n\n  /**\n   * The step this form is in the context of a wizard\n   * @type {Number}\n   */\n  step: undefined,\n\n  /**\n   * The total numbers of steps the wizard this form is a part of has\n   * @type {Number}\n   */\n  totalSteps: undefined,\n\n  /**\n   * The form's title\n   * @type {String|Function}\n   */\n  title: null,\n\n  /**\n   * The form's subtitle\n   * @type {String|Function}\n   */\n  subtitle: null,\n\n  /**\n   * Auto-save the model when hitting save. Triggers a `saved` event when done\n   * @type {Boolean}\n   * @default false\n   */\n  autoSave: false,\n\n  /**\n   * Scroll to the top of the form on error\n   * @type {Boolean|Function}\n   * @default true\n   */\n  scrollOnError: true,\n\n  /**\n   * Show the error banner upon error\n   * @type {Boolean|Function}\n   * @default true\n   */\n  showErrors: true,\n\n  /**\n   * The form's scrollable area\n   * @type {String}\n   * @default \".o-form-content\"\n   */\n  resizeSelector: '.o-form-content',\n\n  /**\n   * Sets whether or not the form shows the saving state when\n   * the model is saved.  Has no effect on setSavingState and clearSavingState as those are manual calls\n   * to trigger/clear the saving state.\n   * @name hasSavingState\n   * @memberof module:Okta.Form\n   * @type {Boolean}\n   * @default false\n   * @instance\n   */\n\n  /**\n   * Get an attribute value from options or instance.\n   * Prefer options value over instance value\n   * @param  {String} name Name of the attribute\n   * @param  {Object} defaultValue the default value to return if the attribute is not found\n   * @return {Object} The value\n   */\n  getAttribute: function (name, defaultValue) {\n    let value = oktaUnderscore.resultCtx(this.options, name, this);\n\n    if (oktaUnderscore.isUndefined(value)) {\n      value = oktaUnderscore.result(this, name);\n    }\n\n    return !oktaUnderscore.isUndefined(value) ? value : defaultValue;\n  },\n\n  /**\n   * Does this form have a \"read\" mode\n   * @return {Boolean}\n   */\n  hasReadMode: function () {\n    return !!this.getAttribute('read');\n  },\n\n  /**\n   * Is this form in \"read only\" mode\n   * @return {Boolean}\n   */\n  isReadOnly: function () {\n    return !!this.getAttribute('readOnly');\n  },\n\n  /**\n   * Does this form have a button bar\n   * @return {Boolean}\n   */\n  hasButtonBar: function () {\n    return !(this.getAttribute('noButtonBar') || this.isReadOnly());\n  },\n  render: function () {\n    this.__readModeBar && this.__readModeBar.remove();\n\n    if (this.hasReadMode() && !this.isReadOnly()) {\n      const readModeBar = ReadModeBar.extend({\n        formTitle: this.getAttribute('title', '')\n      });\n      this.__readModeBar = this.add(readModeBar, '.o-form-title-bar').last();\n    }\n\n    const html = template({\n      layout: this.getAttribute('layout', ''),\n      title: this.getAttribute('title', '', true),\n      subtitle: this.getAttribute('subtitle', '', true),\n      hasReadMode: this.hasReadMode()\n    });\n    this.$el.html(html);\n    delete this.template;\n    BaseView.prototype.render.apply(this, arguments);\n\n    this.__applyMode();\n\n    return this;\n  },\n\n  /**\n   * Changes form UI to indicate saving.  Disables all inputs and buttons.  Use this function if you have set\n   * hasSavingState to false on the the form\n   * @private\n   */\n  __setSavingState: function () {\n    this.model.trigger('form:set-saving-state');\n    this.$el.addClass('o-form-saving');\n  },\n\n  /**\n   * Changes form UI back to normal from the saving state.  Use this function if you are have set hasSavingState\n   * to false on the form\n   * @private\n   */\n  __clearSavingState: function () {\n    this.model.trigger('form:clear-saving-state');\n    this.$el.removeClass('o-form-saving');\n  },\n\n  /**\n   * Toggles the visibility of the bottom button bar\n   * @private\n   */\n  __toggleToolbar: function () {\n    this.__toolbar && this.__toolbar.remove();\n\n    if (this.hasButtonBar() && this._editMode()) {\n      this.__toolbar = this.__createToolbar();\n      this.add(this.__toolbar, '');\n    }\n\n    this.trigger('resize');\n  },\n\n  /**\n   * Cancels this form\n   * - Reset the model to the previous state\n   * - Clears all errors\n   * - Triggers a `cancel` event\n   * - Sets the model to read mode (if applicable)\n   * @private\n   * @fires cancel\n   */\n  __cancel: function () {\n    const edit = this.model.get('__edit__');\n    /* eslint max-statements: [2, 12] */\n\n    this.model.clear({\n      silent: true\n    });\n    let data;\n\n    if (this.model.sanitizeAttributes) {\n      data = this.model.sanitizeAttributes(this.__originalModel);\n    } else {\n      data = oktaUnderscore.clone(this.__originalModel);\n    }\n\n    this.model.set(data, {\n      silent: true\n    });\n    this.trigger('cancel', this.model);\n    this.model.trigger('cache:clear');\n\n    if (edit) {\n      this.model.set('__edit__', false, {\n        silent: true\n      });\n      this.model.trigger('change:__edit__', this.model, false);\n    }\n\n    this.clearErrors();\n  },\n\n  /**\n   * Runs {@link module:Okta.Form#validate|validate} to check the model state.\n   * Triggers an \"invalid\" event on the model if validation fails\n   * @returns {Boolean}\n   */\n  isValid: function () {\n    let res;\n    const self = this;\n\n    function validateArray(arr) {\n      return oktaUnderscore.reduce(arr, function (memo, fieldName) {\n        return oktaUnderscore.extend(memo, self.model.validateField(fieldName));\n      }, {});\n    }\n\n    if (oktaUnderscore.isUndefined(this.validate)) {\n      return this.model.isValid();\n    } else if (oktaUnderscore.isFunction(this.validate)) {\n      res = this.validate();\n    } else if (oktaUnderscore.isArray(this.validate)) {\n      res = validateArray(this.validate);\n    } else if (this.validate === 'local') {\n      res = validateArray(this.getInputs().map(function (input) {\n        return input.options.name;\n      }));\n    }\n\n    if (!oktaUnderscore.isEmpty(res)) {\n      this.model.trigger('invalid', this.model, res);\n      return false;\n    } else {\n      return true;\n    }\n  },\n\n  /**\n   * A throttled function that saves the form not more than once every 100 ms\n   * Basically all this method does is trigger a `save` event\n   * @fires save\n   * @private\n   */\n  __save: function () {\n    this.clearErrors();\n\n    if (this.isValid()) {\n      this.trigger('save', this.model);\n    }\n  },\n\n  /**\n   * In the context of a wizard, go to previous state\n   * Technically all this method does is trigger a `previous` event\n   * @param  {Event} e\n   * @private\n   */\n  __previous: function () {\n    this.trigger('previous', this.model);\n  },\n\n  /**\n   * Renders the form in the correct mode based on the model.\n   * @private\n   */\n  __applyMode: function () {\n    this.clearErrors();\n\n    this.__toggleToolbar();\n\n    if (this._editMode()) {\n      this.$el.addClass('o-form-edit-mode');\n      this.$el.removeClass('o-form-read-mode');\n      this.$('.o-form-content').removeClass('rounded-btm-4');\n      this.focus();\n    } else {\n      this.$el.removeClass('o-form-edit-mode');\n      this.$el.addClass('o-form-read-mode');\n      this.$('.o-form-content').addClass('rounded-btm-4');\n    }\n  },\n\n  /**\n   * Is the form in edit mode\n   * @return {Boolean}\n   * @private\n   */\n  _editMode: function () {\n    return this.model.get('__edit__') || !this.hasReadMode();\n  },\n\n  /**\n   * Function can be overridden to alter top level error summary.\n   * @param {Object} responseJSON\n   *\n   * @example\n   * // responseJSON object\n   * {\n   *  errorCauses: [{errorSummary: \"At least one of Proxy Status, Location, or ASN should be configured.\"}]\n   *  errorSummary: \"At least one of Proxy Status, Location, or ASN should be configured.\"\n   *  errorCode: \"E0000001\"\n   *  errorId: \"oaepsrTCHrhT-eIi8XTm6KWWg\"\n   *  errorLink: \"E0000001\"\n   *  errorSummary: \"Api validation failed: networkZone\"\n   * }\n   *\n   * @method\n   * @default _.identity\n   */\n  parseErrorMessage: oktaUnderscore.identity,\n  _handleErrorScroll: function () {\n    if (!this.getAttribute('scrollOnError')) {\n      return;\n    }\n\n    const $el = oktaJQueryStatic('#' + this.id + ' .o-form-error-container');\n\n    if ($el.length) {\n      let $scrollContext = $el.scrollParent();\n      let scrollTop; // scrollParent was almost awesome...\n      // but it returns document if there are no other scrollable parents\n      // document does not have offset, so here we have to replace with html, body\n      // Additionally when the scroll context is html, body, $el.offset().top is fixed\n      // versus when it has a different scroll context it's dynamic and requires the\n      // calculation below.\n\n      if ($scrollContext[0] === document) {\n        $scrollContext = oktaJQueryStatic('html, body');\n        scrollTop = $el.offset().top;\n      } else {\n        scrollTop = $scrollContext.scrollTop() + $el.offset().top - $scrollContext.offset().top;\n      }\n\n      $scrollContext.animate({\n        scrollTop: scrollTop\n      }, 400);\n    }\n  },\n\n  /**\n   * Show an error message based on an XHR error\n   * @param  {Okta.BaseModel} model the model\n   * @param  {jqXHR} xhr The jQuery XmlHttpRequest Object\n   * @private\n   */\n  __showErrors: function (model, resp, showBanner) {\n    this.trigger('error', model);\n    /* eslint max-statements: 0 */\n\n    if (!this.getAttribute('showErrors')) {\n      return;\n    }\n\n    let errorSummary;\n    let responseJSON = ErrorParser.getResponseJSON(resp);\n    const validationErrors = ErrorParser.parseFieldErrors(resp); // trigger events for field validation errors\n\n    if (oktaUnderscore.size(validationErrors)) {\n      oktaUnderscore.each(validationErrors, function (errors, field) {\n        this.model.trigger('form:field-error', this.__errorFields[field] || field, oktaUnderscore.map(errors, function (error) {\n          return /^model\\.validation/.test(error) ? StringUtil.localize(error, 'courage') : error;\n        }));\n      }, this);\n    } else {\n      responseJSON = this.parseErrorMessage(responseJSON);\n      errorSummary = getErrorSummary(responseJSON);\n    } // show the error message\n\n\n    if (showBanner) {\n      this.$('.o-form-error-container').addClass('o-form-has-errors');\n      this.add(ErrorBanner, '.o-form-error-container', {\n        options: {\n          errorSummary: errorSummary\n        }\n      });\n    } // slide to and focus on the error message\n\n\n    this._handleErrorScroll();\n\n    this.model.trigger('form:resize');\n  },\n\n  /**\n   * Clears the error banner\n   * @private\n   */\n  clearErrors: function () {\n    this.$('.o-form-error-container').removeClass('o-form-has-errors');\n    this.model.trigger('form:clear-errors');\n    this.model.trigger('form:resize');\n  },\n\n  /**\n   * Toggles between edit and read mode\n   */\n  toggle: function () {\n    this.model.set('__edit__', !this.hasReadMode() || !this.model.get('__edit__'));\n    return this;\n  },\n  __addLayoutItem: function (input) {\n    if (InputFactory.supports(input)) {\n      this.addInput(input);\n    } else {\n      this.__addNonInputLayoutItem(input);\n    }\n  },\n  __addNonInputLayoutItem: function (item) {\n    const itemOptions = oktaUnderscore.omit(item, 'type');\n\n    switch (item.type) {\n      case 'sectionTitle':\n        this.addSectionTitle(item.title, oktaUnderscore.omit(itemOptions, 'title'));\n        break;\n\n      case 'divider':\n        this.addDivider(itemOptions);\n        break;\n\n      default:\n        throw new Error('unknown input: ' + item.type);\n    }\n  },\n\n  /**\n   * Adds a view to the buttons tool bar\n   * @param {Object} params parameterized button options\n   * @param {Object} options options to send to {@link module:Okta.View#add|View.add}\n   */\n  addButton: function (params, options) {\n    this.__toolbar && this.__toolbar.addButton(params, options);\n\n    this.__buttons.push([params, options]);\n  },\n\n  /**\n   * Adds a divider\n   */\n  addDivider: function (options) {\n    this.add('<div class=\"okta-form-divider form-divider\"></div>');\n    FormUtil.applyShowWhen(this.last(), options && options.showWhen);\n    FormUtil.applyToggleWhen(this.last(), options && options.toggleWhen);\n    return this;\n  },\n\n  /**\n   * Adds section header\n   * @param {String} title\n   */\n  addSectionTitle: function (title, options) {\n    this.add(sectionTitleTemplate({\n      title: title\n    }));\n    FormUtil.applyShowWhen(this.last(), options && options.showWhen);\n    FormUtil.applyToggleWhen(this.last(), options && options.toggleWhen);\n    return this;\n  },\n\n  /**\n   * Add a form input\n   * @param {Object} options Options to describe the input\n   * @param {String} options.type The input type.\n   * The options are: `text`, `textarea`, `select`, `checkbox`, `radio`, `switch`,\n   * `password`, `number`, `textselect`, `date`, `grouppicker`, `admingrouppicker`, `su-orgspicker`\n   * `file/image`, `file/cert`, `checkboxset`, `list`, `group`, `zonepicker`\n   * @param {String} options.name The name of the model field this input mutates\n   * @param {String|Function} [options.label]\n   * The input label text.\n   * When passed as a function, will invoke the function (in the context of the {@link InputLabel})\n   * on render time, and use the returned value.\n   * @param {String} [options.sublabel] The input sub label text\n   * @param {String} [options.tooltip] A popover tooltip to be displayed next to the label\n   * @param {String} [options.placeholder] Placeholder text.\n   * @param {String} [options.explain] Explanation text to render below the input\n   * @param {Okta.View} [options.customExplain] A custom view to render below the input (deprecated)\n   * @param {Boolean} [options.disabled=false] Make this input disabled\n   * @param {Boolean} [options.wide=false] Use a wide input layout\n   * @param {Boolean} [options.label-top=false] position label on top of an input\n   * @param {Boolean} [options.explain-top=false] position explain on top of an input (requires label-top=true)\n   * @param {Number} [options.multi] have multiple in-line inputs. useful when `input` is passed as an array of inputs\n   * @param {String} [options.errorField] The API error field here that maps to this input\n   * @param {Boolean} [options.inlineValidation=true] Validate input on focusout\n   * @param {String} [options.ariaLabel] Used to add aria-label attribute to the input when label is not present.\n   * @param {Boolean} [options.group=false] Grouping set of inputs using fieldset and legend. Mainly for radio\n   * @param {Object} [options.options]\n   * In the context of `radio` and `select`, a key/value set of options\n   *\n   * @param {Object} [options.params]\n   * Widget specific parameters. Varies per input.\n   *\n   * @param {BaseInput|Object[]} [options.input]\n   * - A custom input \"class\" or instance - preferably a **class**, so we can automagically assign the right\n   * parameters when initializing it\n   * - An array of input definition object literals (such as this one)\n   *\n   * @param {Object} [options.showWhen]\n   * Setting to define when to show (or hide) the input. The input is visible by default.\n   *\n   * @param {Object} [options.bindings]\n   * Bind a certain model attribute to a callback function, so the function is being called on render,\n   * and any time this model field changes.\n   * This is similar to `showWhen` but is not limited to toggling.\n   *\n   * @param {Function} [options.render]\n   * A post-render hook that will run upon render on InputWrapper\n   *\n   * @param {String|Function} className   A className to apply on the {@link InputWrapper}\n   *\n   * @param {Function} [options.initialize]\n   * An `initialize` function to run when initializing the {@link InputWrapper}\n   * Useful for state mutation on start time, and complex state logic\n   *\n   * @example\n   * // showhen: the field will be visible when `advanced` is set to `true`\n   * // and `mode` is set to `\"ON\"`.\n   * showWhen: {\n   *   'advanced': true,\n   *   'mode': function (value) {\n   *     return value == 'ON'; // this is identical to this.model.get('mode') == 'ON'\n   *   }\n   * }\n   *\n   * @example\n   * // bindings\n   * bindings: {\n   *   'status mode': function (status, mode) {\n   *      var labelView = this.getLabel();\n   *      if (status == 1) {\n   *        labelView.options.label = 'Something';\n   *      }\n   *      else {\n   *        labelView.options.label = mode;\n   *      }\n   *      labelView.render();\n   *   }\n   * }\n   */\n  addInput: function (_options) {\n    _options = oktaUnderscore.clone(_options);\n    FormUtil.validateInput(_options, this.model);\n    const inputsOptions = FormUtil.generateInputOptions(_options, this, this.__createInput).reverse(); // We need a local variable here to keep track\n    // as addInput can be called either directy or through the inputs array.\n\n    if (oktaUnderscore.isEmpty(this.getInputs().toArray())) {\n      oktaUnderscore.extend(inputsOptions[0], {\n        validateOnlyIfDirty: true\n      });\n    }\n\n    const inputs = oktaUnderscore.map(inputsOptions, this.__createInput, this);\n\n    oktaUnderscore.each(inputsOptions, function (input) {\n      if (input.errorField) {\n        this.__errorFields[input.errorField] = input.name;\n      }\n    }, this);\n\n    const options = {\n      inputId: oktaUnderscore.last(inputs).options.inputId,\n      input: inputs,\n      multi: inputsOptions.length > 1 ? inputsOptions.length : undefined\n    };\n\n    oktaUnderscore.extend(options, oktaUnderscore.omit(this.options, 'input'), oktaUnderscore.omit(_options, 'input'));\n\n    const inputWrapper = this.__createWrapper(options);\n\n    if (options.label !== false) {\n      inputWrapper.add(this.__createLabel(options));\n    }\n\n    inputWrapper.add(this._createContainer(options)); // TODO: there may be a bug here.\n    // options.input will always be an array, so options.input.type will always be undefined\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    /// @ts-ignore\n\n    inputWrapper.type = options.type || options.input.type || 'custom';\n    const args = [inputWrapper].concat(oktaUnderscore.rest(arguments));\n    return this.add.apply(this, args);\n  },\n\n  /**\n   * @private\n   */\n  __createInput: function (options) {\n    options = oktaUnderscore.pick(options, FormUtil.INPUT_OPTIONS);\n    return InputFactory.create(options);\n  },\n\n  /**\n   * @private\n   */\n  __createWrapper: function (options) {\n    options = oktaUnderscore.pick(options, FormUtil.WRAPPER_OPTIONS);\n    return new InputWrapper(options);\n  },\n\n  /**\n   * @private\n   */\n  __createLabel: function (options) {\n    options = oktaUnderscore.pick(options, FormUtil.LABEL_OPTIONS);\n    return new InputLabel(options);\n  },\n\n  /**\n   * @private\n   */\n  _createContainer: function (options) {\n    options = oktaUnderscore.pick(options, FormUtil.CONTAINER_OPTIONS);\n    return new InputContainer(options);\n  },\n\n  /**\n   * Stores the current attributes of the model to a private property\n   * @param  {Okta.BaseModel} model The model\n   * @private\n   */\n  __saveModelState: function (model) {\n    this.__originalModel = oktaJQueryStatic.extend(true, {}, model.attributes);\n  },\n\n  /**\n   * @override\n   * @ignore\n   */\n  add: function (...args) {\n    // sets a default element selector\n    typeof args[1] === 'undefined' && (args[1] = '> div.o-form-content > .o-form-fieldset-container');\n    return BaseView.prototype.add.apply(this, args);\n  },\n\n  /**\n   * Set the focus on the first input in the form\n   */\n  focus: function () {\n    const first = this.getInputs().first();\n\n    if (first && first.focus) {\n      first.focus();\n    }\n\n    return this;\n  },\n\n  /**\n   * Disable all inputs in the form\n   * @deprecated not currently in use\n   */\n  disable: function () {\n    this.invoke('disable');\n    return this;\n  },\n\n  /**\n   * Enable all inputs in the form\n   * @deprecated not currently in use\n   */\n  enable: function () {\n    this.invoke('enable');\n  },\n\n  /**\n   * Set the max-height for o-form-content class container within the form if a height is provided,\n   * otherwise, get its computed inner height\n   * @param {Number} the height in pixel to set for class o-form-content\n   * @return {Number}\n   */\n  contentHeight: function (height) {\n    const content = this.$('.o-form-content');\n\n    if (oktaUnderscore.isNumber(height)) {\n      content.css('max-height', height);\n    } else {\n      return content.height();\n    }\n  },\n\n  /**\n   * Get only the input children\n   * @return {InputWrapper[]} An underscore wrapped array of {@link InputWrapper} instances\n   */\n  getInputs: function () {\n    return oktaUnderscore(this.filter(function (view) {\n      return view instanceof InputWrapper;\n    }));\n  }\n});\n\nexport { BaseForm as default };\n"],"names":["template","_Handlebars2","container","depth0","helpers","partials","data","helper","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","undefined","escapeExpression","hooks","helperMissing","nullContext","stack1","program","noop","alias1","sectionTitleTemplate","pointerEventsSupported","oktaJQueryStatic","css","style","pointerEvents","pointerEventsPolyfill","e","$el","hasClass","currentTarget","underneathElem","document","elementFromPoint","clientX","clientY","target","trigger","events","submit","preventDefault","__save","oktaUnderscore","each","event","attributes","model","collection","method","action","result","window","location","pathname","slot","convertSavingState","rawSavingStateEvent","defaultEvent","savingStateEvent","isString","split","union","join","getErrorSummary","responseJSON","Array","isArray","errorCauses","length","errorSummary","BaseForm","BaseView","extend","constructor","options","settings","SettingsModel","id","uniqueId","tagName","defaults","__buttons","__errorFields","__saveModelState","step","save","totalStep","StringUtil","localize","className","__toolbar","__createToolbar","input","__addLayoutItem","add","listenTo","__applyMode","throttle","resp","showBanner","__showErrors","trailing","__cancel","__previous","get","set","silent","render","hasSavingState","getAttribute","xhr","done","isUndefined","customSavingState","start","__setSavingState","stop","__clearSavingState","danger","saveBtnClassName","toolbar","Toolbar","saveId","saveClassName","cancel","noCancelButton","noSubmitButton","buttonOrder","hasPrevStep","args","addButton","apply","inputs","read","readOnly","noButtonBar","layout","totalSteps","title","subtitle","autoSave","scrollOnError","showErrors","resizeSelector","name","defaultValue","value","resultCtx","hasReadMode","isReadOnly","hasButtonBar","__readModeBar","remove","readModeBar","ReadModeBar","formTitle","last","html","arguments","addClass","removeClass","__toggleToolbar","_editMode","edit","clear","sanitizeAttributes","__originalModel","clone","clearErrors","isValid","res","self","validateArray","arr","reduce","memo","fieldName","validateField","validate","isFunction","getInputs","map","isEmpty","$","focus","parseErrorMessage","identity","_handleErrorScroll","$scrollContext","scrollParent","scrollTop","offset","top","animate","ErrorParser","getResponseJSON","validationErrors","parseFieldErrors","size","errors","field","error","test","ErrorBanner","toggle","InputFactory","supports","addInput","__addNonInputLayoutItem","item","itemOptions","omit","type","addSectionTitle","addDivider","Error","params","push","FormUtil","applyShowWhen","showWhen","applyToggleWhen","toggleWhen","_options","validateInput","inputsOptions","generateInputOptions","__createInput","reverse","toArray","validateOnlyIfDirty","errorField","inputId","multi","inputWrapper","__createWrapper","label","__createLabel","_createContainer","concat","rest","pick","INPUT_OPTIONS","create","WRAPPER_OPTIONS","InputWrapper","LABEL_OPTIONS","InputLabel","CONTAINER_OPTIONS","InputContainer","first","disable","invoke","enable","contentHeight","height","content","isNumber","filter","view"],"mappings":"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"}