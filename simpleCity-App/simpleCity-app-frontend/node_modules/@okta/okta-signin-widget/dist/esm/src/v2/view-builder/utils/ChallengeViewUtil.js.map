{"version":3,"file":"ChallengeViewUtil.js","sources":["../../../../../../src/v2/view-builder/utils/ChallengeViewUtil.js"],"sourcesContent":["/*!\n * Copyright (c) 2020, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport { loc, View, createButton, _ } from '@okta/courage';\nimport hbs from '@okta/handlebars-inline-precompile';\nimport Enums from 'util/Enums';\nimport Util from 'util/Util';\nimport {\n  FASTPASS_FALLBACK_SPINNER_TIMEOUT,\n  IDENTIFIER_FLOW,\n  LOOPBACK_RESPONSE_STATUS_CODE,\n  OV_UV_ENABLE_BIOMETRICS_FASTPASS_DESKTOP, \n  OV_UV_ENABLE_BIOMETRICS_FASTPASS_MOBILE,\n  REQUEST_PARAM_AUTHENTICATION_CANCEL_REASON,\n} from '../utils/Constants';\n\nexport function appendLoginHint(deviceChallengeUrl, loginHint) {\n  if (deviceChallengeUrl && loginHint) {\n    deviceChallengeUrl += '&login_hint=' + loginHint;\n  }\n\n  return deviceChallengeUrl;\n}\n\nexport function doChallenge(view, fromView) {\n  const deviceChallenge = view.getDeviceChallengePayload();\n  const loginHint = view.options?.settings?.get('identifier');\n  const HIDE_CLASS = 'hide';\n  switch (deviceChallenge.challengeMethod) {\n  case Enums.LOOPBACK_CHALLENGE:\n    view.title = loc('deviceTrust.sso.redirectText', 'login');\n    view.add(View.extend({\n      className: 'loopback-content',\n      template: hbs`<div class=\"spinner\"></div>`\n    }));\n    view.doLoopback(deviceChallenge);\n    break;\n  case Enums.CUSTOM_URI_CHALLENGE:\n    view.title = loc('customUri.title', 'login');\n    view.add(View.extend({\n      className: 'skinny-content',\n      template: hbs`\n            <p>\n              {{i18n code=\"customUri.required.content.prompt\" bundle=\"login\"}}\n            </p>\n          `,\n    }));\n    view.add(createButton({\n      className: 'ul-button button button-wide button-primary',\n      title: loc('oktaVerify.open.button', 'login'),\n      id: 'launch-ov',\n      click: () => {\n        view.doCustomURI();\n      }\n    }));\n    view.add(View.extend({\n      className: 'skinny-content',\n      template: hbs`\n          <p>\n            {{i18n code=\"customUri.required.content.download.title\" bundle=\"login\"}}\n          </p>\n          <p>\n            <a href=\"{{downloadOVLink}}\" target=\"_blank\" id=\"download-ov\" class=\"link\">\n              {{i18n code=\"customUri.required.content.download.linkText\" bundle=\"login\"}}\n            </a>\n          </p>\n          `,\n      getTemplateData() {\n        return {\n          downloadOVLink: deviceChallenge.downloadHref\n        };\n      },\n    }));\n    view.customURI = appendLoginHint(deviceChallenge.href, loginHint);\n    view.doCustomURI();\n    break;\n  case Enums.UNIVERSAL_LINK_CHALLENGE:\n    view.title = loc('universalLink.title', 'login');\n    view.add(View.extend({\n      className: 'universal-link-content',\n      template: hbs`\n            <div class=\"spinner\"></div>\n            {{i18n code=\"universalLink.content\" bundle=\"login\"}}\n          `\n    }));\n    view.add(createButton({\n      className: 'ul-button button button-wide button-primary',\n      title: loc('oktaVerify.open.button', 'login'),\n      click: () => {\n        // only window.location.href can open universal link in iOS/MacOS\n        // other methods won't do, ex, AJAX get or form get (Util.redirectWithFormGet)\n        let deviceChallengeUrl = appendLoginHint(deviceChallenge.href, loginHint);\n        Util.redirect(deviceChallengeUrl);\n      }\n    }));\n    break;\n  case Enums.APP_LINK_CHALLENGE:\n    view.title = loc('appLink.title', 'login');\n    view.add(View.extend({\n      className: 'app-link-content',\n      template: hbs`\n        <div class=\"spinner {{hideClass}}\"></div>\n        <div class=\"appLinkContent {{hideClass}}\">{{i18n code=\"appLink.content\" bundle=\"login\"}}</div>\n      `,\n      getTemplateData() {\n        return { hideClass: HIDE_CLASS };\n      },\n      postRender() {\n        if (fromView === IDENTIFIER_FLOW) {\n          this.$('.spinner').removeClass(HIDE_CLASS);\n          setTimeout(_.bind(()=> {\n            const data = { label: loc('goback', 'login') };\n            this.options.appState.trigger('updateFooterLink', data);\n            this.$('.spinner').addClass(HIDE_CLASS);\n            this.$('.appLinkContent').removeClass(HIDE_CLASS);\n          }, this), FASTPASS_FALLBACK_SPINNER_TIMEOUT);\n        } else {\n          this.$('.appLinkContent').removeClass(HIDE_CLASS);\n        }\n      },\n    }));\n    view.add(createButton({\n      className: `${HIDE_CLASS} al-button button button-wide button-primary`,\n      title: loc('oktaVerify.open.button', 'login'),\n      click: () => {\n        // only window.location.href can open app link in Android\n        // other methods won't do, ex, AJAX get or form get (Util.redirectWithFormGet)\n        let deviceChallengeUrl = appendLoginHint(deviceChallenge.href, loginHint);\n        Util.redirect(deviceChallengeUrl, window, true);\n      },\n      postRender() {\n        if (fromView === IDENTIFIER_FLOW) {\n          setTimeout(_.bind(()=> {\n            this.$el.removeClass(HIDE_CLASS);\n          }, this), FASTPASS_FALLBACK_SPINNER_TIMEOUT);\n        } else {\n          this.$el.removeClass(HIDE_CLASS);\n        }\n      }\n    }));\n    break;\n  case Enums.CHROME_DTC:\n    // reusing the existing message for Chrome DTC\n    view.title = loc('deviceTrust.sso.redirectText', 'login');\n    view.add(View.extend({\n      className: 'chrome-dtc-content',\n      template: hbs`\n            <div class=\"spinner\"></div>\n          `\n    }));\n    view.doChromeDTC(deviceChallenge);\n    break;\n  }\n}\n\nexport function cancelPollingWithParams(appState, pollingCancelAction, cancelReason, statusCode) {\n  const actionParams = {};\n  actionParams[REQUEST_PARAM_AUTHENTICATION_CANCEL_REASON] = cancelReason;\n  actionParams[LOOPBACK_RESPONSE_STATUS_CODE] = statusCode;\n  appState.trigger('invokeAction', pollingCancelAction, actionParams);\n}\n\nexport function getBiometricsErrorOptions(error, isMessageObj) {\n  let errorSummaryKeys;\n  if (isMessageObj) {\n    errorSummaryKeys  = Object.values(error?.value[0]?.i18n);\n  } else {\n    errorSummaryKeys = error?.responseJSON?.errorSummaryKeys;\n  }\n\n  const isBiometricsRequiredMobile = errorSummaryKeys \n      && errorSummaryKeys.includes(OV_UV_ENABLE_BIOMETRICS_FASTPASS_MOBILE);\n  const isBiometricsRequiredDesktop = errorSummaryKeys \n      && errorSummaryKeys.includes(OV_UV_ENABLE_BIOMETRICS_FASTPASS_DESKTOP);\n  let options = [];\n\n  if (!isBiometricsRequiredMobile && !isBiometricsRequiredDesktop) {\n    return options;\n  }\n\n  const bulletPoints = [\n    loc('oie.authenticator.oktaverify.method.fastpass.verify.enable.biometrics.point1', 'login'),\n    loc('oie.authenticator.oktaverify.method.fastpass.verify.enable.biometrics.point2', 'login'),\n    loc('oie.authenticator.oktaverify.method.fastpass.verify.enable.biometrics.point3', 'login')\n  ];\n\n  // Add an additional bullet point for desktop devices\n  if (isBiometricsRequiredDesktop) {\n    bulletPoints.push(\n      loc('oie.authenticator.oktaverify.method.fastpass.verify.enable.biometrics.point4', 'login')\n    );\n  }\n\n  options = {\n    type: 'error',\n    className: 'okta-verify-uv-callout-content',\n    title: loc('oie.authenticator.oktaverify.method.fastpass.verify.enable.biometrics.title', 'login'),\n    subtitle: loc('oie.authenticator.oktaverify.method.fastpass.verify.enable.biometrics.description', 'login'),\n    bullets: bulletPoints,\n  };\n\n  return options;\n}\n"],"names":["appendLoginHint","deviceChallengeUrl","loginHint","doChallenge","view","fromView","deviceChallenge","getDeviceChallengePayload","options","settings","get","HIDE_CLASS","challengeMethod","Enums","LOOPBACK_CHALLENGE","title","loc","add","View","extend","className","template","doLoopback","CUSTOM_URI_CHALLENGE","createButton","id","click","doCustomURI","getTemplateData","downloadOVLink","downloadHref","customURI","href","UNIVERSAL_LINK_CHALLENGE","Util","redirect","APP_LINK_CHALLENGE","hideClass","postRender","IDENTIFIER_FLOW","$","removeClass","setTimeout","_","bind","data","label","appState","trigger","addClass","FASTPASS_FALLBACK_SPINNER_TIMEOUT","window","$el","CHROME_DTC","doChromeDTC","cancelPollingWithParams","pollingCancelAction","cancelReason","statusCode","actionParams","REQUEST_PARAM_AUTHENTICATION_CANCEL_REASON","LOOPBACK_RESPONSE_STATUS_CODE","getBiometricsErrorOptions","error","isMessageObj","errorSummaryKeys","Object","values","value","i18n","responseJSON","isBiometricsRequiredMobile","includes","OV_UV_ENABLE_BIOMETRICS_FASTPASS_MOBILE","isBiometricsRequiredDesktop","OV_UV_ENABLE_BIOMETRICS_FASTPASS_DESKTOP","bulletPoints","push","type","subtitle","bullets"],"mappings":"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"}