{"version":3,"file":"UnlockAccountController.js","sources":["../../../../../src/v1/controllers/UnlockAccountController.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { _, loc, View } from '@okta/courage';\nimport hbs from '@okta/handlebars-inline-precompile';\nimport Enums from 'util/Enums';\nimport FormController from 'v1/util/FormController';\nimport FormType from 'v1/util/FormType';\nimport Util from 'util/Util';\nimport ValidationUtil from 'v1/util/ValidationUtil';\nimport ContactSupport from 'v1/views/shared/ContactSupport';\nimport TextBox from 'v1/views/shared/TextBox';\nconst UnlockAccountControllernoFactorsError = View.extend({\n  template: hbs`\n      <div class=\"okta-form-infobox-error infobox infobox-error\" role=\"alert\">\n        <span class=\"icon error-16\"></span>\n        <p>{{i18n code=\"account.unlock.noFactorsEnabled\" bundle=\"login\"}}</p>\n      </div>\n    `,\n});\nconst UnlockAccountControllerFooter = View.extend({\n  template: hbs(\n    '\\\n      <a href=\"#\" class=\"link help js-back\" data-se=\"back-link\">\\\n        {{i18n code=\"goback\" bundle=\"login\"}}\\\n      </a>\\\n      {{#if helpSupportNumber}}\\\n      <a href=\"#\" class=\"link goto js-contact-support\">\\\n        {{i18n code=\"mfa.noAccessToEmail\" bundle=\"login\"}}\\\n      </a>\\\n      {{/if}}\\\n    '\n  ),\n  className: 'auth-footer',\n  events: {\n    'click .js-back': function(e) {\n      e.preventDefault();\n      this.back();\n    },\n    'click .js-contact-support': function(e) {\n      e.preventDefault();\n      this.state.trigger('contactSupport');\n      this.$('.js-contact-support').hide();\n    },\n  },\n  getTemplateData: function() {\n    return this.settings.pick('helpSupportNumber');\n  },\n  back: function() {\n    this.state.set('navigateDir', Enums.DIRECTION_BACK);\n    this.options.appState.trigger('navigate', '');\n  },\n});\nexport default FormController.extend({\n  className: 'account-unlock',\n  Model: {\n    props: {\n      username: ['string', true],\n      factorType: ['string', true],\n    },\n    validate: function() {\n      return ValidationUtil.validateUsername(this);\n    },\n    save: function() {\n      const self = this;\n\n      return this.startTransaction(function(authClient) {\n        return authClient.unlockAccount({\n          username: self.settings.transformUsername(self.get('username'), Enums.UNLOCK_ACCOUNT),\n          factorType: self.get('factorType'),\n        });\n      }).catch(function() {\n        //need empty fail handler on model to display errors on form\n      });\n    },\n  },\n  Form: {\n    noButtonBar: true,\n    title: _.partial(loc, 'account.unlock.title', 'login'),\n    formChildren: function() {\n      const smsEnabled = this.settings.get('features.smsRecovery');\n      /*eslint complexity: [2, 9] max-statements: [2, 24] */\n\n      const callEnabled = this.settings.get('features.callRecovery');\n      const emailEnabled = this.settings.get('features.emailRecovery');\n      const noFactorsEnabled = !(smsEnabled || callEnabled || emailEnabled);\n      const formChildren = [];\n      const form = this;\n\n      if (noFactorsEnabled) {\n        this.add(UnlockAccountControllernoFactorsError, '.o-form-error-container');\n      } else {\n        formChildren.push(\n          FormType.Input({\n            label: loc('account.unlock.email.or.username.placeholder', 'login'),\n            'label-top': true,\n            explain: Util.createInputExplain(\n              'account.unlock.email.or.username.tooltip',\n              'account.unlock.email.or.username.placeholder',\n              'login'\n            ),\n            'explain-top': true,\n            name: 'username',\n            input: TextBox,\n            inputId: 'account-recovery-username',\n            type: 'text',\n            inlineValidation: false,\n          })\n        );\n\n        if (smsEnabled || callEnabled) {\n          formChildren.push(\n            FormType.View({\n              View: View.extend({\n                template: hbs(\n                  '\\\n                  <p class=\"mobile-recovery-hint\">\\\n                    {{i18n code=\"recovery.mobile.hint\" bundle=\"login\" arguments=\"mobileFactors\"}}\\\n                  </p>'\n                ),\n                getTemplateData: function() {\n                  let mobileFactors;\n\n                  if (smsEnabled && callEnabled) {\n                    mobileFactors = loc('recovery.smsOrCall');\n                  } else if (callEnabled) {\n                    mobileFactors = loc('recovery.call');\n                  } else {\n                    mobileFactors = loc('recovery.sms');\n                  }\n                  return { mobileFactors: mobileFactors };\n                },\n              }),\n            })\n          );\n        }\n\n        if (smsEnabled) {\n          this.$el.addClass('forgot-password-sms-enabled');\n          formChildren.push(\n            this.createRecoveryFactorButton(\n              'sms-button',\n              'account.unlock.sendText',\n              Enums.RECOVERY_FACTOR_TYPE_SMS,\n              form\n            )\n          );\n          this.setDefaultFactorType(Enums.RECOVERY_FACTOR_TYPE_SMS);\n        }\n        if (callEnabled) {\n          this.$el.addClass('forgot-password-call-enabled');\n          formChildren.push(\n            this.createRecoveryFactorButton(\n              'call-button',\n              'account.unlock.voiceCall',\n              Enums.RECOVERY_FACTOR_TYPE_CALL,\n              form\n            )\n          );\n          this.setDefaultFactorType(Enums.RECOVERY_FACTOR_TYPE_CALL);\n        }\n        if (emailEnabled) {\n          this.$el.addClass('forgot-password-email-enabled');\n          formChildren.push(\n            this.createRecoveryFactorButton(\n              'email-button',\n              'account.unlock.sendEmail',\n              Enums.RECOVERY_FACTOR_TYPE_EMAIL,\n              form\n            )\n          );\n          this.setDefaultFactorType(Enums.RECOVERY_FACTOR_TYPE_EMAIL);\n        }\n      }\n\n      return formChildren;\n    },\n    initialize: function() {\n      this.listenTo(this, 'save', function() {\n        this.options.appState.set('username', this.model.get('username'));\n        this.model.save();\n      });\n\n      this.listenTo(this.state, 'contactSupport', function() {\n        this.add(ContactSupport, '.o-form-error-container');\n      });\n    },\n    setDefaultFactorType: function(factorType) {\n      if (_.isEmpty(this.model.get('factorType'))) {\n        this.model.set('factorType', factorType);\n      }\n    },\n    createRecoveryFactorButton: function(className, labelCode, factorType, form) {\n      return FormType.Button({\n        attributes: { 'data-se': className },\n        className: 'button button-primary button-wide ' + className,\n        title: loc(labelCode, 'login'),\n        click: function() {\n          form.clearErrors();\n          if (this.model.isValid()) {\n            this.model.set('factorType', factorType);\n            form.trigger('save', this.model);\n          }\n        },\n      });\n    },\n  },\n  Footer: UnlockAccountControllerFooter,\n});\n"],"names":["UnlockAccountControllernoFactorsError","View","extend","template","UnlockAccountControllerFooter","className","events","e","preventDefault","back","state","trigger","$","hide","getTemplateData","settings","pick","set","Enums","DIRECTION_BACK","options","appState","FormController","Model","props","username","factorType","validate","ValidationUtil","validateUsername","save","self","startTransaction","authClient","unlockAccount","transformUsername","get","UNLOCK_ACCOUNT","catch","Form","noButtonBar","title","_","partial","loc","formChildren","smsEnabled","callEnabled","emailEnabled","noFactorsEnabled","form","add","push","FormType","Input","label","explain","Util","createInputExplain","name","input","TextBox","inputId","type","inlineValidation","mobileFactors","$el","addClass","createRecoveryFactorButton","RECOVERY_FACTOR_TYPE_SMS","setDefaultFactorType","RECOVERY_FACTOR_TYPE_CALL","RECOVERY_FACTOR_TYPE_EMAIL","initialize","listenTo","model","ContactSupport","isEmpty","labelCode","Button","attributes","click","clearErrors","isValid","Footer"],"mappings":"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"}