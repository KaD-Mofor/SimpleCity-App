{"version":3,"file":"BaseFooter.js","sources":["../../../../../../src/v2/view-builder/internals/BaseFooter.js"],"sourcesContent":["import { View, _, $} from '@okta/courage';\nimport Link from '../components/Link';\nimport ToggleTextLink from '../components/ToggleTextLink';\nimport { getSignOutLink } from '../utils/LinksUtil';\n\n/**\n * When `href` is present, the Link behaviors as normal link (anchor element).\n * When `actionPath` is present, the Link behaviors as link button\n *   on which user clicks, will trigger the action `actionPath`.\n * When `formName` is present, the link behaviors as link button\n *   on which user clicks, will submit a remediation form.\n *\n * @typedef {Object} Link\n * @property {string} label\n * @property {string} name\n * @property {string=} href\n * @property {string=} actionPath\n * @property {string=} formName\n */\n\n\nexport default View.extend({\n\n  className: 'auth-footer',\n\n  /**\n   * {Link[]} links\n   */\n  links: [],\n\n  /**\n   * View\n   * adds any view to the footer in footer info section\n   */ \n  footerInfo: null,\n\n  /**\n   * Boolean\n   * If false then 'Back to sign in' does not get added to the view\n   */\n  hasBackToSignInLink: true,\n\n  initialize() {\n    let links = _.resultCtx(this, 'links', this);\n    const footerInfo = _.resultCtx(this, 'footerInfo', this);\n    const hasBackToSignInLink = _.resultCtx(this, 'hasBackToSignInLink', this);\n\n    // safe check\n    // 1. avoid none array from override\n    // 2. ignore any none plain object arguments\n    if (!Array.isArray(links)) {\n      links = [];\n    } else {\n      links = links.filter(l => $.isPlainObject(l));\n    }\n\n    // add 'back to sign in' link if the form qualifies for it by default.\n    // Previously called cancel/Sign Out links\n    if (this.options.appState.shouldShowSignOutLinkInCurrentForm(\n      this.options.settings.get('features.hideSignOutLinkInMFA') ||\n      this.settings.get('features.mfaOnlyFlow')) && hasBackToSignInLink) {\n      links = links.concat(getSignOutLink(this.options.settings));\n    }\n\n    links.forEach(link => {\n      let LinkView = Link;\n      if (link.type === 'toggle-text-link') {\n        LinkView = ToggleTextLink;\n      }\n      this.add(LinkView, { options: link });\n    });\n\n    if (footerInfo) {\n      this.add(View.extend({\n        className: 'footer-info',\n      }));\n\n      this.add(footerInfo, '.footer-info');\n    }\n  }\n});\n"],"names":["View","extend","className","links","footerInfo","hasBackToSignInLink","initialize","_","resultCtx","Array","isArray","filter","l","$","isPlainObject","options","appState","shouldShowSignOutLinkInCurrentForm","settings","get","concat","getSignOutLink","forEach","link","LinkView","Link","type","ToggleTextLink","add"],"mappings":";;;;;;;;;;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,iBAAeA,IAAI,CAACC,MAAM,CAAC;AAEzBC,EAAAA,SAAS,EAAE,aAAa;AAExB;AACF;AACA;AACEC,EAAAA,KAAK,EAAE,EAAE;AAET;AACF;AACA;AACA;AACEC,EAAAA,UAAU,EAAE,IAAI;AAEhB;AACF;AACA;AACA;AACEC,EAAAA,mBAAmB,EAAE,IAAI;AAEzBC,EAAAA,UAAU,EAAG,YAAA;IACX,IAAIH,KAAK,GAAGI,cAAC,CAACC,SAAS,CAAC,IAAI,EAAE,OAAO,EAAE,IAAI,CAAC,CAAA;IAC5C,MAAMJ,UAAU,GAAGG,cAAC,CAACC,SAAS,CAAC,IAAI,EAAE,YAAY,EAAE,IAAI,CAAC,CAAA;IACxD,MAAMH,mBAAmB,GAAGE,cAAC,CAACC,SAAS,CAAC,IAAI,EAAE,qBAAqB,EAAE,IAAI,CAAC,CAAA;;AAE1E;AACA;AACA;AACA,IAAA,IAAI,CAACC,KAAK,CAACC,OAAO,CAACP,KAAK,CAAC,EAAE;AACzBA,MAAAA,KAAK,GAAG,EAAE,CAAA;AACZ,KAAC,MAAM;AACLA,MAAAA,KAAK,GAAGA,KAAK,CAACQ,MAAM,CAACC,CAAC,IAAIC,gBAAC,CAACC,aAAa,CAACF,CAAC,CAAC,CAAC,CAAA;AAC/C,KAAA;;AAEA;AACA;AACA,IAAA,IAAI,IAAI,CAACG,OAAO,CAACC,QAAQ,CAACC,kCAAkC,CAC1D,IAAI,CAACF,OAAO,CAACG,QAAQ,CAACC,GAAG,CAAC,+BAA+B,CAAC,IAC1D,IAAI,CAACD,QAAQ,CAACC,GAAG,CAAC,sBAAsB,CAAC,CAAC,IAAId,mBAAmB,EAAE;AACnEF,MAAAA,KAAK,GAAGA,KAAK,CAACiB,MAAM,CAACC,cAAc,CAAC,IAAI,CAACN,OAAO,CAACG,QAAQ,CAAC,CAAC,CAAA;AAC7D,KAAA;AAEAf,IAAAA,KAAK,CAACmB,OAAO,CAACC,IAAI,IAAI;MACpB,IAAIC,QAAQ,GAAGC,IAAI,CAAA;AACnB,MAAA,IAAIF,IAAI,CAACG,IAAI,KAAK,kBAAkB,EAAE;AACpCF,QAAAA,QAAQ,GAAGG,cAAc,CAAA;AAC3B,OAAA;AACA,MAAA,IAAI,CAACC,GAAG,CAACJ,QAAQ,EAAE;AAAET,QAAAA,OAAO,EAAEQ,IAAAA;AAAK,OAAC,CAAC,CAAA;AACvC,KAAC,CAAC,CAAA;AAEF,IAAA,IAAInB,UAAU,EAAE;AACd,MAAA,IAAI,CAACwB,GAAG,CAAC5B,IAAI,CAACC,MAAM,CAAC;AACnBC,QAAAA,SAAS,EAAE,aAAA;AACb,OAAC,CAAC,CAAC,CAAA;AAEH,MAAA,IAAI,CAAC0B,GAAG,CAACxB,UAAU,EAAE,cAAc,CAAC,CAAA;AACtC,KAAA;AACF,GAAA;AACF,CAAC,CAAC;;;;"}