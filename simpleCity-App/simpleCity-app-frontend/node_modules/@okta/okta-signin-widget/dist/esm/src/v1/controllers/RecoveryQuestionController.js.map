{"version":3,"file":"RecoveryQuestionController.js","sources":["../../../../../src/v1/controllers/RecoveryQuestionController.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { loc } from '@okta/courage';\nimport FormController from 'v1/util/FormController';\nimport FormType from 'v1/util/FormType';\nimport FooterSignout from 'v1/views/shared/FooterSignout';\nimport TextBox from 'v1/views/shared/TextBox';\nexport default FormController.extend({\n  className: 'recovery-question',\n  Model: {\n    props: {\n      answer: ['string', true],\n      showAnswer: 'boolean',\n    },\n    save: function() {\n      return this.doTransaction(function(transaction) {\n        return transaction.answer({ answer: this.get('answer') });\n      });\n    },\n  },\n  Form: {\n    autoSave: true,\n    save: function() {\n      switch (this.options.appState.get('recoveryType')) {\n      case 'PASSWORD':\n        return loc('password.forgot.question.submit', 'login');\n      case 'UNLOCK':\n        return loc('account.unlock.question.submit', 'login');\n      default:\n        return loc('mfa.challenge.verify', 'login');\n      }\n    },\n    title: function() {\n      switch (this.options.appState.get('recoveryType')) {\n      case 'PASSWORD':\n        return loc('password.forgot.question.title', 'login');\n      case 'UNLOCK':\n        return loc('account.unlock.question.title', 'login');\n      default:\n        return '';\n      }\n    },\n    formChildren: function() {\n      return [\n        FormType.Input({\n          label: this.options.appState.get('recoveryQuestion'),\n          placeholder: loc('mfa.challenge.answer.placeholder', 'login'),\n          name: 'answer',\n          input: TextBox,\n          type: 'password',\n          initialize: function() {\n            this.listenTo(this.model, 'change:showAnswer', function() {\n              const type = this.model.get('showAnswer') ? 'text' : 'password';\n\n              this.getInputs()[0].changeType(type);\n            });\n          },\n        }),\n        FormType.Input({\n          label: false,\n          'label-top': true,\n          placeholder: loc('mfa.challenge.answer.showAnswer', 'login'),\n          className: 'recovery-question-show margin-btm-0',\n          name: 'showAnswer',\n          type: 'checkbox',\n        }),\n      ];\n    },\n  },\n  initialize: function() {\n    if (!this.settings.get('features.hideBackToSignInForReset')) {\n      this.addFooter(FooterSignout);\n    }\n  },\n});\n"],"names":["FormController","extend","className","Model","props","answer","showAnswer","save","doTransaction","transaction","get","Form","autoSave","options","appState","loc","title","formChildren","FormType","Input","label","placeholder","name","input","TextBox","type","initialize","listenTo","model","getInputs","changeType","settings","addFooter","FooterSignout"],"mappings":"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"}