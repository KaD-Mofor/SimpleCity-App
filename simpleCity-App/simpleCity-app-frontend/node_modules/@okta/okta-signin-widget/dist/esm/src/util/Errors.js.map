{"version":3,"file":"Errors.js","sources":["../../../../src/util/Errors.ts"],"sourcesContent":["/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { loc } from './loc';\nimport Enums from './Enums';\nimport { ErrorXHR, ErrorContextData } from '../types/errors';\nimport { FlowIdentifier } from '@okta/okta-auth-js';\n\nabstract class CustomError extends Error {\n  constructor(message?: string) {\n    super(message);\n\n    // 'Error' breaks prototype chain. Need to restore it for ES5.\n    // https://github.com/microsoft/TypeScript/wiki/FAQ#why-doesnt-extending-built-ins-like-error-array-and-map-work\n    // Note: no need to adjust prototype in subclasses of 'CustomError'.\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n}\n\nexport class ConfigError extends CustomError {\n  name = Enums.CONFIG_ERROR;\n  constructor(message?: string) {\n    super(message || loc('error.config'));\n  }\n}\n\nexport class UnsupportedBrowserError extends CustomError {\n  name = Enums.UNSUPPORTED_BROWSER_ERROR;\n  constructor(message?: string) {\n    super(message || loc('error.unsupported.browser'));\n  }\n}\n\nexport class OAuthError extends CustomError {\n  name = Enums.OAUTH_ERROR;\n}\n\nexport class RegistrationError extends CustomError {\n  name = Enums.REGISTRATION_FAILED;\n}\n\n// Thrown when initiation of poll was cancelled.\nexport class AuthStopPollInitiationError extends CustomError {\n  name = Enums.AUTH_STOP_POLL_INITIATION_ERROR;\n}\n\nexport class U2FError extends CustomError {\n  xhr: ErrorXHR;\n  name = Enums.U2F_ERROR;\n  constructor(err: ErrorContextData) {\n    super(err.xhr?.responseJSON?.errorSummary);\n    this.xhr = err.xhr;\n  }\n}\n\nexport class WebAuthnError extends CustomError {\n  xhr: ErrorXHR;\n  name = Enums.WEB_AUTHN_ERROR;\n  constructor(err: ErrorContextData) {\n    super(err.xhr?.responseJSON?.errorSummary);\n    this.xhr = err.xhr;\n  }\n}\n\n// This is triggered only when code aborts webauthn browser prompt.\nexport class WebauthnAbortError extends CustomError {\n  name = Enums.WEBAUTHN_ABORT_ERROR;\n}\n\nexport class ConfiguredFlowError extends CustomError {\n  flowSetting: FlowIdentifier;\n  name = Enums.CONFIGURED_FLOW_ERROR;\n  constructor(message: string, flowSetting: FlowIdentifier) {\n    super(message);\n    this.flowSetting = flowSetting;\n  }\n}\n"],"names":["CustomError","Error","constructor","message","Object","setPrototypeOf","new","target","prototype","ConfigError","loc","name","Enums","CONFIG_ERROR","UnsupportedBrowserError","UNSUPPORTED_BROWSER_ERROR","OAuthError","OAUTH_ERROR","RegistrationError","REGISTRATION_FAILED","AuthStopPollInitiationError","AUTH_STOP_POLL_INITIATION_ERROR","U2FError","err","xhr","responseJSON","errorSummary","U2F_ERROR","WebAuthnError","WEB_AUTHN_ERROR","WebauthnAbortError","WEBAUTHN_ABORT_ERROR","ConfiguredFlowError","flowSetting","CONFIGURED_FLOW_ERROR"],"mappings":"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"}