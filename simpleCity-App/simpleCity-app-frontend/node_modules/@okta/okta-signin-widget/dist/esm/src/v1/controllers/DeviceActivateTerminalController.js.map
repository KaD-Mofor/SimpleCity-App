{"version":3,"file":"DeviceActivateTerminalController.js","sources":["../../../../../src/v1/controllers/DeviceActivateTerminalController.js"],"sourcesContent":["/*!\n * Copyright (c) 2017, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\n/* eslint max-len: [2, 160] */\nimport {_, loc, View} from '@okta/courage';\nimport hbs from '@okta/handlebars-inline-precompile';\nimport FormController from 'v1/util/FormController';\nimport FormType from 'v1/util/FormType';\n\nconst DEVICE_ACTIVATED = 'DEVICE_ACTIVATED';\nconst DEVICE_NOT_ACTIVATED_CONSENT_DENIED = 'DEVICE_NOT_ACTIVATED_CONSENT_DENIED';\nconst DEVICE_NOT_ACTIVATED = 'DEVICE_NOT_ACTIVATED';\nconst DEVICE_CODE_ERROR_KEYS = [\n  DEVICE_NOT_ACTIVATED_CONSENT_DENIED,\n  DEVICE_NOT_ACTIVATED\n];\n\nexport default FormController.extend({\n  className: 'device-code-terminal',\n  postRender: function() {\n    FormController.prototype.postRender.apply(this, arguments);\n\n    // show device code terminal icons\n    const iconClass = this.options.appState.get('deviceActivationStatus') === DEVICE_ACTIVATED\n      ? 'success-24-green' : 'error-24-red';\n    this.$('.o-form-head').before('<div class=\"device-code-terminal--icon-container\">' +\n      '<span class=\"device-code-terminal--icon ' + iconClass + '\"></span>' +\n      '</div>');\n  },\n  Model: {},\n  Form: {\n    noCancelButton: true,\n    noButtonBar: true,\n    title: function() {\n      const deviceActivationStatus = this.options.appState.get('deviceActivationStatus');\n      if (deviceActivationStatus === DEVICE_ACTIVATED) {\n        return loc('device.code.activated.success.title', 'login');\n      }\n      if (_.contains(DEVICE_CODE_ERROR_KEYS, deviceActivationStatus)) {\n        return loc('device.code.activated.error.title', 'login');\n      }\n    },\n    subtitle: function() {\n      const deviceActivationStatus = this.options.appState.get('deviceActivationStatus');\n      if (deviceActivationStatus === DEVICE_ACTIVATED) {\n        return loc('idx.device.activated', 'login');\n      }\n      if (deviceActivationStatus === DEVICE_NOT_ACTIVATED_CONSENT_DENIED) {\n        return loc('idx.device.not.activated.consent.denied', 'login');\n      }\n      if (deviceActivationStatus === DEVICE_NOT_ACTIVATED) {\n        return loc('idx.device.not.activated.internal.error', 'login');\n      }\n    },\n    formChildren: function() {\n      return [\n        FormType.View({\n          View: View.extend({\n            template: hbs(\n              '{{#if isDeviceCodeError}}\\\n                  <a href=\"/activate\" class=\"button button-primary text-align-c retry-button\" data-se=\"try-again\">\\\n                    {{i18n code=\"oie.try.again\" bundle=\"login\"}}\\\n                  </a>\\\n               {{/if}}\\\n              '\n            ),\n            getTemplateData: function() {\n              return {\n                isDeviceCodeError: _.contains(DEVICE_CODE_ERROR_KEYS, this.options.appState.get('deviceActivationStatus'))\n              };\n            },\n          }),\n        }),\n      ];\n    }\n  }\n});\n"],"names":["DEVICE_ACTIVATED","DEVICE_NOT_ACTIVATED_CONSENT_DENIED","DEVICE_NOT_ACTIVATED","DEVICE_CODE_ERROR_KEYS","FormController","extend","className","postRender","prototype","apply","arguments","iconClass","options","appState","get","$","before","Model","Form","noCancelButton","noButtonBar","title","deviceActivationStatus","loc","_","contains","subtitle","formChildren","FormType","View","template","getTemplateData","isDeviceCodeError"],"mappings":"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"}