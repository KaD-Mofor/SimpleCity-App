{"version":3,"file":"BrowserFeatures.js","sources":["../../../../src/util/BrowserFeatures.ts"],"sourcesContent":["/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck\n\nconst fn: Record<string, (...any: any[]) => any> = {};\nconst hasFullCorsSupport = 'withCredentials' in new window.XMLHttpRequest();\nconst hasXDomainRequest = typeof window.XDomainRequest !== 'undefined';\n\nfn.corsIsNotSupported = function() {\n  return !(hasFullCorsSupport || hasXDomainRequest);\n};\n\nfn.corsIsNotEnabled = function(jqXhr) {\n  // Not a definitive check, but it's the best we've got.\n  // Note: This will change when OktaAuth is updated\n  return jqXhr.status === 0;\n};\n\n// This is currently not being used, but we'll keep it around for when we\n// want a fallback mechanism - i.e. use localStorage if it exists, else fall\n// back to cookies.\nfn.localStorageIsNotSupported = function() {\n  const test = 'test';\n\n  try {\n    localStorage.setItem(test, test);\n    localStorage.removeItem(test);\n    return false;\n  } catch (e) {\n    return true;\n  }\n};\n\nfn.supportsPushState = function(win) {\n  win = win || window;\n  return !!(win.history && win.history.pushState);\n};\n\nfn.isIE = function() {\n  return /(msie|trident)/i.test(navigator.userAgent);\n};\n\nfn.isFirefox = function() {\n  return navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n};\n\nfn.isEdge = function() {\n  // This is to just check for windows edge. Mac edge - chromium based's UA is 'edg'.\n  return navigator.userAgent.toLowerCase().indexOf('edge') > -1;\n};\n\nfn.isSafari = function() {\n  // Chrome has safari in its useragent string so adding this extra check.\n  return (\n    navigator.userAgent.toLowerCase().indexOf('safari') > -1 &&\n    navigator.userAgent.toLowerCase().indexOf('chrome') === -1\n  );\n};\n\nfn.isMac = function() {\n  return navigator.platform.toUpperCase().indexOf('MAC') >= 0;\n};\n\n\nfn.isAndroid = function() {\n  // Windows Phone also contains \"Android\"\n  return /android/i.test(navigator.userAgent) &&\n    !/windows phone/i.test(navigator.userAgent);\n};\n\nfn.isIOS = function() {\n  // iOS detection from: http://stackoverflow.com/a/9039885/177710\n  return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n};\n\n// Returns a list of languages the user has configured for their browser, in\n// order of preference.\nfn.getUserLanguages = function() {\n  // Chrome, Firefox\n  if (navigator.languages) {\n    return [...navigator.languages];\n  }\n\n  const languages = [];\n  const properties = [\n    'language',         // Safari, IE11\n    'userLanguage',     // IE\n    'browserLanguage',  // IE\n    'systemLanguage'    // IE\n  ];\n\n  properties.forEach(function(property) {\n    if (navigator[property]) {\n      languages.push(navigator[property]);\n    }\n  });\n\n  return languages;\n};\n\n\nexport default fn;\n"],"names":["fn","hasFullCorsSupport","window","XMLHttpRequest","hasXDomainRequest","XDomainRequest","corsIsNotSupported","corsIsNotEnabled","jqXhr","status","localStorageIsNotSupported","test","localStorage","setItem","removeItem","e","supportsPushState","win","history","pushState","isIE","navigator","userAgent","isFirefox","toLowerCase","indexOf","isEdge","isSafari","isMac","platform","toUpperCase","isAndroid","isIOS","MSStream","getUserLanguages","languages","properties","forEach","property","push"],"mappings":"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"}