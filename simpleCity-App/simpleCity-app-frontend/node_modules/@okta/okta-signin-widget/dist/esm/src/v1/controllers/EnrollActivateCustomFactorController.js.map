{"version":3,"file":"EnrollActivateCustomFactorController.js","sources":["../../../../../src/v1/controllers/EnrollActivateCustomFactorController.js"],"sourcesContent":["/*!\n * Copyright (c) 2019-2020, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { loc, internal } from '@okta/courage';\nimport EnrollCustomFactorController from './EnrollCustomFactorController';\nimport Factor from 'v1/models/Factor';\nimport FormType from 'v1/util/FormType';\nimport HtmlErrorMessageView from 'v1/views/mfa-verify/HtmlErrorMessageView';\nconst { Util } = internal.util;\nexport default EnrollCustomFactorController.extend({\n  Model: {\n    local: {\n      provider: 'string',\n      factorType: 'string',\n    },\n    save: function() {\n      return this.manageTransaction(() => {\n        const url = this.appState.get('enrollCustomFactorRedirectUrl');\n\n        if (url !== null) {\n          Util.redirect(url);\n        }\n      });\n    },\n  },\n\n  Form: function() {\n    const factor = new Factor.Model(this.options.appState.get('factor'), this.toJSON());\n    const vendorName = factor.get('vendorName');\n    const subtitle = loc('enroll.customFactor.subtitle', 'login', [vendorName]);\n    const saveText = loc('enroll.customFactor.save', 'login');\n\n    return {\n      autoSave: true,\n      title: vendorName,\n      subtitle: subtitle,\n      save: saveText,\n      formChildren: function() {\n        const result = [];\n\n        if (this.options.appState.get('isFactorResultFailed')) {\n          result.push(\n            FormType.View(\n              { View: new HtmlErrorMessageView({ message: this.options.appState.get('factorResultErrorMessage') }) },\n              { selector: '.o-form-error-container' }\n            )\n          );\n        }\n        return result;\n      },\n    };\n  },\n});\n"],"names":["Util","internal","util","EnrollCustomFactorController","extend","Model","local","provider","factorType","save","manageTransaction","url","appState","get","redirect","Form","factor","Factor","options","toJSON","vendorName","subtitle","loc","saveText","autoSave","title","formChildren","result","push","FormType","View","HtmlErrorMessageView","message","selector"],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAOA,MAAM;AAAEA,EAAAA,IAAI,EAAJA,IAAAA;AAAK,CAAC,GAAGC,QAAQ,CAACC,IAAI,CAAA;AAC9B,2CAAeC,4BAA4B,CAACC,MAAM,CAAC;AACjDC,EAAAA,KAAK,EAAE;AACLC,IAAAA,KAAK,EAAE;AACLC,MAAAA,QAAQ,EAAE,QAAQ;AAClBC,MAAAA,UAAU,EAAE,QAAA;KACb;AACDC,IAAAA,IAAI,EAAE,YAAW;AACf,MAAA,OAAO,IAAI,CAACC,iBAAiB,CAAC,MAAM;QAClC,MAAMC,GAAG,GAAG,IAAI,CAACC,QAAQ,CAACC,GAAG,CAAC,+BAA+B,CAAC,CAAA;QAE9D,IAAIF,GAAG,KAAK,IAAI,EAAE;AAChBX,UAAAA,IAAI,CAACc,QAAQ,CAACH,GAAG,CAAC,CAAA;AACpB,SAAA;AACF,OAAC,CAAC,CAAA;AACJ,KAAA;GACD;AAEDI,EAAAA,IAAI,EAAE,YAAW;IACf,MAAMC,MAAM,GAAG,IAAIC,MAAM,CAACZ,KAAK,CAAC,IAAI,CAACa,OAAO,CAACN,QAAQ,CAACC,GAAG,CAAC,QAAQ,CAAC,EAAE,IAAI,CAACM,MAAM,EAAE,CAAC,CAAA;AACnF,IAAA,MAAMC,UAAU,GAAGJ,MAAM,CAACH,GAAG,CAAC,YAAY,CAAC,CAAA;IAC3C,MAAMQ,QAAQ,GAAGC,GAAG,CAAC,8BAA8B,EAAE,OAAO,EAAE,CAACF,UAAU,CAAC,CAAC,CAAA;AAC3E,IAAA,MAAMG,QAAQ,GAAGD,GAAG,CAAC,0BAA0B,EAAE,OAAO,CAAC,CAAA;IAEzD,OAAO;AACLE,MAAAA,QAAQ,EAAE,IAAI;AACdC,MAAAA,KAAK,EAAEL,UAAU;AACjBC,MAAAA,QAAQ,EAAEA,QAAQ;AAClBZ,MAAAA,IAAI,EAAEc,QAAQ;AACdG,MAAAA,YAAY,EAAE,YAAW;QACvB,MAAMC,MAAM,GAAG,EAAE,CAAA;QAEjB,IAAI,IAAI,CAACT,OAAO,CAACN,QAAQ,CAACC,GAAG,CAAC,sBAAsB,CAAC,EAAE;AACrDc,UAAAA,MAAM,CAACC,IAAI,CACTC,QAAQ,CAACC,IAAI,CACX;YAAEA,IAAI,EAAE,IAAIC,oBAAoB,CAAC;cAAEC,OAAO,EAAE,IAAI,CAACd,OAAO,CAACN,QAAQ,CAACC,GAAG,CAAC,0BAA0B,CAAA;aAAG,CAAA;AAAE,WAAC,EACtG;AAAEoB,YAAAA,QAAQ,EAAE,yBAAA;AAA0B,WAAC,CACxC,CACF,CAAA;AACH,SAAA;AACA,QAAA,OAAON,MAAM,CAAA;AACf,OAAA;KACD,CAAA;AACH,GAAA;AACF,CAAC,CAAC;;;;"}