{"version":3,"file":"EnduserEmailConsentView.js","sources":["../../../../../../../src/v2/view-builder/views/consent/EnduserEmailConsentView.js"],"sourcesContent":["import { loc } from '@okta/courage';\nimport { BaseForm } from '../../internals';\nimport ConsentViewForm from './ConsentViewForm';\nimport BaseAuthenticatorView from '../../components/BaseAuthenticatorView';\nimport hbs from '@okta/handlebars-inline-precompile';\nimport EmailAuthenticatorHeader from '../../components/EmailAuthenticatorHeader';\n\nconst getInfo = hbs`\n  {{#if browser}}\n    <div class=\"enduser-email-consent--info no-translate\">\n      <i class=\"enduser-email-consent--icon icon--desktop\"></i>\n      <div>{{browser}}</div>\n    </div>\n  {{/if}}\n  {{#if app}}\n    <div class=\"enduser-email-consent--info no-translate\">\n      <i class=\"enduser-email-consent--icon icon--app\"></i>\n      <div>{{app}}</div>\n    </div>\n  {{/if}}`;\nconst enduserEmailConsentViewBody = ConsentViewForm.extend({\n  className: 'enduser-email-consent',\n\n  title() {\n    return loc('oie.consent.enduser.title', 'login');\n  },\n  save() {\n    return loc('oie.consent.enduser.accept.label', 'login');\n  },\n  cancel() {\n    return loc('oie.consent.enduser.deny.label', 'login');\n  },\n  initialize() {\n    BaseForm.prototype.initialize.apply(this, arguments);\n    const info = getInfo(this.model.pick('browser', 'app'));\n    this.add(info);\n  },\n  getUISchema() {\n    const uiSchemas = BaseForm.prototype.getUISchema.apply(this, arguments);\n    return uiSchemas.filter(uiSchema => uiSchema.name !== 'consent' );\n  },\n});\n\nexport default BaseAuthenticatorView.extend({\n  Header: EmailAuthenticatorHeader,\n\n  buttonOrder: ['cancel', 'save'],\n\n  postRender() {\n    const buttonContainer = this.$el.find('.o-form-button-bar');\n    buttonContainer.find('.button-primary').removeClass('button-primary');\n  },\n\n  Body: enduserEmailConsentViewBody,\n\n  createModelClass({ requestInfo }) {\n    const ModelClass = BaseAuthenticatorView.prototype.createModelClass.apply(this, arguments);\n    const browser = requestInfo.find(({ name }) => name === 'browser');\n    const app = requestInfo.find(({ name }) => name === 'appName');\n\n    const local = Object.assign({\n      browser: {\n        type: 'string',\n        value: browser?.value\n      },\n      app: {\n        type: 'string',\n        value: app?.value\n      },\n    }, ModelClass.prototype.local );\n    return ModelClass.extend({\n      local,\n      toJSON() {\n        return {\n          consent: this.get('consent'),\n        };\n      },\n    });\n  }\n});\n"],"names":["getInfo","enduserEmailConsentViewBody","ConsentViewForm","extend","className","title","loc","save","cancel","initialize","BaseForm","prototype","apply","arguments","info","model","pick","add","getUISchema","uiSchemas","filter","uiSchema","name","BaseAuthenticatorView","Header","EmailAuthenticatorHeader","buttonOrder","postRender","buttonContainer","$el","find","removeClass","Body","createModelClass","requestInfo","ModelClass","browser","app","local","Object","assign","type","value","toJSON","consent","get"],"mappings":"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"}