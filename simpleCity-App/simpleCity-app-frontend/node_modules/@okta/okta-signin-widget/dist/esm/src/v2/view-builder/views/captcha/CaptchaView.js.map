{"version":3,"file":"CaptchaView.js","sources":["../../../../../../../src/v2/view-builder/views/captcha/CaptchaView.js"],"sourcesContent":["/*!\n * Copyright (c) 2021, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { View } from '@okta/courage';\nimport Enums from 'util/Enums';\nimport Util from 'util/Util';\nimport hbs from '@okta/handlebars-inline-precompile';\nimport { WIDGET_FOOTER_CLASS } from '../../utils/Constants';\n\nconst OktaSignInWidgetOnCaptchaLoadedCallback = 'OktaSignInWidgetOnCaptchaLoaded';\nconst OktaSignInWidgetOnCaptchaSolvedCallback = 'OktaSignInWidgetOnCaptchaSolved';\n\nconst HCAPTCHA_URL = 'https://hcaptcha.com/1/api.js';\nconst RECAPTCHAV2_URL = 'https://www.google.com/recaptcha/api.js';\n\nexport default View.extend({\n  className: 'captcha-view',\n\n  template: hbs`\n    {{#if isCaptchaConfigured}}\\\n      <div id =\"captcha-container\"\n          class=\"{{className}}\"\n          data-sitekey=\"{{siteKey}}\"\n          data-callback=\"{{onCaptchaSolvedCallback}}\"\n          data-size=\"invisible\">\n      </div>\n    {{/if}}\\\n  `,\n\n  getTemplateData: function() {\n    if (this.captchaConfig) {\n      const className = this.captchaConfig.type === 'HCAPTCHA' ? 'h-captcha' : 'g-recaptcha';\n      return { \n        siteKey: this.captchaConfig.siteKey,\n        isCaptchaConfigured: true,\n        onCaptchaSolvedCallback: OktaSignInWidgetOnCaptchaSolvedCallback,\n        className, \n      };\n    } else {\n      return {};\n    }\n  },\n\n  initialize() {\n    if (this.options.appState.get('captcha')) {\n      this.captchaConfig = this.options.appState.get('captcha');\n      this._addCaptcha();\n    }\n  },\n\n  remove: function(){\n    View.prototype.remove.apply(this, arguments);\n\n    // Cleanup global Captcha references\n    if (this.captchaConfig.type === 'HCAPTCHA') {\n      window.hcaptcha = undefined;\n    } else if (this.captchaConfig.type === 'RECAPTCHA_V2') {\n      window.grecaptcha = undefined;\n    }\n  },\n\n  /**\n   *  Load the CAPTCHA lib dynamically (either HCAPTCHA or RECAPTCHAV2). Once loaded, trigger an event to inform\n   *  the parent form to actually render the CAPTCHA.\n  * */   \n  _addCaptcha() {\n    // Callback invoked when CAPTCHA is solved.\n    const onCaptchaSolved = (token) => {\n      const captchaObject = this._getCaptchaOject();\n\n      // We reset the Captcha. We need to reset because every time the \n      // Captcha resolves back with a token and say we have a server side error, \n      // if we submit the form again it won't work otherwise. The Captcha \n      // has to be reset for it to work again in that scenario.\n      const captchaId = this.$el.find('#captcha-container').attr('data-captcha-id');\n      captchaObject.reset(captchaId);\n\n      // Set the token in the model\n      const fieldName = this.options.name;\n      this.model.set(fieldName, token);\n\n      this.options.appState.trigger('saveForm', this.model); \n    };\n\n    // Callback when CAPTCHA lib is loaded\n    const onCaptchaLoaded = () => {\n      // This is just a safeguard to ensure we don't bind Captcha to an already bound element.\n      // It shouldn't happen in practice.\n      if (this.$el.find('#captcha-container').attr('data-captcha-id')) {\n        return;\n      }\n\n      const captchaObject = this._getCaptchaOject();\n\n      // We set a temporary token for Captcha because this is a required field for the form and is normally set\n      // at a later time. In order to prevent client-side validation errors because of this, we have to set a \n      // dummy value. We then overwrite this with the proper token in the onCaptchaSolved callback.\n      this.model.set(this.options.name, 'tempToken');\n\n      const captchaId = captchaObject.render('captcha-container', {\n        sitekey: this.captchaConfig.siteKey,\n        callback: onCaptchaSolved\n      });\n      \n      this.$el.find('#captcha-container').attr('data-captcha-id', captchaId);\n\n      // Let the Baseform know that Captcha is loaded.\n      this.options.appState.trigger('onCaptchaLoaded', captchaObject);\n\n      // Render the HCAPTCHA footer - we need to do this manually since the HCAPTCHA lib doesn't do it\n      if (this.captchaConfig.type === 'HCAPTCHA') {\n        this._addHCaptchaFooter();\n      }  \n    };\n\n    // Attaching the callback to the window object so that the CAPTCHA script that we dynamically render\n    // can have access to it since it won't have access to this view's scope.\n    window[OktaSignInWidgetOnCaptchaLoadedCallback] = onCaptchaLoaded;\n\n    // Attaching the Captcha solved callback to the window object because we reference it in our template under\n    // the 'data-callback' attribute which the Captcha library uses to invoke the callback.\n    window[OktaSignInWidgetOnCaptchaSolvedCallback] = onCaptchaSolved;\n\n    \n    if (this.captchaConfig.type === 'HCAPTCHA') {\n      this._loadCaptchaLib(this._getCaptchaUrl(HCAPTCHA_URL, 'hcaptcha'));\n    } else if (this.captchaConfig.type === 'RECAPTCHA_V2') {\n      this._loadCaptchaLib(this._getCaptchaUrl(RECAPTCHAV2_URL, 'recaptcha'));\n    }\n  },\n  \n  /**\n   *  We dynamically inject <script> tag into our login container because in case the customer is hosting\n   *  the SIW, we need to ensure we don't go out of scope when injecting the script.\n  * */ \n  _loadCaptchaLib(url) {\n    let scriptTag = document.createElement('script');\n    scriptTag.src = url;\n    scriptTag.async = true;\n    scriptTag.defer = true;\n    document.getElementById(Enums.WIDGET_CONTAINER_ID).appendChild(scriptTag);\n  },\n\n  _addHCaptchaFooter() {\n    // NOTE: insetAdjacentHTML() is supported in all major browsers: \n    // https://developer.mozilla.org/en-US/docs/Web/API/Element/insertAdjacentHTML#browser_compatibility\n    const footerContainer = document.getElementsByClassName(WIDGET_FOOTER_CLASS);\n    if (footerContainer.length) {\n      const template = hbs('<div class=\"captcha-footer\">\\\n        <span class=\"footer-text\">\\\n          {{i18n code=\"hcaptcha.footer.label\" bundle=\"login\" \\\n          $1=\"<a href=\\'https://hcaptcha.com/privacy\\' target=\\'_blank\\'>$1</a>\" \\\n          $2=\"<a href=\\'https://hcaptcha.com/terms\\' target=\\'_blank\\'>$2</a>\"}}\\\n        </span>\\\n      </div>');\n\n      footerContainer[0].insertAdjacentHTML('beforeend',\n        template()\n      );\n    }\n  },\n\n  _getCaptchaOject() {\n    const captchaObject = this.captchaConfig.type === 'HCAPTCHA' ? window.hcaptcha : window.grecaptcha;\n    return captchaObject;\n  },\n\n  /**\n   *  Supported params for hCaptcha script:\n   *   https://github.com/hCaptcha/hcaptcha-loader#props\n   *   (starting from 'apihost')\n   *  Supported params for reCAPTCHA script:\n   *   https://developers.google.com/recaptcha/docs/display#javascript_resource_apijs_parameters\n  * */\n  _getCaptchaUrl(defaultBaseUrl, settingsKey) {\n    const locale = this.options.settings.get('language');\n    const scriptSource = this.options.settings.get(`${settingsKey}.scriptSource`);\n    const scriptParams = this.options.settings.get(`${settingsKey}.scriptParams`);\n\n    const baseUrl = scriptSource || defaultBaseUrl;\n    const params = {\n      ...scriptParams,\n      onload: OktaSignInWidgetOnCaptchaLoadedCallback,\n      render: 'explicit',\n      hl: locale || navigator.language,\n    };\n    const query = Util.searchParamsToString(params);\n    return baseUrl + '?' + query;\n  },\n\n});\n"],"names":["OktaSignInWidgetOnCaptchaLoadedCallback","OktaSignInWidgetOnCaptchaSolvedCallback","HCAPTCHA_URL","RECAPTCHAV2_URL","View","extend","className","template","getTemplateData","captchaConfig","type","siteKey","isCaptchaConfigured","onCaptchaSolvedCallback","initialize","options","appState","get","_addCaptcha","remove","prototype","apply","arguments","window","hcaptcha","undefined","grecaptcha","onCaptchaSolved","token","captchaObject","_getCaptchaOject","captchaId","$el","find","attr","reset","fieldName","name","model","set","trigger","onCaptchaLoaded","render","sitekey","callback","_addHCaptchaFooter","_loadCaptchaLib","_getCaptchaUrl","url","scriptTag","document","createElement","src","async","defer","getElementById","Enums","WIDGET_CONTAINER_ID","appendChild","footerContainer","getElementsByClassName","WIDGET_FOOTER_CLASS","length","insertAdjacentHTML","defaultBaseUrl","settingsKey","locale","settings","scriptSource","scriptParams","baseUrl","params","onload","hl","navigator","language","query","Util","searchParamsToString"],"mappings":"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"}