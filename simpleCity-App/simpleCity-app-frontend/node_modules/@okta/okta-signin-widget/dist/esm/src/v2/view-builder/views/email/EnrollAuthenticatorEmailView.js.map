{"version":3,"file":"EnrollAuthenticatorEmailView.js","sources":["../../../../../../../src/v2/view-builder/views/email/EnrollAuthenticatorEmailView.js"],"sourcesContent":["import BaseAuthenticatorEmailView from './BaseAuthenticatorEmailView';\nimport { getCheckYourEmailTitle, getEnterCodeLink, getCheckYourEmailEnrollTitle } from './AuthenticatorEmailViewUtil';\n\nconst BaseAuthenticatorEmailForm = BaseAuthenticatorEmailView.prototype.Body;\n\nconst Body = BaseAuthenticatorEmailForm.extend(\n  Object.assign({\n    resendEmailAction: 'currentAuthenticator-resend',\n\n    initialize() {\n      BaseAuthenticatorEmailForm.prototype.initialize.apply(this, arguments);\n\n      const email = this.options.appState.get('user')?.profile?.email || this.options.appState.get('user')?.identifier\n       || {};\n\n      const useEmailMagicLinkValue = this.isUseEmailMagicLink();\n\n      if (useEmailMagicLinkValue !== undefined) {\n        \n        this.noButtonBar = true;\n        this.events['click .enter-auth-code-instead-link'] = 'showAuthCodeEntry';\n\n        if (useEmailMagicLinkValue) {\n          this.add(getEnterCodeLink(), {\n            prepend: true,\n            selector: '.o-form-error-container',\n          });\n        } \n  \n        this.add(getCheckYourEmailTitle(), {\n          prepend: true,\n          selector: '.o-form-error-container',\n          options: { email, useEmailMagicLinkValue },\n        });\n      } else {\n        this.add(getCheckYourEmailEnrollTitle(), {\n          prepend: true,\n          selector: '.o-form-error-container',\n        });\n      }\n    },\n\n    postRender() {\n      BaseAuthenticatorEmailForm.prototype.postRender.apply(this, arguments);\n      if (this.isUseEmailMagicLink() !== undefined) {\n        if (this.isUseEmailMagicLink()) {\n          this.showCodeEntryField(false);\n        } else {\n          this.noButtonBar = false;\n        }\n      }\n    },\n\n    isUseEmailMagicLink() {\n      return this.options.appState.get('currentAuthenticator')?.\n        contextualData?.useEmailMagicLink;\n    },\n\n    showAuthCodeEntry() {\n      this.noButtonBar = false;\n      this.render();\n\n      this.showCodeEntryField(true);\n      this.removeEnterAuthCodeInsteadLink();\n    },\n\n    showCodeEntryField(show = true) {\n      const $textField = this.$el.find('.o-form-fieldset-container');\n      $textField.toggle(show);\n    },\n\n    removeEnterAuthCodeInsteadLink() {\n      this.$el.find('.enter-auth-code-instead-link').remove();\n    },\n  })\n);\n\nexport default BaseAuthenticatorEmailView.extend({\n  Body,\n});\n"],"names":["BaseAuthenticatorEmailForm","BaseAuthenticatorEmailView","prototype","Body","extend","Object","assign","resendEmailAction","initialize","apply","arguments","email","options","appState","get","profile","identifier","useEmailMagicLinkValue","isUseEmailMagicLink","undefined","noButtonBar","events","add","getEnterCodeLink","prepend","selector","getCheckYourEmailTitle","getCheckYourEmailEnrollTitle","postRender","showCodeEntryField","contextualData","useEmailMagicLink","showAuthCodeEntry","render","removeEnterAuthCodeInsteadLink","show","$textField","$el","find","toggle","remove"],"mappings":"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"}