{"version":3,"file":"ChallengeAuthenticatorOnPremView.js","sources":["../../../../../../../src/v2/view-builder/views/on-prem/ChallengeAuthenticatorOnPremView.js"],"sourcesContent":["import { loc } from '@okta/courage';\nimport { BaseForm } from '../../internals';\nimport BaseAuthenticatorView from '../../components/BaseAuthenticatorView';\n\nconst ON_PREM_TOKEN_CHANGE_KEY = 'errors.E0000113';\n\nconst Body = BaseForm.extend({\n\n  className: 'on-prem-authenticator-verify',\n\n  modelEvents: {\n    'error': '_checkTokenChange'\n  },\n\n  title() {\n    const vendorName =\n      this.options.appState.getAuthenticatorDisplayName() ||\n      loc('oie.on_prem.authenticator.default.vendorName', 'login');\n    return loc('oie.on_prem.verify.title', 'login', [vendorName]);\n  },\n\n  _checkTokenChange(model, convertedErrors) {\n    const errorSummaryKeys = convertedErrors?.responseJSON?.errorSummaryKeys;\n    if (errorSummaryKeys && errorSummaryKeys.includes(ON_PREM_TOKEN_CHANGE_KEY)) {\n      // this means we are in change pin, so we should clear out answer input\n      this.model.set('credentials.passcode', '');\n      this.render();\n    }\n  },\n\n  save() {\n    return loc('mfa.challenge.verify', 'login');\n  },\n});\n\nexport default BaseAuthenticatorView.extend({\n  Body,\n});\n"],"names":["ON_PREM_TOKEN_CHANGE_KEY","Body","BaseForm","extend","className","modelEvents","title","vendorName","options","appState","getAuthenticatorDisplayName","loc","_checkTokenChange","model","convertedErrors","errorSummaryKeys","responseJSON","includes","set","render","save","BaseAuthenticatorView"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,MAAMA,wBAAwB,GAAG,iBAAiB,CAAA;AAElD,MAAMC,IAAI,GAAGC,QAAQ,CAACC,MAAM,CAAC;AAE3BC,EAAAA,SAAS,EAAE,8BAA8B;AAEzCC,EAAAA,WAAW,EAAE;AACX,IAAA,OAAO,EAAE,mBAAA;GACV;AAEDC,EAAAA,KAAK,EAAG,YAAA;AACN,IAAA,MAAMC,UAAU,GACd,IAAI,CAACC,OAAO,CAACC,QAAQ,CAACC,2BAA2B,EAAE,IACnDC,GAAG,CAAC,8CAA8C,EAAE,OAAO,CAAC,CAAA;IAC9D,OAAOA,GAAG,CAAC,0BAA0B,EAAE,OAAO,EAAE,CAACJ,UAAU,CAAC,CAAC,CAAA;GAC9D;AAEDK,EAAAA,iBAAiB,EAACC,UAAAA,KAAK,EAAEC,eAAe,EAAE;AAAA,IAAA,IAAA,qBAAA,CAAA;IACxC,MAAMC,gBAAgB,GAAGD,eAAe,KAAfA,IAAAA,IAAAA,eAAe,KAAfA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,CAAAA,qBAAAA,GAAAA,eAAe,CAAEE,YAAY,MAA7B,IAAA,IAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,qBAAA,CAA+BD,gBAAgB,CAAA;IACxE,IAAIA,gBAAgB,IAAIA,gBAAgB,CAACE,QAAQ,CAACjB,wBAAwB,CAAC,EAAE;AAC3E;MACA,IAAI,CAACa,KAAK,CAACK,GAAG,CAAC,sBAAsB,EAAE,EAAE,CAAC,CAAA;MAC1C,IAAI,CAACC,MAAM,EAAE,CAAA;AACf,KAAA;GACD;AAEDC,EAAAA,IAAI,EAAG,YAAA;AACL,IAAA,OAAOT,GAAG,CAAC,sBAAsB,EAAE,OAAO,CAAC,CAAA;AAC7C,GAAA;AACF,CAAC,CAAC,CAAA;AAEF,uCAAeU,qBAAqB,CAAClB,MAAM,CAAC;AAC1CF,EAAAA,IAAI,EAAJA,IAAAA;AACF,CAAC,CAAC;;;;"}