{"version":3,"file":"LanguageUtil.js","sources":["../../../../src/util/LanguageUtil.js"],"sourcesContent":["import Bundles from 'util/Bundles';\nimport config from 'config/config.json';\n\nfunction loadLanguage(appState, settings) {\n  const languageCode = appState.get('languageCode') || settings.get('languageCode') || config.defaultLanguage;\n  const i18n = settings.get('i18n');\n  const assetBaseUrl = settings.get('assets.baseUrl');\n  const assetRewrite = settings.get('assets.rewrite');\n  const supportedLanguages = settings.get('supportedLanguages');\n\n  const timeout = setTimeout(function() {\n    // Trigger a spinner if we're waiting on a request for a new language.\n    appState.trigger('loading', true);\n  }, 200);\n\n  return Bundles.loadLanguage(languageCode, i18n, {\n    baseUrl: assetBaseUrl,\n    rewrite: assetRewrite,\n  }, supportedLanguages).then(function() {\n    clearTimeout(timeout);\n    appState.trigger('loading', false);\n  });\n  // TODO: what if load language error?\n}\n\nexport default {\n  loadLanguage,\n};\n"],"names":["loadLanguage","appState","settings","languageCode","get","config","defaultLanguage","i18n","assetBaseUrl","assetRewrite","supportedLanguages","timeout","setTimeout","trigger","Bundles","baseUrl","rewrite","then","clearTimeout"],"mappings":";;;AAGA,SAASA,YAAY,CAACC,QAAQ,EAAEC,QAAQ,EAAE;AACxC,EAAA,MAAMC,YAAY,GAAGF,QAAQ,CAACG,GAAG,CAAC,cAAc,CAAC,IAAIF,QAAQ,CAACE,GAAG,CAAC,cAAc,CAAC,IAAIC,MAAM,CAACC,eAAe,CAAA;AAC3G,EAAA,MAAMC,IAAI,GAAGL,QAAQ,CAACE,GAAG,CAAC,MAAM,CAAC,CAAA;AACjC,EAAA,MAAMI,YAAY,GAAGN,QAAQ,CAACE,GAAG,CAAC,gBAAgB,CAAC,CAAA;AACnD,EAAA,MAAMK,YAAY,GAAGP,QAAQ,CAACE,GAAG,CAAC,gBAAgB,CAAC,CAAA;AACnD,EAAA,MAAMM,kBAAkB,GAAGR,QAAQ,CAACE,GAAG,CAAC,oBAAoB,CAAC,CAAA;AAE7D,EAAA,MAAMO,OAAO,GAAGC,UAAU,CAAC,YAAW;AACpC;AACAX,IAAAA,QAAQ,CAACY,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,CAAA;GAClC,EAAE,GAAG,CAAC,CAAA;AAEP,EAAA,OAAOC,OAAO,CAACd,YAAY,CAACG,YAAY,EAAEI,IAAI,EAAE;AAC9CQ,IAAAA,OAAO,EAAEP,YAAY;AACrBQ,IAAAA,OAAO,EAAEP,YAAAA;AACX,GAAC,EAAEC,kBAAkB,CAAC,CAACO,IAAI,CAAC,YAAW;IACrCC,YAAY,CAACP,OAAO,CAAC,CAAA;AACrBV,IAAAA,QAAQ,CAACY,OAAO,CAAC,SAAS,EAAE,KAAK,CAAC,CAAA;AACpC,GAAC,CAAC,CAAA;AACF;AACF,CAAA;;AAEA,mBAAe;AACbb,EAAAA,YAAY,EAAZA,YAAAA;AACF,CAAC;;;;"}