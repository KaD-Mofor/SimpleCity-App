{"version":3,"file":"Settings.js","sources":["../../../../src/models/Settings.ts"],"sourcesContent":["/* eslint max-statements: [2, 22],  complexity: [2, 12] */\n\n/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { _, Model, loc, internal, ModelProperty } from '@okta/courage';\nimport config from 'config/config.json';\nimport hbs from '@okta/handlebars-inline-precompile';\nimport Q from 'q';\nimport BrowserFeatures from 'util/BrowserFeatures';\nimport {\n  ConfigError,\n  UnsupportedBrowserError\n} from 'util/Errors';\nimport IDP from 'util/IDP';\nimport Logger from 'util/Logger';\nimport Util from 'util/Util';\nimport CountryUtil from 'util/CountryUtil';\nimport { OktaAuth } from '@okta/okta-auth-js';\nconst SharedUtil = internal.util.Util;\nconst assetBaseUrlTpl = hbs('https://global.oktacdn.com/okta-signin-widget/{{version}}');\n\nconst local: Record<string, ModelProperty> = {\n  authClient: ['object', false, undefined],\n  baseUrl: ['string', true],\n  recoveryToken: ['string', false, undefined],\n  stateToken: ['string', false, undefined],\n  username: ['string', false],\n  relayState: ['string', false],\n\n  // These two settings are aliases. Setting either value will set `backToSignInUri`\n  signOutLink: ['string', false], // for backward compatibility\n  backToSignInLink: ['string', false], // preferred setting\n\n  redirect: {\n    type: 'string',\n    values: ['never', 'always', 'auto'],\n    value: 'auto',\n  },\n\n  // allows bootstrapping the Widget into a specific view such\n  // as register or forgot password\n  flow: ['string', false, 'default'],\n\n  // Function to transform the username before passing it to the API\n  // for Primary Auth, Forgot Password and Unlock Account.\n  transformUsername: ['function', false],\n\n  // CALLBACKS\n  globalSuccessFn: 'function',\n  globalErrorFn: 'function',\n  processCreds: 'function',\n  hooks: 'object',\n\n  // IMAGES\n  logo: 'string',\n  logoText: ['string', false],\n  helpSupportNumber: 'string',\n\n  // <OIE>\n  // attribute to hold proxy (fake) idx response\n  // to render static pages without initiating idx pipeline\n  proxyIdxResponse: ['object', false],\n\n  // <OIE>\n  // By default, state handle will be saved to session storage\n  // and will be clear when terminal error or success redirect.\n  // Set this flag to true if you want to override this behavior.\n  // a.k.a dishonor the state handle stored in session storage.\n  overrideExistingStateToken: ['boolean', false, false],\n\n  // FEATURES\n  'features.router': ['boolean', true, false],\n  'features.securityImage': ['boolean', true, false],\n  'features.rememberMe': ['boolean', true, true],\n  'features.autoPush': ['boolean', true, false],\n  'features.smsRecovery': ['boolean', true, false],\n  'features.callRecovery': ['boolean', true, false],\n  'features.emailRecovery': ['boolean', false, true],\n  'features.webauthn': ['boolean', true, false],\n  'features.selfServiceUnlock': ['boolean', true, false],\n  'features.multiOptionalFactorEnroll': ['boolean', true, false],\n  'features.deviceFingerprinting': ['boolean', false, false],\n  'features.hideSignOutLinkInMFA': ['boolean', false, false],\n  'features.skipIdpFactorVerificationBtn': ['boolean', false, false],\n  'features.hideBackToSignInForReset': ['boolean', false, false],\n  'features.customExpiredPassword': ['boolean', true, false],\n  'features.registration': ['boolean', false, false],\n  'features.idpDiscovery': ['boolean', false, false],\n  'features.passwordlessAuth': ['boolean', false, false],\n  'features.showPasswordToggleOnSignInPage': ['boolean', false, false],\n  'features.trackTypingPattern': ['boolean', false, false],\n  'features.redirectByFormSubmit': ['boolean', false, false],\n  'features.useDeviceFingerprintForSecurityImage': ['boolean', false, true],\n  'features.showPasswordRequirementsAsHtmlList': ['boolean', false, false],\n  'features.mfaOnlyFlow': ['boolean', false, false],\n  'features.scrollOnError': ['boolean', false, true],\n  'features.showKeepMeSignedIn': ['boolean', false, true],\n  'features.showIdentifier': ['boolean', false, true],\n  'features.autoFocus': ['boolean', false, true],\n  'features.showSessionRevocation': ['boolean', false, false],\n  'features.disableAutocomplete': ['boolean', false, false],\n\n  defaultCountryCode: ['string', false, 'US'],\n\n  // I18N\n  language: ['any', false], // Can be a string or a function\n  i18n: ['object', false],\n\n  // ASSETS\n  'assets.baseUrl': ['string', false],\n  'assets.rewrite': {\n    type: 'function',\n    value: _.identity,\n  },\n  'assets.languages': ['array', false],\n\n  // OAUTH2\n  issuer: 'string',\n  clientId: 'string',\n  redirectUri: 'string',\n  state: 'string',\n  nonce: 'string',\n  scopes: 'array',\n  codeChallenge: 'string',\n  codeChallengeMethod: ['string', false],\n  oAuthTimeout: ['number', false],\n\n  authScheme: ['string', false, 'OAUTH2'],\n\n  // External IdPs\n  idps: ['array', false, []],\n  idpDisplay: {\n    type: 'string',\n    values: ['PRIMARY', 'SECONDARY'],\n    value: 'SECONDARY',\n  },\n\n  // HELP LINKS\n  'helpLinks.help': 'string',\n  'helpLinks.forgotPassword': 'string',\n  'helpLinks.unlock': 'string',\n  'helpLinks.custom': 'array',\n  'helpLinks.factorPage.href': 'string',\n  'helpLinks.factorPage.text': 'string',\n\n  //Custom Buttons\n  customButtons: ['array', false, []],\n\n  //Registration\n  policyId: 'string',\n  'registration.click': 'function',\n  'registration.parseSchema': 'function',\n  'registration.preSubmit': 'function',\n  'registration.postSubmit': 'function',\n\n  //Consent\n  'consent.cancel': 'function',\n\n  //IDP Discovery\n  'idpDiscovery.requestContext': 'string',\n\n  //Colors\n  'colors.brand': 'string',\n\n  //cspNonce\n  'cspNonce': 'string',\n\n  //Descriptions\n  brandName: 'string',\n\n  //PIV\n  piv: ['object', false, {}],\n\n  //Email verify callback\n  otp: 'string',\n\n  //Support classic engine\n  useClassicEngine: ['boolean', false, false],\n\n  //hCaptcha script source URI\n  'hcaptcha.scriptSource': ['string', false],\n  //query params for hCaptcha script source URI\n  'hcaptcha.scriptParams': ['object', false, {}],\n\n  //reCAPTCHA script source URI\n  'recaptcha.scriptSource': ['string', false],\n};\n\nconst derived: Record<string, ModelProperty>  = {\n  backToSignInUri: {\n    deps: ['backToSignInLink', 'signOutLink'],\n    fn: function(backToSignInLink, signOutLink) {\n      return backToSignInLink || signOutLink; // prefer backToSignInLink over signOutLink, but they are aliases\n    }\n  },\n  showPasswordToggle: {\n    deps: ['features.showPasswordToggleOnSignInPage'],\n    fn: function() {\n      // showPasswordToggle is for OIE only.\n      // Used to default showPasswordToggleOnSignInPage to true.\n      const defaultValue = true;\n      const customizedValue = this.options?.features?.showPasswordToggleOnSignInPage ??\n        this.options?.['features.showPasswordToggleOnSignInPage'];\n      return customizedValue ?? defaultValue;\n    },\n    cache: true,\n  },\n  redirectUtilFn: {\n    deps: ['features.redirectByFormSubmit'],\n    fn: function(redirectByFormSubmit) {\n      return redirectByFormSubmit ? Util.redirectWithFormGet.bind(Util) : SharedUtil.redirect.bind(SharedUtil);\n    },\n    cache: true,\n  },\n  supportedLanguages: {\n    deps: ['i18n', 'language', 'assets.languages'],\n    fn: function(i18n, language, hostedLanguages) {\n      // By default, the language be automatically detected from the browser\n      // Developers can specify the language. It will be added to the supportedLanguages list.\n      // Developers can also provide a list of languages with hosted assets, these replace the default list\n      const supportedLanguages = hostedLanguages || config.supportedLanguages;\n      return _.union(\n        supportedLanguages,\n        _.keys(i18n),\n        _.isString(language) ? [language] : []\n      );\n    },\n    cache: true,\n  },\n  languageCode: {\n    deps: ['language', 'supportedLanguages'],\n    fn: function(language, supportedLanguages) {\n      const userLanguages = BrowserFeatures.getUserLanguages();\n\n      // TODO: revisit this fix - OKTA-491150\n      userLanguages.forEach((val, idx) => {\n        if (val === 'nl') {\n          userLanguages[idx] = 'nl-NL';\n        }\n        else if (val === 'pt') {\n          userLanguages[idx] = 'pt-BR';\n        }\n      });\n\n      const preferred = _.clone(userLanguages);\n\n      const supportedLowerCase = Util.toLower(supportedLanguages);\n\n      // Any developer defined \"language\" takes highest priority:\n      // As a string, i.e. 'en', 'ja', 'zh-CN'\n      if (_.isString(language)) {\n        preferred.unshift(language);\n      } else if (_.isFunction(language)) {\n        // As a callback function, which is passed the list of supported\n        // languages and detected user languages. This function must return\n        // a languageCode, i.e. 'en', 'ja', 'zh-CN'\n        preferred.unshift(language(supportedLanguages, userLanguages));\n      }\n\n      // Add default language, and expand to include any language\n      // codes that do not include region, dialect, etc.\n      preferred.push(config.defaultLanguage);\n      const expanded = Util.toLower(Util.expandLanguages(preferred));\n\n      // Perform a case insensitive search - this is necessary in the case\n      // of browsers like Safari\n      let i;\n      let supportedPos;\n\n      for (i = 0; i < expanded.length; i++) {\n        supportedPos = supportedLowerCase.indexOf(expanded[i]);\n        if (supportedPos > -1) {\n          return supportedLanguages[supportedPos];\n        }\n      }\n    },\n  },\n  countryCode: {\n    deps: ['defaultCountryCode'],\n    fn: function(defaultCountryCode) {\n      const countries = CountryUtil.getCountries();\n      return Object.keys(countries).includes(defaultCountryCode)\n        ? defaultCountryCode : 'US';\n    },\n  },\n  mode: {\n    deps: ['codeChallenge'],\n    fn: function(codeChallenge) {\n      if (codeChallenge) {\n        return 'remediation';\n      }\n      return 'relying-party';\n    }\n  },\n  oauth2Enabled: {\n    deps: ['clientId', 'authScheme', 'authClient'],\n    fn: function(clientId, authScheme, authClient) {\n       if (!clientId && authClient) {\n        clientId = authClient.options.clientId;\n      }\n      return (!!clientId) && authScheme.toLowerCase() === 'oauth2';\n    },\n    cache: true,\n  },\n  // Redirect Uri to provide in the oauth API\n  oauthRedirectUri: {\n    deps: ['redirectUri'],\n    fn: function(redirectUri) {\n      if (redirectUri) {\n        return redirectUri;\n      }\n\n      let origin = window.location.origin;\n\n      // IE8\n      if (!origin) {\n        const href = window.location.href;\n        const path = window.location.pathname;\n\n        if (path !== '') {\n          origin = href.substring(0, href.lastIndexOf(path));\n        }\n      }\n\n      return encodeURI(origin);\n    },\n  },\n  // Adjusts the idps passed into the widget based on if they get explicit support\n  configuredSocialIdps: {\n    deps: ['idps'],\n    fn: function(idps) {\n      return _.map(idps, function(idpConfig) {\n        const idp = _.clone(idpConfig);\n\n        let type = idp.type && idp.type.toLowerCase();\n\n        if (!(type && _.contains(IDP.SUPPORTED_SOCIAL_IDPS, type))) {\n          type = 'general-idp';\n          idp.text = idp.text || '{ Please provide a text value }';\n        }\n\n        idp.className = [\n          'social-auth-button',\n          'social-auth-' + type + '-button ',\n          idp.className ? idp.className : '',\n        ].join(' ');\n        idp.dataAttr = 'social-auth-' + type + '-button';\n        idp.i18nKey = 'socialauth.' + type + '.label';\n        return idp;\n      });\n    },\n    cache: true,\n  },\n  // Can support piv authentication\n  hasPivCard: {\n    deps: ['piv'],\n    fn: function(piv) {\n      return piv && piv.certAuthUrl;\n    },\n    cache: true,\n  },\n  // social auth buttons order - 'above'/'below' the primary auth form (boolean)\n  socialAuthPositionTop: {\n    deps: ['configuredSocialIdps', 'hasPivCard', 'idpDisplay'],\n    fn: function(configuredSocialIdps, hasPivCard, idpDisplay) {\n      return (!_.isEmpty(configuredSocialIdps) || hasPivCard) && idpDisplay.toUpperCase() === 'PRIMARY';\n    },\n    cache: true,\n  },\n  hasConfiguredButtons: {\n    deps: ['configuredSocialIdps', 'customButtons', 'hasPivCard'],\n    fn: function(configuredSocialIdps, customButtons, hasPivCard) {\n      return !_.isEmpty(configuredSocialIdps) || !_.isEmpty(customButtons) || hasPivCard;\n    },\n    cache: true,\n  }\n};\n\ntype SettingsProps = typeof local & typeof derived;\n\nexport default class Settings extends Model {\n  authClient:OktaAuth;\n\n  constructor(attributes, options) {\n    // base class constructor will call preinitialize() and initialize() and compute derived properties\n    super(attributes, options);\n\n    // apply languageCode\n    const authClient = this.getAuthClient();\n    this.setAcceptLanguageHeader(authClient);\n  }\n\n  get<A extends Backbone._StringKey<SettingsProps>>(attributeName: A): any {\n    return Model.prototype.get.call(this, attributeName);\n  }\n\n  preinitialize(...args) {\n    this.local = local;\n    this.derived = derived;\n    Model.prototype.preinitialize.apply(this, args);\n  }\n\n  initialize(options) {\n    options = options || {};\n    const { colors, authClient, flow } = options;\n    let { baseUrl } = options;\n\n    if (!baseUrl) {\n      // infer baseUrl from the issuer\n      // favor authClient API first\n      if (authClient) {\n        baseUrl = authClient.getIssuerOrigin();\n      } else {\n        // issuer can also be passed a top-level option or exist in authParams\n        const { authParams } = options;\n        let { issuer } = options;\n        issuer = issuer || authParams?.issuer;\n        baseUrl = issuer?.split('/oauth2/')[0];\n      }\n      this.set('baseUrl', baseUrl);\n    }\n\n    // If `flow` and `authClient` instance are passed to settings, set flow in auth client\n    if (authClient && flow) {\n      authClient.idx.setFlow(flow);\n    }\n\n    if (!baseUrl) {\n      this.callGlobalError(new ConfigError(loc('error.required.baseUrl')));\n    } else if (colors && _.isString(colors.brand) && !colors.brand.match(/^#[0-9A-Fa-f]{6}$/)) {\n      this.callGlobalError(new ConfigError(loc('error.invalid.colors.brand')));\n    } else if (BrowserFeatures.corsIsNotSupported()) {\n      this.callGlobalError(new UnsupportedBrowserError(loc('error.unsupported.cors')));\n    }\n  }\n\n  setAcceptLanguageHeader(authClient) {\n    if (authClient) {\n      authClient.http.setRequestHeader('Accept-Language', this.get('languageCode'));\n    }\n  }\n\n  setAuthClient(authClient) {\n    this.set('authClient', authClient);\n    this.setAcceptLanguageHeader(authClient);\n  }\n\n  getAuthClient() {\n    return this.get('authClient');\n  }\n\n  set(...args: any[]) {\n    try {\n      return Model.prototype.set.apply(this, args);\n    } catch (e) {\n      const message = e.message ? e.message : e;\n\n      this.callGlobalError(new ConfigError(message));\n    }\n  }\n\n  // Invokes the global success function. This should only be called on a\n  // terminal part of the code (i.e. authStatus SUCCESS or after sending\n  // a recovery email)\n  callGlobalSuccess(status, data) {\n    const res = _.extend(data, { status: status });\n    // Defer this to ensure that our functions have rendered completely\n    // before invoking their function\n\n    _.defer(_.partial(this.get('globalSuccessFn'), res));\n  }\n\n  // Invokes the global error function. This should only be called on non\n  // recoverable errors (i.e. configuration errors, browser unsupported\n  // errors, etc)\n  callGlobalError(err) {\n    const globalErrorFn = this.get('globalErrorFn') || this.options.globalErrorFn;\n    // Note: Must use \"this.options.globalErrorFn\" when they've passed invalid\n    // arguments - globalErrorFn will not have been set yet\n\n    if (globalErrorFn) {\n      globalErrorFn(err);\n    } else {\n      // Only throw the error if they have not registered a globalErrorFn\n      throw err;\n    }\n  }\n\n  // Get the username by applying the transform function if it exists.\n  transformUsername(username, operation) {\n    const transformFn = this.get('transformUsername');\n\n    if (transformFn && _.isFunction(transformFn)) {\n      return transformFn(username, operation);\n    }\n    return username;\n  }\n\n  processCreds(creds) {\n    const processCreds = this.get('processCreds');\n\n    return Q.Promise(function(resolve) {\n      if (!_.isFunction(processCreds)) {\n        resolve();\n      } else if (processCreds.length === 2) {\n        processCreds(creds, resolve);\n      } else {\n        processCreds(creds);\n        resolve();\n      }\n    });\n  }\n\n  parseRegistrationSchema(schema, onSuccess, onFailure) {\n    const parseSchema = this.get('registration.parseSchema');\n\n    //check for parseSchema callback\n    if (_.isFunction(parseSchema)) {\n      parseSchema(\n        schema,\n        function(schema) {\n          onSuccess(schema);\n        },\n        function(error) {\n          error = error || { errorSummary: loc('registration.default.callbackhook.error') };\n          error['callback'] = 'parseSchema';\n          onFailure(error);\n        }\n      );\n    } else {\n      //no callback\n      onSuccess(schema);\n    }\n  }\n\n  preRegistrationSubmit(postData, onSuccess, onFailure) {\n    const preSubmit = this.get('registration.preSubmit');\n\n    //check for preSubmit callback\n    if (_.isFunction(preSubmit)) {\n      preSubmit(\n        postData,\n        function(postData) {\n          onSuccess(postData);\n        },\n        function(error) {\n          error = error || { errorSummary: loc('registration.default.callbackhook.error') };\n          error['callback'] = 'preSubmit';\n          onFailure(error);\n        }\n      );\n    } else {\n      //no callback\n      onSuccess(postData);\n    }\n  }\n\n  postRegistrationSubmit(response, onSuccess, onFailure) {\n    const postSubmit = this.get('registration.postSubmit');\n\n    //check for postSubmit callback\n    if (_.isFunction(postSubmit)) {\n      postSubmit(\n        response,\n        function(response) {\n          onSuccess(response);\n        },\n        function(error) {\n          error = error || { errorSummary: loc('registration.default.callbackhook.error') };\n          error['callback'] = 'postSubmit';\n          onFailure(error);\n        }\n      );\n    } else {\n      //no callback\n      onSuccess(response);\n    }\n  }\n\n  // Use the parse function to transform config options to the standard\n  // settings we currently support. This is a good place to deprecate old\n  // option formats.\n  parse(options) {\n    if (options.labels || options.country) {\n      Logger.deprecate('Use \"i18n\" instead of \"labels\" and \"country\"');\n      const overrides = options.labels || {};\n\n      _.each(options.country, function(val, key) {\n        overrides['country.' + key] = val;\n      });\n      // Old behavior is to treat the override as a global override, so we\n      // need to add these overrides to each language\n      options.i18n = {};\n      _.each(config.supportedLanguages, function(language) {\n        options.i18n[language] = overrides;\n      });\n      delete options.labels;\n      delete options.country;\n    }\n\n    // Default the assets.baseUrl to the cdn, or remove any trailing slashes\n    if (!options.assets) {\n      options.assets = {};\n    }\n    const abu = options.assets.baseUrl;\n\n    if (!abu) {\n      options.assets.baseUrl = assetBaseUrlTpl({ version: config.version });\n    } else if (abu[abu.length - 1] === '/') {\n      options.assets.baseUrl = abu.substring(0, abu.length - 1);\n    }\n\n    return options;\n  }\n\n  isDsTheme() {\n    return false;\n  }\n\n}\n"],"names":["SharedUtil","internal","util","Util","assetBaseUrlTpl","local","authClient","undefined","baseUrl","recoveryToken","stateToken","username","relayState","signOutLink","backToSignInLink","redirect","type","values","value","flow","transformUsername","globalSuccessFn","globalErrorFn","processCreds","hooks","logo","logoText","helpSupportNumber","proxyIdxResponse","overrideExistingStateToken","defaultCountryCode","language","i18n","_","identity","issuer","clientId","redirectUri","state","nonce","scopes","codeChallenge","codeChallengeMethod","oAuthTimeout","authScheme","idps","idpDisplay","customButtons","policyId","brandName","piv","otp","useClassicEngine","derived","backToSignInUri","deps","fn","showPasswordToggle","defaultValue","customizedValue","options","features","showPasswordToggleOnSignInPage","cache","redirectUtilFn","redirectByFormSubmit","redirectWithFormGet","bind","supportedLanguages","hostedLanguages","config","union","keys","isString","languageCode","userLanguages","BrowserFeatures","getUserLanguages","forEach","val","idx","preferred","clone","supportedLowerCase","toLower","unshift","isFunction","push","defaultLanguage","expanded","expandLanguages","i","supportedPos","length","indexOf","countryCode","countries","CountryUtil","getCountries","Object","includes","mode","oauth2Enabled","toLowerCase","oauthRedirectUri","origin","window","location","href","path","pathname","substring","lastIndexOf","encodeURI","configuredSocialIdps","map","idpConfig","idp","contains","IDP","SUPPORTED_SOCIAL_IDPS","text","className","join","dataAttr","i18nKey","hasPivCard","certAuthUrl","socialAuthPositionTop","isEmpty","toUpperCase","hasConfiguredButtons","Settings","Model","constructor","attributes","getAuthClient","setAcceptLanguageHeader","get","attributeName","prototype","call","preinitialize","args","apply","initialize","colors","getIssuerOrigin","authParams","split","set","setFlow","callGlobalError","ConfigError","loc","brand","match","corsIsNotSupported","UnsupportedBrowserError","http","setRequestHeader","setAuthClient","e","message","callGlobalSuccess","status","data","res","extend","defer","partial","err","operation","transformFn","creds","Q","Promise","resolve","parseRegistrationSchema","schema","onSuccess","onFailure","parseSchema","error","errorSummary","preRegistrationSubmit","postData","preSubmit","postRegistrationSubmit","response","postSubmit","parse","labels","country","Logger","deprecate","overrides","each","key","assets","abu","version","isDsTheme"],"mappings":"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"}