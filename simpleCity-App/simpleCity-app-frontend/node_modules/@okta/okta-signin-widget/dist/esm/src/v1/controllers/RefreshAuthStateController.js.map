{"version":3,"file":"RefreshAuthStateController.js","sources":["../../../../../src/v1/controllers/RefreshAuthStateController.js"],"sourcesContent":["/* eslint-disable max-depth */\n/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport FormController from 'v1/util/FormController';\nexport default FormController.extend({\n  className: 'refresh-auth-state',\n\n  Model: {},\n\n  Form: {\n    noButtonBar: true,\n  },\n\n  preRender: function() {\n    const appState = this.options.appState;\n    const token = this.options.token;\n\n    this.model.startTransaction(function(authClient) {\n      appState.trigger('loading', true);\n      if (token) {\n        return authClient.tx.introspect({\n          stateToken: token,\n        });\n      }\n\n      // get stateToken from cookie\n      // currently only applies to old pipeline\n      if (authClient.tx.exists()) {\n        return authClient.tx.resume();\n      }\n\n      appState.trigger('navigate', '');\n    });\n  },\n\n  remove: function() {\n    this.options.appState.trigger('loading', false);\n    return FormController.prototype.remove.apply(this, arguments);\n  },\n});\n"],"names":["FormController","extend","className","Model","Form","noButtonBar","preRender","appState","options","token","model","startTransaction","authClient","trigger","tx","introspect","stateToken","exists","resume","remove","prototype","apply","arguments"],"mappings":";;AAAA;AAcA,iCAAeA,cAAc,CAACC,MAAM,CAAC;AACnCC,EAAAA,SAAS,EAAE,oBAAoB;EAE/BC,KAAK,EAAE,EAAE;AAETC,EAAAA,IAAI,EAAE;AACJC,IAAAA,WAAW,EAAE,IAAA;GACd;AAEDC,EAAAA,SAAS,EAAE,YAAW;AACpB,IAAA,MAAMC,QAAQ,GAAG,IAAI,CAACC,OAAO,CAACD,QAAQ,CAAA;AACtC,IAAA,MAAME,KAAK,GAAG,IAAI,CAACD,OAAO,CAACC,KAAK,CAAA;AAEhC,IAAA,IAAI,CAACC,KAAK,CAACC,gBAAgB,CAAC,UAASC,UAAU,EAAE;AAC/CL,MAAAA,QAAQ,CAACM,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,CAAA;AACjC,MAAA,IAAIJ,KAAK,EAAE;AACT,QAAA,OAAOG,UAAU,CAACE,EAAE,CAACC,UAAU,CAAC;AAC9BC,UAAAA,UAAU,EAAEP,KAAAA;AACd,SAAC,CAAC,CAAA;AACJ,OAAA;;AAEA;AACA;AACA,MAAA,IAAIG,UAAU,CAACE,EAAE,CAACG,MAAM,EAAE,EAAE;AAC1B,QAAA,OAAOL,UAAU,CAACE,EAAE,CAACI,MAAM,EAAE,CAAA;AAC/B,OAAA;AAEAX,MAAAA,QAAQ,CAACM,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,CAAA;AAClC,KAAC,CAAC,CAAA;GACH;AAEDM,EAAAA,MAAM,EAAE,YAAW;IACjB,IAAI,CAACX,OAAO,CAACD,QAAQ,CAACM,OAAO,CAAC,SAAS,EAAE,KAAK,CAAC,CAAA;IAC/C,OAAOb,cAAc,CAACoB,SAAS,CAACD,MAAM,CAACE,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC,CAAA;AAC/D,GAAA;AACF,CAAC,CAAC;;;;"}