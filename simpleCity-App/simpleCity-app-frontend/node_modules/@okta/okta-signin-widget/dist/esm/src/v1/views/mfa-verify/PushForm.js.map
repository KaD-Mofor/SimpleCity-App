{"version":3,"file":"PushForm.js","sources":["../../../../../../src/v1/views/mfa-verify/PushForm.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { _, Form, loc, View } from '@okta/courage';\nimport hbs from '@okta/handlebars-inline-precompile';\nimport Util from 'util/Util';\nimport NumberChallengeView from './NumberChallengeView';\n\nconst titleTpl = hbs('{{factorName}} ({{{deviceName}}})');\n// deviceName is escaped on BaseForm (see BaseForm's template)\n\nconst WARNING_TIMEOUT = 30000; // milliseconds\nconst PushFormwarningTemplate = View.extend({\n  className: 'okta-form-infobox-warning infobox infobox-warning',\n  attributes: {\n    'aria-live': 'polite',\n  },\n  template: hbs`\n      <span class=\"icon warning-16\"></span>\n      <p>{{warning}}</p>\n    `,\n});\n\nexport default Form.extend({\n  className: 'mfa-verify-push',\n  autoSave: true,\n  noCancelButton: true,\n  save: _.partial(loc, 'oktaverify.send', 'login'),\n  scrollOnError: false,\n  layout: 'o-form-theme',\n  attributes: { 'data-se': 'factor-push' },\n  events: {\n    submit: 'submit',\n  },\n\n  initialize: function() {\n    this.enabled = true;\n    this.listenTo(this.options.appState, 'change:isMfaRejected', this.handleRejectStateChange);\n\n    this.numberChallengeView = this.add(NumberChallengeView).last();\n    this.listenTo(this.options.appState, 'change:isWaitingForNumberChallenge', function(\n      state,\n      isWaitingForNumberChallenge\n    ) {\n      if (isWaitingForNumberChallenge || this.options.appState.get('lastAuthResponse').status === 'SUCCESS') {\n        this.clearWarnings();\n        this.$el.find('.button').hide();\n        this.numberChallengeView.$el.show();\n      } else {\n        this.numberChallengeView.$el.hide();\n        this.$el.find('.button').show();\n      }\n    });\n    this.listenTo(this.options.appState, 'change:isMfaTimeout', function(state, isMfaTimeout) {\n      this.setSubmitState(isMfaTimeout);\n      if (isMfaTimeout) {\n        this.showError(loc('oktaverify.timeout', 'login'));\n      }\n    });\n    this.listenTo(this.options.appState, 'change:isMfaRequired', function(state, isMfaRequired) {\n      if (isMfaRequired) {\n        this.clearErrors();\n        this.clearWarnings();\n      }\n    });\n    this.title = titleTpl({\n      factorName: this.model.get('factorLabel'),\n      deviceName: this.model.get('deviceName'),\n    });\n  },\n  setSubmitState: function(ableToSubmit) {\n    const button = this.$el.find('.button');\n    const a11ySpan = this.$el.find('.accessibility-text');\n    this.enabled = ableToSubmit;\n    if (ableToSubmit) {\n      button.removeClass('link-button-disabled');\n      button.prop('value', loc('oktaverify.send', 'login'));\n      button.prop('disabled', false);\n      if (a11ySpan) {\n        a11ySpan.remove();\n      }\n    } else {\n      button.addClass('link-button-disabled');\n      button.prop('value', loc('oktaverify.sent', 'login'));\n      button.prop('disabled', true);\n      this.add(\n        `<span class='accessibility-text' role='alert'>${loc('oktaverify.sent', 'login')}</span>`,\n      );\n    }\n  },\n  submit: function(e) {\n    if (e !== undefined) {\n      e.preventDefault();\n    }\n    if (this.enabled) {\n      this.setSubmitState(false);\n      this.doSave();\n    }\n  },\n  postRender: function() {\n    const factorsPolicyInfo = this.options.appState.get('factorsPolicyInfo');\n    const id = this.model.get('id');\n    const isAutoPushEnabled = this.settings.get('features.autoPush') && factorsPolicyInfo && factorsPolicyInfo[id]\n      ? factorsPolicyInfo[id]['autoPushEnabled']\n      : false;\n\n    if (isAutoPushEnabled) {\n      this.model.set('autoPush', true);\n      // bind after $el has been rendered, and trigger push once DOM is fully loaded\n      _.defer(_.bind(this.submit, this));\n    }\n  },\n  doSave: function() {\n    let warningTimeout;\n\n    this.clearErrors();\n    this.clearWarnings();\n    if (this.model.isValid()) {\n      this.listenToOnce(this.model, 'error', function() {\n        this.setSubmitState(true);\n        this.clearWarnings();\n        clearTimeout(warningTimeout);\n      });\n      this.trigger('save', this.model);\n      warningTimeout = Util.callAfterTimeout(() => {\n        if (!this.options.appState.get('isWaitingForNumberChallenge')) {\n          this.showWarning(loc('oktaverify.warning', 'login'));\n        }\n      }, WARNING_TIMEOUT);\n    }\n  },\n  showError: function(msg) {\n    this.clearWarnings();\n    this.model.trigger('error', this.model, { responseJSON: { errorSummary: msg } });\n  },\n  showWarning: function(msg) {\n    this.clearWarnings();\n    this.add(PushFormwarningTemplate, '.o-form-error-container', { options: { warning: msg } });\n  },\n  clearWarnings: function() {\n    this.$('.okta-form-infobox-warning').remove();\n  },\n  handleRejectStateChange: function(state, isMfaRejected) {\n    if (isMfaRejected) {\n      this.setSubmitState(isMfaRejected);\n      this.setRejectedErrorMessage();\n    }\n  },\n  setRejectedErrorMessage: function() {\n    // If rejection is due to outdated app, show error message per platform\n    // else show user rejected message.\n    if (this.options.appState.get('lastAuthResponse').factorResultMessage === 'OKTA_VERIFY_UPGRADE_REQUIRED') {\n      if (this.options.appState.get('factor').profile.platform === 'IOS') {\n        this.showError(loc('oktaverify.rejected.upgradeRequired.ios', 'login'));\n      } else {\n        this.showError(loc('oktaverify.rejected.upgradeRequired.android', 'login'));\n      }\n    } else {\n      this.showError(loc('oktaverify.rejected', 'login'));\n    }\n  },\n});\n"],"names":["titleTpl","WARNING_TIMEOUT","PushFormwarningTemplate","View","extend","className","attributes","template","Form","autoSave","noCancelButton","save","_","partial","loc","scrollOnError","layout","events","submit","initialize","enabled","listenTo","options","appState","handleRejectStateChange","numberChallengeView","add","NumberChallengeView","last","state","isWaitingForNumberChallenge","get","status","clearWarnings","$el","find","hide","show","isMfaTimeout","setSubmitState","showError","isMfaRequired","clearErrors","title","factorName","model","deviceName","ableToSubmit","button","a11ySpan","removeClass","prop","remove","addClass","e","undefined","preventDefault","doSave","postRender","factorsPolicyInfo","id","isAutoPushEnabled","settings","set","defer","bind","warningTimeout","isValid","listenToOnce","clearTimeout","trigger","Util","callAfterTimeout","showWarning","msg","responseJSON","errorSummary","warning","$","isMfaRejected","setRejectedErrorMessage","factorResultMessage","profile","platform"],"mappings":"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"}