{"version":3,"file":"BaseDuoAuthenticatorForm.js","sources":["../../../../../../../src/v2/view-builder/views/duo/BaseDuoAuthenticatorForm.js"],"sourcesContent":["import { loc, createCallout } from '@okta/courage';\nimport Duo from '@okta/duo';\nimport { BaseForm } from '../../internals';\n\nexport default BaseForm.extend({\n\n  noButtonBar: true,\n\n  postRender: function() {\n    const contextualData = this.getContextualData();\n    // This is the place to check contextualData.integrationType once we support more types\n    // Currently we only support IFRAME\n    const duoFrame = this.add(`<iframe frameborder=\"0\" title=\"'${this.title()}'\"></iframe>`).last();\n    try {\n      Duo.init({\n        host: contextualData.host,\n        sig_request: contextualData.signedToken, // eslint-disable-line camelcase\n        iframe: duoFrame.el,\n        post_action: (signedData) => { // eslint-disable-line camelcase\n          this.model.set('credentials.signatureData', signedData);\n          this.saveForm(this.model);\n        },\n      });\n    } catch (e) {\n      duoFrame.remove();\n      this.add(createCallout({\n        type: 'error',\n        subtitle: loc('oie.duo.iFrameError', 'login'),\n      }), '.o-form-error-container');\n      console.error(e); // eslint-disable-line no-console\n    }\n  },\n\n  getContextualData() {\n    // to be overriden\n  }\n});\n"],"names":["BaseForm","extend","noButtonBar","postRender","contextualData","getContextualData","duoFrame","add","title","last","Duo","init","host","sig_request","signedToken","iframe","el","post_action","signedData","model","set","saveForm","e","remove","createCallout","type","subtitle","loc"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,+BAAeA,QAAQ,CAACC,MAAM,CAAC;AAE7BC,EAAAA,WAAW,EAAE,IAAI;AAEjBC,EAAAA,UAAU,EAAE,YAAW;AACrB,IAAA,MAAMC,cAAc,GAAG,IAAI,CAACC,iBAAiB,EAAE,CAAA;AAC/C;AACA;AACA,IAAA,MAAMC,QAAQ,GAAG,IAAI,CAACC,GAAG,CAAE,CAAA,gCAAA,EAAkC,IAAI,CAACC,KAAK,EAAG,CAAA,YAAA,CAAa,CAAC,CAACC,IAAI,EAAE,CAAA;IAC/F,IAAI;MACFC,GAAG,CAACC,IAAI,CAAC;QACPC,IAAI,EAAER,cAAc,CAACQ,IAAI;QACzBC,WAAW,EAAET,cAAc,CAACU,WAAW;AAAE;QACzCC,MAAM,EAAET,QAAQ,CAACU,EAAE;QACnBC,WAAW,EAAGC,UAAU,IAAK;AAAE;UAC7B,IAAI,CAACC,KAAK,CAACC,GAAG,CAAC,2BAA2B,EAAEF,UAAU,CAAC,CAAA;AACvD,UAAA,IAAI,CAACG,QAAQ,CAAC,IAAI,CAACF,KAAK,CAAC,CAAA;AAC3B,SAAA;AACF,OAAC,CAAC,CAAA;KACH,CAAC,OAAOG,CAAC,EAAE;MACVhB,QAAQ,CAACiB,MAAM,EAAE,CAAA;AACjB,MAAA,IAAI,CAAChB,GAAG,CAACiB,aAAa,CAAC;AACrBC,QAAAA,IAAI,EAAE,OAAO;AACbC,QAAAA,QAAQ,EAAEC,GAAG,CAAC,qBAAqB,EAAE,OAAO,CAAA;OAC7C,CAAC,EAAE,yBAAyB,CAAC,CACb;AACnB,KAAA;GACD;AAEDtB,EAAAA,iBAAiB,EAAG,YAAA;AAClB;AAAA,GAAA;AAEJ,CAAC,CAAC;;;;"}