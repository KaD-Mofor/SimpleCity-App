{"version":3,"file":"ChallengeAuthenticatorEmailView.js","sources":["../../../../../../../src/v2/view-builder/views/email/ChallengeAuthenticatorEmailView.js"],"sourcesContent":["import BaseAuthenticatorEmailView from './BaseAuthenticatorEmailView';\nimport { getCheckYourEmailTitle, getEnterCodeLink } from './AuthenticatorEmailViewUtil';\n\nconst BaseAuthenticatorEmailForm = BaseAuthenticatorEmailView.prototype.Body;\n\nconst Body = BaseAuthenticatorEmailForm.extend(\n  Object.assign({\n    noButtonBar: true,\n    resendEmailAction: 'currentAuthenticatorEnrollment-resend',\n\n    events: {\n      'click .enter-auth-code-instead-link': 'showAuthCodeEntry',\n    },\n\n    initialize() {\n      BaseAuthenticatorEmailForm.prototype.initialize.apply(this, arguments);\n\n      const { email, secondaryEmail } =\n        this.options.currentViewState.relatesTo?.value?.profile || {};\n\n      const useEmailMagicLinkValue = this.isUseEmailMagicLink();\n\n      if (useEmailMagicLinkValue) {\n        this.add(getEnterCodeLink(), {\n          prepend: true,\n          selector: '.o-form-error-container',\n        });\n      }\n\n      this.add(getCheckYourEmailTitle(), {\n        prepend: true,\n        selector: '.o-form-error-container',\n        options: { email, secondaryEmail, useEmailMagicLinkValue },\n      });\n    },\n\n    postRender() {\n      BaseAuthenticatorEmailForm.prototype.postRender.apply(this, arguments);\n      if (this.isUseEmailMagicLink()) {\n        this.showCodeEntryField(false);\n      } else {\n        this.noButtonBar = false;\n      }\n    },\n\n    isUseEmailMagicLink() {\n      const useEmailMagicLink = this.options.appState.get('currentAuthenticatorEnrollment')?.\n        contextualData?.useEmailMagicLink;\n      return useEmailMagicLink !== undefined ? useEmailMagicLink : true;\n    },\n\n    showAuthCodeEntry() {\n      this.noButtonBar = false;\n      this.render();\n\n      this.showCodeEntryField(true);\n      this.removeEnterAuthCodeInsteadLink();\n    },\n\n    showCodeEntryField(show = true) {\n      const $textField = this.$el.find('.o-form-fieldset-container');\n      $textField.toggle(show);\n    },\n\n    removeEnterAuthCodeInsteadLink() {\n      this.$el.find('.enter-auth-code-instead-link').remove();\n    },\n  })\n);\n\nexport default BaseAuthenticatorEmailView.extend({\n  Body,\n});\n"],"names":["BaseAuthenticatorEmailForm","BaseAuthenticatorEmailView","prototype","Body","extend","Object","assign","noButtonBar","resendEmailAction","events","initialize","apply","arguments","email","secondaryEmail","options","currentViewState","relatesTo","value","profile","useEmailMagicLinkValue","isUseEmailMagicLink","add","getEnterCodeLink","prepend","selector","getCheckYourEmailTitle","postRender","showCodeEntryField","useEmailMagicLink","appState","get","contextualData","undefined","showAuthCodeEntry","render","removeEnterAuthCodeInsteadLink","show","$textField","$el","find","toggle","remove"],"mappings":";;;AAGA,MAAMA,0BAA0B,GAAGC,0BAA0B,CAACC,SAAS,CAACC,IAAI,CAAA;AAE5E,MAAMA,IAAI,GAAGH,0BAA0B,CAACI,MAAM,CAC5CC,MAAM,CAACC,MAAM,CAAC;AACZC,EAAAA,WAAW,EAAE,IAAI;AACjBC,EAAAA,iBAAiB,EAAE,uCAAuC;AAE1DC,EAAAA,MAAM,EAAE;AACN,IAAA,qCAAqC,EAAE,mBAAA;GACxC;AAEDC,EAAAA,UAAU,EAAG,YAAA;AAAA,IAAA,IAAA,qBAAA,EAAA,sBAAA,CAAA;IACXV,0BAA0B,CAACE,SAAS,CAACQ,UAAU,CAACC,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC,CAAA;IAEtE,MAAM;AAAEC,MAAAA,KAAK,EAALA,KAAK;AAAEC,MAAAA,cAAc,EAAdA,cAAAA;AAAe,KAAC,GAC7B,CAAI,CAAA,qBAAA,GAAA,IAAA,CAACC,OAAO,CAACC,gBAAgB,CAACC,SAAS,MAAvC,IAAA,IAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,CAAA,sBAAA,GAAA,qBAAA,CAAyCC,KAAK,MAA9C,IAAA,IAAA,sBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,sBAAA,CAAgDC,OAAO,KAAI,EAAE,CAAA;AAE/D,IAAA,MAAMC,sBAAsB,GAAG,IAAI,CAACC,mBAAmB,EAAE,CAAA;AAEzD,IAAA,IAAID,sBAAsB,EAAE;AAC1B,MAAA,IAAI,CAACE,GAAG,CAACC,gBAAgB,EAAE,EAAE;AAC3BC,QAAAA,OAAO,EAAE,IAAI;AACbC,QAAAA,QAAQ,EAAE,yBAAA;AACZ,OAAC,CAAC,CAAA;AACJ,KAAA;AAEA,IAAA,IAAI,CAACH,GAAG,CAACI,sBAAsB,EAAE,EAAE;AACjCF,MAAAA,OAAO,EAAE,IAAI;AACbC,MAAAA,QAAQ,EAAE,yBAAyB;AACnCV,MAAAA,OAAO,EAAE;AAAEF,QAAAA,KAAK,EAALA,KAAK;AAAEC,QAAAA,cAAc,EAAdA,cAAc;AAAEM,QAAAA,sBAAsB,EAAtBA,sBAAAA;AAAuB,OAAA;AAC3D,KAAC,CAAC,CAAA;GACH;AAEDO,EAAAA,UAAU,EAAG,YAAA;IACX3B,0BAA0B,CAACE,SAAS,CAACyB,UAAU,CAAChB,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC,CAAA;AACtE,IAAA,IAAI,IAAI,CAACS,mBAAmB,EAAE,EAAE;AAC9B,MAAA,IAAI,CAACO,kBAAkB,CAAC,KAAK,CAAC,CAAA;AAChC,KAAC,MAAM;MACL,IAAI,CAACrB,WAAW,GAAG,KAAK,CAAA;AAC1B,KAAA;GACD;AAEDc,EAAAA,mBAAmB,EAAG,YAAA;AAAA,IAAA,IAAA,qBAAA,EAAA,sBAAA,CAAA;AACpB,IAAA,MAAMQ,iBAAiB,GAAG,CAAA,qBAAA,GAAA,IAAI,CAACd,OAAO,CAACe,QAAQ,CAACC,GAAG,CAAC,gCAAgC,CAAC,MAAA,IAAA,IAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,CAAA,sBAAA,GAA3D,sBACxBC,cAAc,MAAA,IAAA,IAAA,sBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GADU,uBACRH,iBAAiB,CAAA;AACnC,IAAA,OAAOA,iBAAiB,KAAKI,SAAS,GAAGJ,iBAAiB,GAAG,IAAI,CAAA;GAClE;AAEDK,EAAAA,iBAAiB,EAAG,YAAA;IAClB,IAAI,CAAC3B,WAAW,GAAG,KAAK,CAAA;IACxB,IAAI,CAAC4B,MAAM,EAAE,CAAA;AAEb,IAAA,IAAI,CAACP,kBAAkB,CAAC,IAAI,CAAC,CAAA;IAC7B,IAAI,CAACQ,8BAA8B,EAAE,CAAA;GACtC;AAEDR,EAAAA,kBAAkB,EAACS,UAAAA,IAAI,GAAG,IAAI,EAAE;IAC9B,MAAMC,UAAU,GAAG,IAAI,CAACC,GAAG,CAACC,IAAI,CAAC,4BAA4B,CAAC,CAAA;AAC9DF,IAAAA,UAAU,CAACG,MAAM,CAACJ,IAAI,CAAC,CAAA;GACxB;AAEDD,EAAAA,8BAA8B,EAAG,YAAA;IAC/B,IAAI,CAACG,GAAG,CAACC,IAAI,CAAC,+BAA+B,CAAC,CAACE,MAAM,EAAE,CAAA;AACzD,GAAA;AACF,CAAC,CAAC,CACH,CAAA;AAED,sCAAezC,0BAA0B,CAACG,MAAM,CAAC;AAC/CD,EAAAA,IAAI,EAAJA,IAAAA;AACF,CAAC,CAAC;;;;"}