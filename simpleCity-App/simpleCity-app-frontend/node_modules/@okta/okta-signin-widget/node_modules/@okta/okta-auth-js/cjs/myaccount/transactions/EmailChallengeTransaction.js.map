{"version":3,"file":"EmailChallengeTransaction.js","names":["EmailChallengeTransaction","BaseTransaction","constructor","oktaAuth","options","accessToken","res","id","expiresAt","profile","status","_links","poll","fn","generateRequestFnFromLinks","methodName","links","transactionClassName","verify","payload"],"sources":["../../../../lib/myaccount/transactions/EmailChallengeTransaction.ts"],"sourcesContent":["import EmailStatusTransaction from './EmailStatusTransaction';\nimport { \n  EmailProfile, \n  Status,\n  VerificationPayload, \n} from '../types';\nimport BaseTransaction from './Base';\nimport { generateRequestFnFromLinks } from '../request';\n\nexport default class EmailChallengeTransaction extends BaseTransaction {\n  id: string;\n  expiresAt: string;\n  profile: EmailProfile;\n  status: Status;\n\n  poll: () => Promise<EmailStatusTransaction>;\n  // eslint-disable-next-line no-use-before-define\n  verify: (payload: VerificationPayload) => Promise<EmailChallengeTransaction>;\n\n  constructor(oktaAuth, options) {\n    super(oktaAuth, options);\n\n    const { accessToken, res } = options;\n    // assign required fields from res\n    const { id, expiresAt, profile, status, _links } = res;\n    this.id = id;\n    this.expiresAt = expiresAt;\n    this.profile = profile;\n    this.status = status;\n\n    // assign transformed fns to transaction\n    this.poll = async () => {\n      const fn = generateRequestFnFromLinks({ \n        oktaAuth, \n        accessToken, \n        methodName: 'poll', \n        links: _links,\n        transactionClassName: 'EmailStatusTransaction'\n      });\n      return await fn() as EmailStatusTransaction;\n    };\n    this.verify = async (payload) => {\n      const fn = generateRequestFnFromLinks({ \n        oktaAuth, \n        accessToken, \n        methodName: 'verify', \n        links: _links,\n      });\n      return await fn(payload) as EmailChallengeTransaction;\n    };\n  }\n}\n"],"mappings":";;;;;;AAMA;;AACA;;AAEe,MAAMA,yBAAN,SAAwCC,aAAxC,CAAwD;EAOrE;EAGAC,WAAW,CAACC,QAAD,EAAWC,OAAX,EAAoB;IAC7B,MAAMD,QAAN,EAAgBC,OAAhB;IAEA,MAAM;MAAEC,WAAF;MAAeC;IAAf,IAAuBF,OAA7B,CAH6B,CAI7B;;IACA,MAAM;MAAEG,EAAF;MAAMC,SAAN;MAAiBC,OAAjB;MAA0BC,MAA1B;MAAkCC;IAAlC,IAA6CL,GAAnD;IACA,KAAKC,EAAL,GAAUA,EAAV;IACA,KAAKC,SAAL,GAAiBA,SAAjB;IACA,KAAKC,OAAL,GAAeA,OAAf;IACA,KAAKC,MAAL,GAAcA,MAAd,CAT6B,CAW7B;;IACA,KAAKE,IAAL,GAAY,YAAY;MACtB,MAAMC,EAAE,GAAG,IAAAC,mCAAA,EAA2B;QACpCX,QADoC;QAEpCE,WAFoC;QAGpCU,UAAU,EAAE,MAHwB;QAIpCC,KAAK,EAAEL,MAJ6B;QAKpCM,oBAAoB,EAAE;MALc,CAA3B,CAAX;MAOA,OAAO,MAAMJ,EAAE,EAAf;IACD,CATD;;IAUA,KAAKK,MAAL,GAAc,MAAOC,OAAP,IAAmB;MAC/B,MAAMN,EAAE,GAAG,IAAAC,mCAAA,EAA2B;QACpCX,QADoC;QAEpCE,WAFoC;QAGpCU,UAAU,EAAE,QAHwB;QAIpCC,KAAK,EAAEL;MAJ6B,CAA3B,CAAX;MAMA,OAAO,MAAME,EAAE,CAACM,OAAD,CAAf;IACD,CARD;EASD;;AAzCoE"}