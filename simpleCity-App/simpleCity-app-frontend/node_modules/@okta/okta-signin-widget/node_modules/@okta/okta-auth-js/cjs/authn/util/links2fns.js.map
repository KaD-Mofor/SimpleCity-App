{"version":3,"file":"links2fns.js","names":["links2fns","sdk","tx","res","obj","ref","fns","linkName","_links","Object","prototype","hasOwnProperty","call","link","name","type","poll","getPollFn","fn","link2fn"],"sources":["../../../../lib/authn/util/links2fns.ts"],"sourcesContent":["import { OktaAuthHttpInterface } from '../../http/types';\nimport { AuthnTransactionFunctions, AuthnTransactionAPI } from '../types';\nimport { link2fn } from './link2fn';\nimport { getPollFn } from './poll';\n\nexport function links2fns(sdk: OktaAuthHttpInterface, tx: AuthnTransactionAPI, res, obj, ref) {\n  var fns = {} as AuthnTransactionFunctions;\n  for (var linkName in obj._links) {\n    if (!Object.prototype.hasOwnProperty.call(obj._links, linkName)) {\n      continue;\n    }\n\n    var link = obj._links[linkName];\n    \n    if (linkName === 'next') {\n      linkName = link.name;\n    }\n\n    if (link.type) {\n      fns[linkName] = link;\n      continue;\n    }\n\n    switch (linkName) {\n      // poll is only found at the transaction\n      // level, so we don't need to pass the link\n      case 'poll':\n        fns.poll = getPollFn(sdk, res, ref);\n        break;\n\n      default:\n        var fn = link2fn(sdk, tx, res, obj, link, ref);\n        if (fn) {\n          fns[linkName] = fn;\n        }\n    }\n  }\n  return fns;\n}\n"],"mappings":";;;;AAEA;;AACA;;AAEO,SAASA,SAAT,CAAmBC,GAAnB,EAA+CC,EAA/C,EAAwEC,GAAxE,EAA6EC,GAA7E,EAAkFC,GAAlF,EAAuF;EAC5F,IAAIC,GAAG,GAAG,EAAV;;EACA,KAAK,IAAIC,QAAT,IAAqBH,GAAG,CAACI,MAAzB,EAAiC;IAC/B,IAAI,CAACC,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCR,GAAG,CAACI,MAAzC,EAAiDD,QAAjD,CAAL,EAAiE;MAC/D;IACD;;IAED,IAAIM,IAAI,GAAGT,GAAG,CAACI,MAAJ,CAAWD,QAAX,CAAX;;IAEA,IAAIA,QAAQ,KAAK,MAAjB,EAAyB;MACvBA,QAAQ,GAAGM,IAAI,CAACC,IAAhB;IACD;;IAED,IAAID,IAAI,CAACE,IAAT,EAAe;MACbT,GAAG,CAACC,QAAD,CAAH,GAAgBM,IAAhB;MACA;IACD;;IAED,QAAQN,QAAR;MACE;MACA;MACA,KAAK,MAAL;QACED,GAAG,CAACU,IAAJ,GAAW,IAAAC,eAAA,EAAUhB,GAAV,EAAeE,GAAf,EAAoBE,GAApB,CAAX;QACA;;MAEF;QACE,IAAIa,EAAE,GAAG,IAAAC,gBAAA,EAAQlB,GAAR,EAAaC,EAAb,EAAiBC,GAAjB,EAAsBC,GAAtB,EAA2BS,IAA3B,EAAiCR,GAAjC,CAAT;;QACA,IAAIa,EAAJ,EAAQ;UACNZ,GAAG,CAACC,QAAD,CAAH,GAAgBW,EAAhB;QACD;;IAXL;EAaD;;EACD,OAAOZ,GAAP;AACD"}