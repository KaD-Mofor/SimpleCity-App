{"version":3,"file":"api.js","names":["createIdxAPI","sdk","boundStartTransaction","startTransaction","bind","idx","interact","introspect","makeIdxResponse","makeIdxState","authenticate","register","start","poll","proceed","cancel","recoverPassword","handleInteractionCodeRedirect","isInteractionRequired","isInteractionRequiredError","handleEmailVerifyCallback","isEmailVerifyCallback","parseEmailVerifyCallback","isEmailVerifyCallbackError","getSavedTransactionMeta","createTransactionMeta","getTransactionMeta","saveTransactionMeta","clearTransactionMeta","isTransactionMetaValid","setFlow","flow","options","getFlow","canProceed","unlockAccount"],"sources":["../../../../lib/idx/factory/api.ts"],"sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\nimport { isInteractionRequired, isInteractionRequiredError } from '../../oidc';\nimport { authenticate } from '../authenticate';\nimport { cancel } from '../cancel';\nimport {\n  handleEmailVerifyCallback,\n  isEmailVerifyCallback,\n  isEmailVerifyCallbackError,\n  parseEmailVerifyCallback\n} from '../emailVerify';\nimport { handleInteractionCodeRedirect } from '../handleInteractionCodeRedirect';\nimport { makeIdxState } from '../idxState';\nimport { interact } from '../interact';\nimport { introspect } from '../introspect';\nimport { poll } from '../poll';\nimport { canProceed, proceed } from '../proceed';\nimport { recoverPassword } from '../recoverPassword';\nimport { register } from '../register';\nimport { startTransaction } from '../startTransaction';\nimport {\n  clearTransactionMeta,\n  createTransactionMeta,\n  getSavedTransactionMeta,\n  getTransactionMeta,\n  isTransactionMetaValid,\n  saveTransactionMeta\n} from '../transactionMeta';\nimport { FlowIdentifier, IdxAPI, OktaAuthIdxInterface } from '../types';\nimport { unlockAccount } from '../unlockAccount';\n\n// Factory\nexport function createIdxAPI(sdk: OktaAuthIdxInterface): IdxAPI {\n  const boundStartTransaction = startTransaction.bind(null, sdk);\n  const idx = {\n    interact: interact.bind(null, sdk),\n    introspect: introspect.bind(null, sdk),\n    makeIdxResponse: makeIdxState.bind(null, sdk),\n    \n    authenticate: authenticate.bind(null, sdk),\n    register: register.bind(null, sdk),\n    start: boundStartTransaction,\n    startTransaction: boundStartTransaction, // Use `start` instead. `startTransaction` will be removed in 7.0\n    poll: poll.bind(null, sdk),\n    proceed: proceed.bind(null, sdk),\n    cancel: cancel.bind(null, sdk),\n    recoverPassword: recoverPassword.bind(null, sdk),\n\n    // oauth redirect callback\n    handleInteractionCodeRedirect: handleInteractionCodeRedirect.bind(null, sdk),\n\n    // interaction required callback\n    isInteractionRequired: isInteractionRequired.bind(null, sdk),\n    isInteractionRequiredError,\n\n    // email verify callback\n    handleEmailVerifyCallback: handleEmailVerifyCallback.bind(null, sdk),\n    isEmailVerifyCallback,\n    parseEmailVerifyCallback,\n    isEmailVerifyCallbackError,\n    \n    getSavedTransactionMeta: getSavedTransactionMeta.bind(null, sdk),\n    createTransactionMeta: createTransactionMeta.bind(null, sdk),\n    getTransactionMeta: getTransactionMeta.bind(null, sdk),\n    saveTransactionMeta: saveTransactionMeta.bind(null, sdk),\n    clearTransactionMeta: clearTransactionMeta.bind(null, sdk),\n    isTransactionMetaValid,\n    setFlow: (flow: FlowIdentifier) => {\n      sdk.options.flow = flow;\n    },\n    getFlow: (): FlowIdentifier | undefined => {\n      return sdk.options.flow;\n    },\n    canProceed: canProceed.bind(null, sdk),\n    unlockAccount: unlockAccount.bind(null, sdk),\n  };\n  return idx;\n}\n\n"],"mappings":";;;;AAaA;;AACA;;AACA;;AACA;;AAMA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AASA;;AAxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA+BA;AACO,SAASA,YAAT,CAAsBC,GAAtB,EAAyD;EAC9D,MAAMC,qBAAqB,GAAGC,kCAAA,CAAiBC,IAAjB,CAAsB,IAAtB,EAA4BH,GAA5B,CAA9B;;EACA,MAAMI,GAAG,GAAG;IACVC,QAAQ,EAAEA,kBAAA,CAASF,IAAT,CAAc,IAAd,EAAoBH,GAApB,CADA;IAEVM,UAAU,EAAEA,sBAAA,CAAWH,IAAX,CAAgB,IAAhB,EAAsBH,GAAtB,CAFF;IAGVO,eAAe,EAAEC,sBAAA,CAAaL,IAAb,CAAkB,IAAlB,EAAwBH,GAAxB,CAHP;IAKVS,YAAY,EAAEA,0BAAA,CAAaN,IAAb,CAAkB,IAAlB,EAAwBH,GAAxB,CALJ;IAMVU,QAAQ,EAAEA,kBAAA,CAASP,IAAT,CAAc,IAAd,EAAoBH,GAApB,CANA;IAOVW,KAAK,EAAEV,qBAPG;IAQVC,gBAAgB,EAAED,qBARR;IAQ+B;IACzCW,IAAI,EAAEA,UAAA,CAAKT,IAAL,CAAU,IAAV,EAAgBH,GAAhB,CATI;IAUVa,OAAO,EAAEA,gBAAA,CAAQV,IAAR,CAAa,IAAb,EAAmBH,GAAnB,CAVC;IAWVc,MAAM,EAAEA,cAAA,CAAOX,IAAP,CAAY,IAAZ,EAAkBH,GAAlB,CAXE;IAYVe,eAAe,EAAEA,gCAAA,CAAgBZ,IAAhB,CAAqB,IAArB,EAA2BH,GAA3B,CAZP;IAcV;IACAgB,6BAA6B,EAAEA,4DAAA,CAA8Bb,IAA9B,CAAmC,IAAnC,EAAyCH,GAAzC,CAfrB;IAiBV;IACAiB,qBAAqB,EAAEA,2BAAA,CAAsBd,IAAtB,CAA2B,IAA3B,EAAiCH,GAAjC,CAlBb;IAmBVkB,0BAA0B,EAA1BA,gCAnBU;IAqBV;IACAC,yBAAyB,EAAEA,sCAAA,CAA0BhB,IAA1B,CAA+B,IAA/B,EAAqCH,GAArC,CAtBjB;IAuBVoB,qBAAqB,EAArBA,kCAvBU;IAwBVC,wBAAwB,EAAxBA,qCAxBU;IAyBVC,0BAA0B,EAA1BA,uCAzBU;IA2BVC,uBAAuB,EAAEA,wCAAA,CAAwBpB,IAAxB,CAA6B,IAA7B,EAAmCH,GAAnC,CA3Bf;IA4BVwB,qBAAqB,EAAEA,sCAAA,CAAsBrB,IAAtB,CAA2B,IAA3B,EAAiCH,GAAjC,CA5Bb;IA6BVyB,kBAAkB,EAAEA,mCAAA,CAAmBtB,IAAnB,CAAwB,IAAxB,EAA8BH,GAA9B,CA7BV;IA8BV0B,mBAAmB,EAAEA,oCAAA,CAAoBvB,IAApB,CAAyB,IAAzB,EAA+BH,GAA/B,CA9BX;IA+BV2B,oBAAoB,EAAEA,qCAAA,CAAqBxB,IAArB,CAA0B,IAA1B,EAAgCH,GAAhC,CA/BZ;IAgCV4B,sBAAsB,EAAtBA,uCAhCU;IAiCVC,OAAO,EAAGC,IAAD,IAA0B;MACjC9B,GAAG,CAAC+B,OAAJ,CAAYD,IAAZ,GAAmBA,IAAnB;IACD,CAnCS;IAoCVE,OAAO,EAAE,MAAkC;MACzC,OAAOhC,GAAG,CAAC+B,OAAJ,CAAYD,IAAnB;IACD,CAtCS;IAuCVG,UAAU,EAAEA,mBAAA,CAAW9B,IAAX,CAAgB,IAAhB,EAAsBH,GAAtB,CAvCF;IAwCVkC,aAAa,EAAEA,4BAAA,CAAc/B,IAAd,CAAmB,IAAnB,EAAyBH,GAAzB;EAxCL,CAAZ;EA0CA,OAAOI,GAAP;AACD"}