{"version":3,"file":"api.js","names":["createIdxAPI","sdk","setRemediatorsCtx","remediators","getFlowSpecification","boundStartTransaction","startTransaction","bind","idx","interact","introspect","makeIdxResponse","makeIdxState","authenticate","register","start","poll","proceed","cancel","recoverPassword","handleInteractionCodeRedirect","isInteractionRequired","isInteractionRequiredError","handleEmailVerifyCallback","isEmailVerifyCallback","parseEmailVerifyCallback","isEmailVerifyCallbackError","getSavedTransactionMeta","createTransactionMeta","getTransactionMeta","saveTransactionMeta","clearTransactionMeta","isTransactionMetaValid","setFlow","flow","options","getFlow","canProceed","unlockAccount"],"sources":["../../../../lib/idx/factory/api.ts"],"sourcesContent":["/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n\nimport { isInteractionRequired, isInteractionRequiredError } from '../../oidc';\nimport { authenticate } from '../authenticate';\nimport { cancel } from '../cancel';\nimport {\n  handleEmailVerifyCallback,\n  isEmailVerifyCallback,\n  isEmailVerifyCallbackError,\n  parseEmailVerifyCallback\n} from '../emailVerify';\nimport { handleInteractionCodeRedirect } from '../handleInteractionCodeRedirect';\nimport { makeIdxState } from '../idxState';\nimport { interact } from '../interact';\nimport { introspect } from '../introspect';\nimport { poll } from '../poll';\nimport { canProceed, proceed } from '../proceed';\nimport { recoverPassword } from '../recoverPassword';\nimport { register } from '../register';\nimport { startTransaction } from '../startTransaction';\nimport {\n  clearTransactionMeta,\n  createTransactionMeta,\n  getSavedTransactionMeta,\n  getTransactionMeta,\n  isTransactionMetaValid,\n  saveTransactionMeta\n} from '../transactionMeta';\nimport { FlowIdentifier, IdxAPI, OktaAuthIdxInterface } from '../types';\nimport { unlockAccount } from '../unlockAccount';\nimport * as remediators from '../remediators';\nimport { getFlowSpecification } from '../flow/FlowSpecification';\nimport { setRemediatorsCtx } from '../util';\n\n// Factory\nexport function createIdxAPI(sdk: OktaAuthIdxInterface): IdxAPI {\n  setRemediatorsCtx({\n    remediators,\n    getFlowSpecification,\n  });\n  const boundStartTransaction = startTransaction.bind(null, sdk);\n  const idx = {\n    interact: interact.bind(null, sdk),\n    introspect: introspect.bind(null, sdk),\n    makeIdxResponse: makeIdxState.bind(null, sdk),\n    \n    authenticate: authenticate.bind(null, sdk),\n    register: register.bind(null, sdk),\n    start: boundStartTransaction,\n    startTransaction: boundStartTransaction, // Use `start` instead. `startTransaction` will be removed in 7.0\n    poll: poll.bind(null, sdk),\n    proceed: proceed.bind(null, sdk),\n    cancel: cancel.bind(null, sdk),\n    recoverPassword: recoverPassword.bind(null, sdk),\n\n    // oauth redirect callback\n    handleInteractionCodeRedirect: handleInteractionCodeRedirect.bind(null, sdk),\n\n    // interaction required callback\n    isInteractionRequired: isInteractionRequired.bind(null, sdk),\n    isInteractionRequiredError,\n\n    // email verify callback\n    handleEmailVerifyCallback: handleEmailVerifyCallback.bind(null, sdk),\n    isEmailVerifyCallback,\n    parseEmailVerifyCallback,\n    isEmailVerifyCallbackError,\n    \n    getSavedTransactionMeta: getSavedTransactionMeta.bind(null, sdk),\n    createTransactionMeta: createTransactionMeta.bind(null, sdk),\n    getTransactionMeta: getTransactionMeta.bind(null, sdk),\n    saveTransactionMeta: saveTransactionMeta.bind(null, sdk),\n    clearTransactionMeta: clearTransactionMeta.bind(null, sdk),\n    isTransactionMetaValid,\n    setFlow: (flow: FlowIdentifier) => {\n      sdk.options.flow = flow;\n    },\n    getFlow: (): FlowIdentifier | undefined => {\n      return sdk.options.flow;\n    },\n    canProceed: canProceed.bind(null, sdk),\n    unlockAccount: unlockAccount.bind(null, sdk),\n  };\n  return idx;\n}\n\n"],"mappings":";;;AAaA;AACA;AACA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AASA;AACA;AACA;AACA;AAA4C;AAAA;AA3C5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAkCA;AACO,SAASA,YAAY,CAACC,GAAyB,EAAU;EAC9D,IAAAC,uBAAiB,EAAC;IAChBC,WAAW;IACXC,oBAAoB,EAApBA;EACF,CAAC,CAAC;EACF,MAAMC,qBAAqB,GAAGC,kCAAgB,CAACC,IAAI,CAAC,IAAI,EAAEN,GAAG,CAAC;EAC9D,MAAMO,GAAG,GAAG;IACVC,QAAQ,EAAEA,kBAAQ,CAACF,IAAI,CAAC,IAAI,EAAEN,GAAG,CAAC;IAClCS,UAAU,EAAEA,sBAAU,CAACH,IAAI,CAAC,IAAI,EAAEN,GAAG,CAAC;IACtCU,eAAe,EAAEC,sBAAY,CAACL,IAAI,CAAC,IAAI,EAAEN,GAAG,CAAC;IAE7CY,YAAY,EAAEA,0BAAY,CAACN,IAAI,CAAC,IAAI,EAAEN,GAAG,CAAC;IAC1Ca,QAAQ,EAAEA,kBAAQ,CAACP,IAAI,CAAC,IAAI,EAAEN,GAAG,CAAC;IAClCc,KAAK,EAAEV,qBAAqB;IAC5BC,gBAAgB,EAAED,qBAAqB;IAAE;IACzCW,IAAI,EAAEA,UAAI,CAACT,IAAI,CAAC,IAAI,EAAEN,GAAG,CAAC;IAC1BgB,OAAO,EAAEA,gBAAO,CAACV,IAAI,CAAC,IAAI,EAAEN,GAAG,CAAC;IAChCiB,MAAM,EAAEA,cAAM,CAACX,IAAI,CAAC,IAAI,EAAEN,GAAG,CAAC;IAC9BkB,eAAe,EAAEA,gCAAe,CAACZ,IAAI,CAAC,IAAI,EAAEN,GAAG,CAAC;IAEhD;IACAmB,6BAA6B,EAAEA,4DAA6B,CAACb,IAAI,CAAC,IAAI,EAAEN,GAAG,CAAC;IAE5E;IACAoB,qBAAqB,EAAEA,2BAAqB,CAACd,IAAI,CAAC,IAAI,EAAEN,GAAG,CAAC;IAC5DqB,0BAA0B,EAA1BA,gCAA0B;IAE1B;IACAC,yBAAyB,EAAEA,sCAAyB,CAAChB,IAAI,CAAC,IAAI,EAAEN,GAAG,CAAC;IACpEuB,qBAAqB,EAArBA,kCAAqB;IACrBC,wBAAwB,EAAxBA,qCAAwB;IACxBC,0BAA0B,EAA1BA,uCAA0B;IAE1BC,uBAAuB,EAAEA,wCAAuB,CAACpB,IAAI,CAAC,IAAI,EAAEN,GAAG,CAAC;IAChE2B,qBAAqB,EAAEA,sCAAqB,CAACrB,IAAI,CAAC,IAAI,EAAEN,GAAG,CAAC;IAC5D4B,kBAAkB,EAAEA,mCAAkB,CAACtB,IAAI,CAAC,IAAI,EAAEN,GAAG,CAAC;IACtD6B,mBAAmB,EAAEA,oCAAmB,CAACvB,IAAI,CAAC,IAAI,EAAEN,GAAG,CAAC;IACxD8B,oBAAoB,EAAEA,qCAAoB,CAACxB,IAAI,CAAC,IAAI,EAAEN,GAAG,CAAC;IAC1D+B,sBAAsB,EAAtBA,uCAAsB;IACtBC,OAAO,EAAGC,IAAoB,IAAK;MACjCjC,GAAG,CAACkC,OAAO,CAACD,IAAI,GAAGA,IAAI;IACzB,CAAC;IACDE,OAAO,EAAE,MAAkC;MACzC,OAAOnC,GAAG,CAACkC,OAAO,CAACD,IAAI;IACzB,CAAC;IACDG,UAAU,EAAEA,mBAAU,CAAC9B,IAAI,CAAC,IAAI,EAAEN,GAAG,CAAC;IACtCqC,aAAa,EAAEA,4BAAa,CAAC/B,IAAI,CAAC,IAAI,EAAEN,GAAG;EAC7C,CAAC;EACD,OAAOO,GAAG;AACZ"}