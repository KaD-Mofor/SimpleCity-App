{"version":3,"file":"emailApi.js","names":["getEmails","oktaAuth","options","transaction","sendRequest","url","method","accessToken","EmailTransaction","getEmail","id","addEmail","payload","deleteEmail","sendEmailChallenge","EmailChallengeTransaction","getEmailChallenge","emailId","challengeId","verifyEmailChallenge"],"sources":["../../../lib/myaccount/emailApi.ts"],"sourcesContent":["import { sendRequest } from './request';\nimport { IAPIFunction } from './types';\nimport {\n  BaseTransaction, \n  EmailTransaction, \n  EmailChallengeTransaction \n} from './transactions';\n\n/**\n * @scope: okta.myAccount.email.read\n */\nexport const getEmails: IAPIFunction<EmailTransaction[]> = async (\n  oktaAuth,\n  options?\n) => {\n  const transaction = await sendRequest<EmailTransaction, 'plural'>(oktaAuth, {\n    url: '/idp/myaccount/emails',\n    method: 'GET',\n    accessToken: options?.accessToken\n  }, EmailTransaction);\n  return transaction;\n};\n\n/**\n * @scope: okta.myAccount.email.read\n */\nexport const getEmail: IAPIFunction<EmailTransaction> = async (\n  oktaAuth, \n  options\n) => {\n  const { id, accessToken } = options!;\n  const transaction = await sendRequest(oktaAuth, {\n    url: `/idp/myaccount/emails/${id}`,\n    method: 'GET',\n    accessToken,\n  }, EmailTransaction);\n  return transaction;\n};\n\n/**\n * @scope: okta.myAccount.email.manage\n */\nexport const addEmail: IAPIFunction<EmailTransaction> = async (\n  oktaAuth, \n  options\n): Promise<EmailTransaction> => {\n  const { accessToken, payload } = options!;\n  const transaction = await sendRequest(oktaAuth, {\n    url: '/idp/myaccount/emails',\n    method: 'POST',\n    payload,\n    accessToken,\n  }, EmailTransaction);\n  return transaction;\n};\n\n/**\n * @scope: okta.myAccount.email.manage\n */\nexport const deleteEmail: IAPIFunction<BaseTransaction> = async (\n  oktaAuth, \n  options\n) => {\n  const { id, accessToken } = options!;\n  const transaction = await sendRequest(oktaAuth, {\n    url: `/idp/myaccount/emails/${id}`,\n    method: 'DELETE',\n    accessToken\n  });\n  return transaction;\n};\n\n/**\n * @scope: okta.myAccount.email.read\n */\nexport const sendEmailChallenge: IAPIFunction<EmailChallengeTransaction> = async (\n  oktaAuth, \n  options\n) => {\n  const { id, accessToken } = options!;\n  const transaction = await sendRequest(oktaAuth, {\n    url: `/idp/myaccount/emails/${id}/challenge`,\n    method: 'POST',\n    accessToken,\n  }, EmailChallengeTransaction);\n  return transaction;\n};\n\n/**\n * @scope: okta.myAccount.email.read\n */\nexport const getEmailChallenge: IAPIFunction<EmailChallengeTransaction> = async (\n  oktaAuth, \n  options\n) => {\n  const { emailId, challengeId, accessToken } = options!;\n  const transaction = await sendRequest(oktaAuth, {\n    url: `/idp/myaccount/emails/${emailId}/challenge/${challengeId}`,\n    method: 'POST',\n    accessToken,\n  }, EmailChallengeTransaction);\n  return transaction;\n};\n\n/**\n * @scope: okta.myAccount.email.manage\n */\nexport const verifyEmailChallenge: IAPIFunction<BaseTransaction> = async (\n  oktaAuth,\n  options\n) => {\n  const { emailId, challengeId, payload, accessToken } = options!;\n  const transaction = await sendRequest(oktaAuth, {\n    url: `/idp/myaccount/emails/${emailId}/challenge/${challengeId}/verify`,\n    method: 'POST',\n    payload,\n    accessToken\n  });\n  return transaction;\n};\n"],"mappings":"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"}